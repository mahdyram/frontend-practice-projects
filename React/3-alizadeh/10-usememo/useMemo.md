### `useMemo` ุฏุฑ React ฺุณุชุ

`useMemo` ฺฉ **ููฺฉ ุจูููโุณุงุฒ (performance optimization hook)** ุงุณุช ฺฉู ุจุงุนุซ ูโุดูุฏ ูุญุงุณุจุงุช ุณูฺฏู ุง ุชููุฏ ููุงุฏุฑ ุฌุฏุฏ **ููุท ููุช ูุงุจุณุชฺฏโูุง ุชุบุฑ ฺฉููุฏ** ุงุฌุฑุง ุดูุฏุ ูู ุฏุฑ ูุฑ ุฑูุฏุฑ.

---

## ุณูุชฺฉุณ

```jsx
const memoizedValue = useMemo(() => {
  // ูุญุงุณุจุงุช ุณูฺฏู ุง ููุฏุงุฑ ฺฉู ูโุฎูุงูู ุฐุฎุฑู ุดูุฏ
  return someCalculation(a, b);
}, [a, b]);
```

- ุชุงุจุน ฺฉู ุจู `useMemo` ูโุฏููุ ููุท ููุช ุงุฌุฑุง ูโุดูุฏ ฺฉู ฺฉ ุงุฒ ููุงุฏุฑ ููุฌูุฏ ุฏุฑ ุขุฑุงู ูุงุจุณุชฺฏโูุง `[a, b]` ุชุบุฑ ฺฉูุฏ.
- ุฏุฑ ุจูู ุฑูุฏุฑูุงุ React ููุงู ููุฏุงุฑ ูุจู ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ (cache).

---

## ูุซุงู ุณุงุฏู

```jsx
import { useState, useMemo } from "react";

function ExpensiveCalculation(num) {
  console.log("Calculating...");
  let total = 0;
  for (let i = 0; i < 100000000; i++) {
    total += num * 2;
  }
  return total;
}

export default function App() {
  const [count, setCount] = useState(0);
  const [dark, setDark] = useState(false);

  const calculation = useMemo(() => ExpensiveCalculation(count), [count]);

  const themeStyle = {
    backgroundColor: dark ? "black" : "white",
    color: dark ? "white" : "black",
  };

  return (
    <div style={themeStyle}>
      <h2>Expensive Calculation: {calculation}</h2>
      <button onClick={() => setCount((c) => c + 1)}>Increment</button>
      <button onClick={() => setDark((d) => !d)}>Toggle Theme</button>
    </div>
  );
}
```

### ุจุฏูู `useMemo`

- ูุฑ ุจุงุฑ ฺฉู state `dark` ุชุบุฑ ฺฉูุฏุ **ฺฉู ฺฉุงููพูููุช ุฏูุจุงุฑู ุฑูุฏุฑ ูโุดูุฏ**.
- `ExpensiveCalculation` ูุฑ ุจุงุฑ ุงุฒ ุงูู ุงุฌุฑุง ูโุดูุฏุ ุญุช ููุช ููุฏุงุฑ `count` ุนูุถ ูุดุฏู.

### ุจุง `useMemo`

- ูุญุงุณุจู ููุท ููุช ุฏูุจุงุฑู ุงุฌุฑุง ูโุดูุฏ ฺฉู `count` ุชุบุฑ ฺฉูุฏ.
- ุชุบุฑ `dark` ููุท ุธุงูุฑ ุฑุง ุชุบุฑ ูโุฏูุฏ ู ูุงุฒ ุจู ุงุฌุฑุง ูุฌุฏุฏ ูุญุงุณุจู ูุณุช.

---

## ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉููุ

- ุฒูุงู ฺฉู **ูุญุงุณุจุงุช ุณูฺฏู** ุฏุงุฑุฏ (loop ุจุฒุฑฺฏุ ุนููุงุช ูพฺุฏูุ ูพุฑุฏุงุฒุด ุฏุงุฏูโูุง).
- ููุช ููุฏุงุฑ ุชููุฏ ฺฉ ุชุงุจุน **ุฏุฑ ุฑูุฏุฑูุง ุจุนุฏ ุชุบุฑ ููโฺฉูุฏ** ูฺฏุฑ ุงูฺฉู state ุง props ุฎุงุต ุชุบุฑ ฺฉูุฏ.
- **ูู ุจุฑุง ูุฑ ฺุฒ ฺฉูฺฺฉ!** ฺูู ุฎูุฏุด ูู ูุฒูู ุฏุงุฑุฏ.

---

---

ุฎุฑุ **`useEffect` ุฌุงฺฏุฒู `useMemo` ูุณุช** ู ูุฏู ูุชูุงูุช ุฏุงุฑุฏ:

---

### **ุชูุงูุช ุงุตู**

- **`useMemo`**

  - ููุฏุงุฑ ูุญุงุณุจูโุดุฏู ุฑุง _cache_ ูโฺฉูุฏ ู ููุงู ุฑุง ุฏุฑ ุฑูุฏุฑูุง ุจุนุฏ ุงุณุชูุงุฏู ูโฺฉูุฏ.
  - ูฺ ฺฉุงุฑ ุฏุฑ "ุฎุงุฑุฌ ุงุฒ ุฑูุฏุฑ" ุงูุฌุงู ููโุฏูุฏ.
  - ูุฏู: ุจูููโุณุงุฒ ูุญุงุณุจุงุช ู ุฌููฺฏุฑ ุงุฒ ุงุฌุฑุง ุฏูุจุงุฑู ุชูุงุจุน ุณูฺฏู.

- **`useEffect`**

  - ุจุฑุง ุงูุฌุงู **side effect**ูุง ุจุนุฏ ุงุฒ ุฑูุฏุฑ ุงุณุชูุงุฏู ูโุดูุฏ (ูุฑุงุฎูุงู APIุ ุชุบุฑ DOMุ ูุงฺฏโฺฉุฑุฏูุ ุชุงูุฑ ู ...).
  - ููุฏุงุฑ ุจุฑููโฺฏุฑุฏุงูุฏุ ููุท ฺฉุฏ ุฑุง ุจุนุฏ ุงุฒ ุฑูุฏุฑ ุงุฌุฑุง ูโฺฉูุฏ.

---

### **ฺุฑุง `useEffect` ุฌุงฺฏุฒู `useMemo` ููโุดูุฏุ**

ูุซุงู ูุจู ุฑุง ุชุตูุฑ ฺฉู:

```jsx
const calculation = useMemo(() => ExpensiveCalculation(count), [count]);
```

ุงฺฏุฑ ุจุฎูุงูู ุจุง `useEffect` ูพุงุฏูโุณุงุฒ ฺฉูู:

```jsx
const [calculation, setCalculation] = useState(0);

useEffect(() => {
  setCalculation(ExpensiveCalculation(count));
}, [count]);
```

- ุงูุฌุง ูุฌุจูุฑ ุดุฏู ฺฉ **state ุงุถุงูู** ุชุนุฑู ฺฉูู.
- ูุฑ ุจุงุฑ ฺฉู `count` ุชุบุฑ ฺฉูุฏ:

  - ฺฉุงููพูููุช **ฺฉโุจุงุฑ ุฑูุฏุฑ ูโุดูุฏ**.
  - `useEffect` ุงุฌุฑุง ูโุดูุฏ ู `setCalculation` ุตุฏุง ุฒุฏู ูโุดูุฏ.
  - ุฏูุจุงุฑู **ุฑูุฏุฑ ุฏูู ุงุชูุงู ูโุงูุชุฏ**.

ุงูุง ุฏุฑ `useMemo`:

- ูุญุงุณุจู ุฏุฑ ููุงู ุฑูุฏุฑ ุงูู ุงูุฌุงู ูโุดูุฏ.
- ูุงุฒ ุจู **state ุงุถุงูู** ู **ุฏู ุจุงุฑ ุฑูุฏุฑ** ูุณุช.

---

### **ูุชุฌู**

- `useEffect` ุจุดุชุฑ ุจุฑุง side-effectูุงุณุช.
- `useMemo` ุจุฑุง cache ฺฉุฑุฏู ูุชุงุฌ ูุญุงุณุจุงุช ุฏุฑ ุฎูุฏ ูุฑุขูุฏ ุฑูุฏุฑ.

---

---

ุนุงูุ ุจุงู **ูุฏูโุจูโูุฏู** ุจุฑุฑุณ ฺฉูู ฺฉู ุงู ฺฉุฏ ฺู ุงุชูุงู ูโุงูุชุฏ ู ููุด `useMemo` ู `React.memo` ฺุณุชุ ู ฺุฑุง ููโุชูุงู ููุท ุงุฒ ฺฉ **ูุชุบุฑ ูุนููู** ุง ุญุช `useState` ุงุณุชูุงุฏู ฺฉุฑุฏ.

---

## 1๏ธโฃ ุณุงุฎุชุงุฑ ฺฉู ฺฉุงููพูููุชโูุง

### Person

```jsx
function Person({ person }) {
  console.log("person rendered");

  return (
    <h3>
      {person.fName} {person.lName} - {person.phone}
    </h3>
  );
}

export default memo(Person);
```

- ฺฉุงููพูููุช **ุชุงุจุน ุณุงุฏู** ฺฉู ฺฉ object ุจู ูุงู `person` ุฏุฑุงูุช ูโฺฉูุฏ.
- `console.log` ูุดุงู ูโุฏูุฏ **ูุฑ ุจุงุฑ ฺฉู Person render ูโุดูุฏ**.
- ุจุง `React.memo` (ุง `memo`) wrap ุดุฏูุ ุนู **ุงฺฏุฑ props ุชุบุฑ ูฺฉุฑุฏู ุจุงุดุฏุ render ููโุดูุฏ**.

---

### PersonForm

```jsx
export default function PersonForm() {
  const [count, setCount] = useState(0);
  const [phone, setPhone] = useState("");

  const person = useMemo(
    () => ({ fName: "ali", lName: "ram", phone }),
    [phone]
  );

  return (
    <div>
      <h3>Count: {count}</h3>
      <button onClick={() => setCount(count + 1)}>Increment</button>
      <hr className="hr2" />

      <input
        type="text"
        value={phone}
        onChange={(e) => setPhone(e.target.value)}
      />
      <Person person={person} />
    </div>
  );
}
```

- `count` ููุท ุจุฑุง ููุงุด ู ุชุณุช ุฑูุฏุฑ ุงุถุงู ุงุณุช.
- `phone` ููุฏุงุฑ ูุฑูุฏ ุงุฒ ฺฉุงุฑุจุฑ ุฑุง ูฺฏู ูโุฏุงุฑุฏ.
- `person` **ฺฉ object ุดุงูู fName, lName ู phone** ุงุณุช ฺฉู ุจุง `useMemo` ุณุงุฎุชู ูโุดูุฏ.

---

## 2๏ธโฃ ฺุฑุง `useMemo` ุงูุฌุง ุถุฑูุฑ ุงุณุชุ

ูุฑุถ ฺฉู ุจุฏูู `useMemo`:

```jsx
const person = { fName: "ali", lName: "ram", phone };
```

- ูุฑ ุจุงุฑ ฺฉู Parent (`PersonForm`) ุฑูุฏุฑ ุดูุฏุ **ฺฉ object ุฌุฏุฏ ุณุงุฎุชู ูโุดูุฏ**.
- ุญุช ุงฺฏุฑ `phone` ุชุบุฑ ูฺฉุฑุฏู ุจุงุดุฏุ `React.memo` ุขู ุฑุง **prop ุชุบุฑ ฺฉุฑุฏู** ุชุดุฎุต ูโุฏูุฏ.
- ูุชุฌู: **Person ูุฑ ุจุงุฑ ุฑูุฏุฑ ูโุดูุฏ** ู "person rendered" ฺุงูพ ูโุดูุฏ.

ุจุง `useMemo`:

```jsx
const person = useMemo(() => ({ fName: "ali", lName: "ram", phone }), [phone]);
```

- object `person` **ููุท ููุช `phone` ุชุบุฑ ฺฉูุฏ** ุณุงุฎุชู ูโุดูุฏ.
- ุฏุฑ ุฑูุฏุฑูุง ุฏฺฏุฑุ ููุงู object ูุจู ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ.
- ุญุงูุง `React.memo` ุชุดุฎุต ูโุฏูุฏ ฺฉู prop `person` ุชุบุฑ ูฺฉุฑุฏู โ Person **re-render ููโุดูุฏ**.

โ ูพุณ `useMemo` ุจุฑุง **ุซุงุจุช ูฺฏู ุฏุงุดุชู reference object ุจู renderูุง** ุงุณุช.

---

## 3๏ธโฃ ฺุฑุง ููโุชูุงูู ุงุฒ ฺฉ ูุชุบุฑ ูุนููู ุงุณุชูุงุฏู ฺฉููุ

```jsx
const person = { fName: "ali", lName: "ram", phone };
```

- ุฏุฑ ูุฑ render **ฺฉ object ุฌุฏุฏ ุณุงุฎุชู ูโุดูุฏ**.
- React.memo ููโุชูุงูุฏ ุฌูู ุฑูุฏุฑ ุงุถุงู ุฑุง ุจฺฏุฑุฏ ฺูู reference ุชุบุฑ ฺฉุฑุฏู ุงุณุช.

---

## 4๏ธโฃ ฺุฑุง ููโุชูุงูู ุงุฒ useState ุงุณุชูุงุฏู ฺฉููุ

```jsx
const [person, setPerson] = useState({ fName: "ali", lName: "ram", phone });
```

- technically ูโุดูุฏุ ูู:

  - ุจุงุฏ ูุฑ ุจุงุฑ ฺฉู `phone` ุชุบุฑ ฺฉุฑุฏุ ุจุง `setPerson` ููุฏุงุฑ ุฌุฏุฏ ุฑุง ุจูุฑุณุชู.
  - ุนู ฺฉุงุฑ ุงุถุงูู ู ูพฺุฏูโุชุฑ ุจุฑุง **ุญูุธ ููุงููฺฏ ุจู phone ู person**.
  - ุจุง useMemo ุงู ฺฉุงุฑ ฺฉุงููุงู ุงุชููุงุชฺฉ ุงุณุช ู ูุงุฒ ุจู state ุงุถุงู ูุณุช.

---

## 5๏ธโฃ ููุด ุฏูู ูุฑ ุงุจุฒุงุฑ

| ุงุจุฒุงุฑ        | ฺฉุงุฑุจุฑุฏ                                                                                       |
| ------------ | -------------------------------------------------------------------------------------------- |
| `useState`   | ูฺฏูโุฏุงุฑ state ูุญู ฺฉุงููพูููุช ู trigger ุฑูุฏุฑ ููฺฏุงู ุชุบุฑ ุขู                                   |
| `useMemo`    | cache ฺฉุฑุฏู ููุฏุงุฑ (ูุซู object ุง ูุญุงุณุจุงุช ุณูฺฏู) ุชุง ููุช ูุงุจุณุชฺฏ ุชุบุฑ ูฺฉูุฏุ ุฏูุจุงุฑู ุณุงุฎุชู ูุดูุฏ |
| `React.memo` | ุฌููฺฏุฑ ุงุฒ **re-render ฺฉุงููพูููุช ูุฑุฒูุฏ** ููุช props ุชุบุฑ ูฺฉุฑุฏู ุจุงุดุฏ                          |

---

## 6๏ธโฃ ุฌุฑุงู ุงุชูุงูุงุช ุฏุฑ ุงู ฺฉุฏ

1. ฺฉุงููพูููุช mount ูโุดูุฏ.
2. `person` ุจุง `useMemo` ุณุงุฎุชู ูโุดูุฏ.
3. `Person` render ูโุดูุฏ โ "person rendered" ฺุงูพ ูโุดูุฏ.
4. ฺฉุงุฑุจุฑ count ุฑุง ุงูุฒุงุด ูโุฏูุฏ:

   - `PersonForm` ุฑูุฏุฑ ูโุดูุฏ.
   - `phone` ุชุบุฑ ูฺฉุฑุฏู โ `person` ููุงู reference ูุจู ุงุณุช.
   - `React.memo` โ Person **render ููโุดูุฏ**.

5. ฺฉุงุฑุจุฑ phone ุฑุง ุชุบุฑ ูโุฏูุฏ:

   - `PersonForm` ุฑูุฏุฑ ูโุดูุฏ.
   - `phone` ุชุบุฑ ฺฉุฑุฏู โ `useMemo` object ุฌุฏุฏ ูโุณุงุฒุฏ.
   - `React.memo` โ Person **render ูโุดูุฏ** ู "person rendered" ฺุงูพ ูโุดูุฏ.

---

๐ก **ุฌูุนโุจูุฏ:**

- `React.memo` ููุท ุฌูู render ุงุถุงู ุจุฑุง props **ุชุบุฑ ูฺฉุฑุฏู** ุฑุง ูโฺฏุฑุฏ.
- ุจุฑุง reference-type props (ูุซู object ุง array) ุจุงุฏ **useMemo** ุง **useState** ุงุณุชูุงุฏู ฺฉูู ุชุง reference ุซุงุจุช ุจูุงูุฏ.
- ูุชุบุฑ ูุนููู ุฏุงุฎู render โ reference ุฌุฏุฏ โ memo ฺฉุงุฑ ููโฺฉูุฏ.
- useState โ ฺฉุงุฑ ูโฺฉูุฏ ูู ูุงุฒููุฏ ูุฏุฑุช state ุงุณุช. useMemo โ ุณุงุฏู ู ุฎูุงูุงุชุฑ.

---

- **`useMemo`** ุจุฑุง **ูููุฑุงุฒ ฺฉุฑุฏู ููุฏุงุฑ ููุง** (ูุชุฌู ฺฉ ูุญุงุณุจูุ ุขุฑุงู ุง ุขุจุฌฺฉุช) ุงุณุชูุงุฏู ูโุดูุฏ ุชุง ุฏุฑ ูุฑ ุฑูุฏุฑ ุฏูุจุงุฑู ุณุงุฎุชู ูุดูุฏ ูฺฏุฑ ุงูฺฉู ูุงุจุณุชฺฏโูุงุด ุชุบุฑ ฺฉููุฏ.
- **`useCallback`** ุจุฑุง **ูููุฑุงุฒ ฺฉุฑุฏู ุฎูุฏ ุชุงุจุน** ุงุณุชูุงุฏู ูโุดูุฏ ุชุง ุขุฏุฑุณ (reference) ุชุงุจุน ุจู ุฑูุฏุฑูุง ุซุงุจุช ุจูุงูุฏ ูฺฏุฑ ุงูฺฉู ูุงุจุณุชฺฏโูุง ุชุบุฑ ฺฉููุฏ.

ุนู:

- ุงฺฏุฑ ููุฏุงุฑ ููุง ฺฉ ูุญุงุณุจู (ูุซู ฺฉ ูุณุช ููุชุฑุดุฏู ุง ฺฉ ุขุจุฌฺฉุช ุฌุฏุฏ) ููู ุงุณุช โ **`useMemo`**
- ุงฺฏุฑ ฺฉ ุชุงุจุน ุฑุง ุจู ุนููุงู prop ุจู ฺฉุงููพูููุช ูุฑุฒูุฏ ูโูุฑุณุช ู ููโุฎูุงู ูุฑ ุจุงุฑ ุฑูุฏุฑ ุชุบุฑ ฺฉูุฏ โ **`useCallback`**
