ูุณุฎู ุจููู ู ฺฉูุชุงูโุชุฑ ฺฉุฏุช ูโุชููู ุงู ุดฺฉู ุจุงุดู:

```jsx
import { useState } from "react";

export default function A1() {
  const [num, setNum] = useState(0);

  const handleClick = (action, value = 0) => {
    setNum((prev) => {
      switch (action) {
        case "+":
          return prev + value;
        case "-":
          return prev - value;
        case "reset":
          return 0;
        default:
          return prev;
      }
    });
  };

  const buttons = [
    { action: "-", value: 1, label: "-1" },
    { action: "+", value: 1, label: "+1" },
    { action: "reset", label: "reset" },
    { action: "-", value: 10, label: "-10" },
    { action: "+", value: 10, label: "+10" },
  ];

  return (
    <div>
      <h2>{num}</h2>
      {buttons.map((btn, i) => (
        <button key={i} onClick={() => handleClick(btn.action, btn.value)}>
          {btn.label}
        </button>
      ))}
      <hr className="hr1" />
    </div>
  );
}
```

### ุชุบุฑุงุช ููู:

1. **ุญุฐู `break` ุงุถุงูู**
2. **ุงุณุชูุงุฏู ุงุฒ `prev` ุฏุงุฎู `setNum`** โ ุขูพุฏุช ุงููโุชุฑ state
3. **ุงุฌุงุฏ ุขุฑุงู `buttons`** โ ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ฺฉุฏ ู ุฑุงุญุชโุชุฑ ุงุถุงูู ฺฉุฑุฏู ุฏฺฉููโูุง ุฌุฏุฏ
4. **ูุฑุงุฑ ุฏุงุฏู ููุฏุงุฑ ูพุดโูุฑุถ ุจุฑุง `value`** โ ุจุฑุง ุฏฺฉูู reset ูุงุฒ ุจู ุงุฑุณุงู value ูุณุช

## ุจู ุงู ุดฺฉู ฺฉุฏ ูู ุชูุฒุชุฑูุ ูู ุงฺฏู ุจุนุฏุงู ุจุฎูุง ุฏฺฉููโูุง ุฌุฏุฏ ุงุถุงูู ฺฉู ููุท ฺฉุงูู ุชู ุขุฑุงู `buttons` ู ุดุก ุฌุฏุฏ ุจุฐุงุฑ.

---

---

ุจุงุดูุ ุงุฒ ูพุงู ู ูุฏูโุจูโูุฏู ูุฑู ุณุฑุงุบ **Controlled ู Uncontrolled Components** ุฏุฑ React.
ูโุฎูุงู ุฌูุฑ ุจฺฏู ฺฉู ุงูู ูููููุด ุฑู ุจฺฏุฑุ ุจุนุฏ ูุซุงู ุนูู ุฑู ุจุจู.

---

## 1๏ธโฃ ููุฏูู โ ุฏุงุฏูโูุง ุฏุฑ React ฺุทูุฑ ูุฏุฑุช ูุดูุ

ุฏุฑ React ููุช ูโุฎูุง ฺฉุงุฑุจุฑ ุฏุงุฏู ูุงุฑุฏ ฺฉูู (ูุซู **input**ุ **textarea**ุ **select**)ุ ุฏู ุฑูุด ฺฉู ุจุฑุง ูุฏุฑุช ุงู ุฏุงุฏู ูุฌูุฏ ุฏุงุฑู:

- **Controlled Component** โ ฺฉูุชุฑู ุฏุงุฏู ุจู ุฏุณุช React
- **Uncontrolled Component** โ ฺฉูุชุฑู ุฏุงุฏู ุจู ุฏุณุช ุฎูุฏ DOM (ู ุงุณุชูุงุฏู ุงุฒ ref ุจุฑุง ฺฏุฑูุชู ููุฏุงุฑ)

---

## 2๏ธโฃ Controlled Component ฺุณุชุ

ุฏุฑ ุงู ุฑูุดุ **React ุตุงุญุจ ุงุตู ุฏุงุฏู ุงุณุช**.
ุนู ููุฏุงุฑ ูุฑูุฏ (`value`) ุจู state ูุตู ูุดู ู **ูุฑ ุชุบุฑ** ุจุง `setState` ุง `useState` ุงูุฌุงู ูุดู.

๐ ูฺฺฏโูุง:

- `value` ูุณุชููุงู ุงุฒ state ูุงุฏ
- ุชุบุฑุงุช ุจุง `onChange` ฺฉูุชุฑู ูุดู
- ฺฉ ููุจุน ูุงุญุฏ ุฏุงุฏู ุฏุงุฑู (**Single Source of Truth** โ state)

๐น ูุซุงู:

```jsx
import { useState } from "react";

export default function ControlledExample() {
  const [name, setName] = useState("");

  return (
    <div>
      <input
        type="text"
        value={name} // ููุฏุงุฑ ููุดู ุงุฒ state ูุงุฏ
        onChange={(e) => setName(e.target.value)} // ูุฑ ุชุบุฑุ state ุฑู ุขูพุฏุช ูโฺฉูู
      />
      <p>ูุงู ุดูุง: {name}</p>
    </div>
  );
}
```

โ ูุฒุช: ููุดู ููุฏุงุฑ ุฏุฑ state ุฐุฎุฑู ุดุฏูุ ูุฏุฑุช ุณุงุฏูโุชุฑุ validation ุฑุงุญุช.
โ๏ธ ุนุจ: ูุฑ ุชุบุฑ ุจุงุนุซ re-render ูุดู (ูุดฺฉู ููุช ุฒุงุฏ ูุดู ฺฉู ุฏุงุฏู ุฎู ุฒุงุฏ ุจุงุดู).

---

## 3๏ธโฃ Uncontrolled Component ฺุณุชุ

ุฏุฑ ุงู ุฑูุดุ **DOM ุฎูุฏุด ุฏุงุฏู ุฑุง ูุฏุฑุช ูโฺฉูุฏ** ู React ููุท ฺฏุงู ููุฏุงุฑ ุฑุง ูโฺฏุฑุฏ.
ูุง ุงุฒ **`ref`** ุงุณุชูุงุฏู ูโฺฉูู ุชุง ููุฏุงุฑ ูุฑูุฏ ุฑุง ูุณุชููุงู ุงุฒ DOM ุจฺฏุฑู.

๐ ูฺฺฏโูุง:

- `value` ุฏุงุฎู DOM ุฐุฎุฑู ูุดู (ูู ุฏุงุฎู state)
- ุจุฑุง ฺฏุฑูุชู ููุฏุงุฑ ุจุงุฏ ุงุฒ `ref` ุงุณุชูุงุฏู ฺฉูู
- ููุงุณุจ ููุช ฺฉู ูุงุฒ ุจู ูุงูุชูุฑ ฺฉุฑุฏู ูุญุธูโุง ุชุบุฑุงุช ูุณุช

๐น ูุซุงู:

```jsx
import { useRef } from "react";

export default function UncontrolledExample() {
  const inputRef = useRef();

  const handleSubmit = () => {
    alert("ูุงู ุดูุง: " + inputRef.current.value);
  };

  return (
    <div>
      <input type="text" ref={inputRef} /> {/* ูฺ value ู onChange ูุฏุงุฑู */}
      <button onClick={handleSubmit}>ููุงุด ูุงู</button>
    </div>
  );
}
```

โ ูุฒุช: ฺฉูุชุฑ re-render ูุดูุ ููุงุณุจ ุจุฑุง ูุฑูโูุง ุจุฒุฑฺฏ.
โ๏ธ ุนุจ: ุฏุงุฏู ูุญุธูโุง ุฏุฑ React ูุณุชุ ุณุฎุชโุชุฑ ุจุฑุง validation ุง ุชุบุฑ ุขู.

---

## 4๏ธโฃ ุชูุงูุช ุงุตู Controlled vs Uncontrolled

| ูฺฺฏ            | Controlled Component | Uncontrolled Component |
| ---------------- | -------------------- | ---------------------- |
| ุฐุฎุฑูโุณุงุฒ ุฏุงุฏู  | ุฏุฑ state React       | ุฏุฑ DOM                 |
| ฺฏุฑูุชู ููุฏุงุฑ      | ุงุฒ state             | ุงุฒ `ref`               |
| ุชุบุฑ ูุญุธูโุง UI | ุขุณุงู ู ูุณุชูู        | ุณุฎุชโุชุฑ                 |
| ูุฏุฑุช ูุฑู ุจุฒุฑฺฏ  | ููฺฉู ูู ุณูฺฏูโุชุฑ    | ุณุฑุนโุชุฑ ู ุณุจฺฉโุชุฑ       |

---

## 5๏ธโฃ ฺู ุฒูุงู ฺฉุฏุงู ุฑุง ุงูุชุฎุงุจ ฺฉููุ

- ุงฺฏุฑ ูุงุฒ ุฏุงุฑ **validation ุขู**ุ **ููุงุด ูุญุธูโุง** ุง **ฺฉูุชุฑู ฺฉุงูู** ุฑู ูุฑูุฏ ุฏุงุดุชู ุจุงุด โ Controlled ุจูุชุฑู.
- ุงฺฏุฑ ูุฑู ุฎู ุจุฒุฑฺฏู ู performance ูููู ู ูุงุฒ ุจู sync ูุญุธูโุง ูุฏุงุฑ โ Uncontrolled ุจูุชุฑู.

---

## 6๏ธโฃ ูุซุงู ููุงุณูโุง ฺฉูุชุงู

๐น Controlled:

```jsx
<input value={value} onChange={(e) => setValue(e.target.value)} />
```

๐น Uncontrolled:

```jsx
<input ref={inputRef} />
```

---

ุงฺฏู ุจุฎูุง ูโุชููู ููู ุงูุงู ุจุฑุงุช ฺฉ **ูุฑู ฺฉุงูู** ุฏุฑุณุช ฺฉูู ฺฉู ูุฑ ุฏู ุฑูุด ุฑู ฺฉูุงุฑ ูู ูุดูู ุจุฏู ุชุง ุชูุงูุชุดูู ุฑู ฺฉุงููุงู ุจุง ฺุดู ุจุจู.
ุงู ุฎู ฺฉูฺฉ ูโฺฉูู ุชู ุฐููุช ุฌุง ุจูุชู.

---

---

ุนุงู ๐
ุจุง ฺฉ ูุฑู ุจุณุงุฒู ฺฉู **ูู Controlled** ุจุงุดู ูู **Uncontrolled** ุชุง ุชูุงูุชุด ุฑู ูุงุถุญ ุจุจู.

---

## ๐ ฺฉุฏ ููุงุณู Controlled vs Uncontrolled

```jsx
import { useState, useRef } from "react";

export default function ControlledVsUncontrolled() {
  // ๐ Controlled
  const [nameControlled, setNameControlled] = useState("");

  // ๐ Uncontrolled
  const nameUncontrolledRef = useRef();

  const handleSubmit = (e) => {
    e.preventDefault();
    alert(`
    Controlled Name: ${nameControlled}
    Uncontrolled Name: ${nameUncontrolledRef.current.value}
    `);
  };

  return (
    <form onSubmit={handleSubmit}>
      <h2>Controlled Input</h2>
      <input
        type="text"
        value={nameControlled}
        onChange={(e) => setNameControlled(e.target.value)}
        placeholder="Controlled name"
      />
      <p>๐น ููุฏุงุฑ ุฏุฑ State ุฐุฎุฑู ุดุฏู: {nameControlled}</p>

      <h2>Uncontrolled Input</h2>
      <input
        type="text"
        ref={nameUncontrolledRef}
        placeholder="Uncontrolled name"
      />
      <p>๐น ููุฏุงุฑ ูุณุชูู ุงุฒ DOM ฺฏุฑูุชู ูุดู</p>

      <br />
      <button type="submit">Submit</button>
    </form>
  );
}
```

---

## ๐ ุชูุถุญ ุนููฺฉุฑุฏ ฺฉุฏ

1. **Controlled** โ ููุฏ ุงูู (`nameControlled`)

   - ูุฑ ุชุบุฑ ุจุง `setNameControlled` ุจู state ูุฑู
   - ููุฏุงุฑ ููุดู ุงุฒ state ูุงุฏ (`value={nameControlled}`)
   - ุชู UI ูุญุธูโุง ูุดูู ุฏุงุฏู ูุดู

2. **Uncontrolled** โ ููุฏ ุฏูู (`nameUncontrolledRef`)

   - React ููุท ฺฉ ref ุจู ุงู input ุฏุงุฑู
   - ููุฏุงุฑ ูุงูุน ุฏุงุฎู DOM ุฐุฎุฑู ุดุฏู
   - ููุช Submit ูุดูุ ุงุฒ `nameUncontrolledRef.current.value` ููุฏุงุฑ ุฑู ูโฺฏุฑู

---

๐ก ููุช ุงู ุฑู ุงุฌุฑุง ฺฉู ู ุชู ูุฑ ุฏู ููุฏ ุจููุณุ
ูโุจู ฺฉู **Controlled** ุจูุงูุงุตูู ููุฏุงุฑ ุฑู ุฒุฑ input ูุดูู ูุฏูุ ูู **Uncontrolled** ููุท ููุช Submit ุจุฒู ููุฏุงุฑุด ฺฏุฑูุชู ูุดู.

---

---

ุนุงู ๐
ุจุง ฺฉ ูุฑู ุจุณุงุฒู ฺฉู **ูู Controlled** ุจุงุดู ูู **Uncontrolled** ุชุง ุชูุงูุชุด ุฑู ูุงุถุญ ุจุจู.

---

## ๐ ฺฉุฏ ููุงุณู Controlled vs Uncontrolled

```jsx
import { useState, useRef } from "react";

export default function ControlledVsUncontrolled() {
  // ๐ Controlled
  const [nameControlled, setNameControlled] = useState("");

  // ๐ Uncontrolled
  const nameUncontrolledRef = useRef();

  const handleSubmit = (e) => {
    e.preventDefault();
    alert(`
    Controlled Name: ${nameControlled}
    Uncontrolled Name: ${nameUncontrolledRef.current.value}
    `);
  };

  return (
    <form onSubmit={handleSubmit}>
      <h2>Controlled Input</h2>
      <input
        type="text"
        value={nameControlled}
        onChange={(e) => setNameControlled(e.target.value)}
        placeholder="Controlled name"
      />
      <p>๐น ููุฏุงุฑ ุฏุฑ State ุฐุฎุฑู ุดุฏู: {nameControlled}</p>

      <h2>Uncontrolled Input</h2>
      <input
        type="text"
        ref={nameUncontrolledRef}
        placeholder="Uncontrolled name"
      />
      <p>๐น ููุฏุงุฑ ูุณุชูู ุงุฒ DOM ฺฏุฑูุชู ูุดู</p>

      <br />
      <button type="submit">Submit</button>
    </form>
  );
}
```

---

## ๐ ุชูุถุญ ุนููฺฉุฑุฏ ฺฉุฏ

1. **Controlled** โ ููุฏ ุงูู (`nameControlled`)

   - ูุฑ ุชุบุฑ ุจุง `setNameControlled` ุจู state ูุฑู
   - ููุฏุงุฑ ููุดู ุงุฒ state ูุงุฏ (`value={nameControlled}`)
   - ุชู UI ูุญุธูโุง ูุดูู ุฏุงุฏู ูุดู

2. **Uncontrolled** โ ููุฏ ุฏูู (`nameUncontrolledRef`)

   - React ููุท ฺฉ ref ุจู ุงู input ุฏุงุฑู
   - ููุฏุงุฑ ูุงูุน ุฏุงุฎู DOM ุฐุฎุฑู ุดุฏู
   - ููุช Submit ูุดูุ ุงุฒ `nameUncontrolledRef.current.value` ููุฏุงุฑ ุฑู ูโฺฏุฑู

---

๐ก ููุช ุงู ุฑู ุงุฌุฑุง ฺฉู ู ุชู ูุฑ ุฏู ููุฏ ุจููุณุ
ูโุจู ฺฉู **Controlled** ุจูุงูุงุตูู ููุฏุงุฑ ุฑู ุฒุฑ input ูุดูู ูุฏูุ ูู **Uncontrolled** ููุท ููุช Submit ุจุฒู ููุฏุงุฑุด ฺฏุฑูุชู ูุดู.

---

---

ุจุงุดูุ ุงู ูุณูุช ู ูฺฉุชู ููู ุฏุงุฑู ฺฉู ุฎู ุชู ูุฑูโูุง ุงุณุชูุงุฏู ูโุดู.

```js
[e.target.name]: e.target.value
```

ุงู **Bracket Notation** ุฏุฑ ุฌุงูุงุงุณฺฉุฑูพุช ูุณุช.

---

### ูุฏูโุจูโูุฏู

ูุฑุถ ฺฉู ุชู ุงู input ุฏุงุฑ ุชุงูพ ูโฺฉู:

```jsx
<input name="username" value={formValues.username} onChange={handleChange} />
```

ููุช ฺฉุงุฑุจุฑ ุชูุด ฺุฒ ูโููุณู:

- `e.target.name` = `"username"`
- `e.target.value` = ููุฏุงุฑ ฺฉู ุชุงูพ ฺฉุฑุฏูุ ูุซูุง `"mahdi"`

---

### ููุด ุจุฑุงฺฉุชโูุง `[ ]`

ููุช ูโุฎูุง ุงุณู **ฺฉูุฏ ฺฉ ุขุจุฌฺฉุช** ุฑู ุจู ุตูุฑุช **ุฏูุงูฺฉ** (ูพูุง) ูุดุฎุต ฺฉูุ ุจุงุฏ ุงุฒ ุจุฑุงฺฉุช ุงุณุชูุงุฏู ฺฉู.

ูุซูุง:

```js
let key = "username";
let obj = { [key]: "mahdi" };
console.log(obj); // { username: "mahdi" }
```

---

### ุฏุฑ ฺฉุฏุช

ุงูุฌุง:

```js
setFormValues((prev) => ({
  ...prev,
  [e.target.name]: e.target.value,
}));
```

- `...prev` ุนู ููุงุฏุฑ ูุจู ูุฑู ุฑู ูฺฏู ุฏุงุฑ (ุจุฑุง ุงูฺฉู ุจูู ููุฏูุง ูพุงฺฉ ูุดู).
- `[e.target.name]` ุนู ฺฉูุฏ ฺฉู ุงุณูุด ูููู name ุงู input ูุณุช ุฑู ูพุฏุง ฺฉู.
- `= e.target.value` ุนู ููุฏุงุฑ ุฌุฏุฏ ุงูู ฺฉูุฏ ุฑู ุจฺฏุฐุงุฑ ูููู ฺุฒ ฺฉู ฺฉุงุฑุจุฑ ุชุงูพ ฺฉุฑุฏู.

---

### ูุซุงู ูุงูุน ุงุฒ ุงุฌุฑุง ุงู ฺฉุฏ

ูุฑุถ ฺฉู ูุฑู ุงูุฌูุฑู:

```js
formValues = { username: "", password: "" };
```

ู ฺฉุงุฑุจุฑ ุชู input ุจุง name="password" ูโููุณู `"1234"`:

ุจุนุฏ ุงุฒ `handleChange`:

```js
setFormValues((prev) => ({
  ...prev, // { username: "", password: "" }
  ["password"]: "1234", // ุงูุฌุง name ููุฏ ุงุฒ input ฺฏุฑูุชู ูุดู
}));
// ูุชุฌู: { username: "", password: "1234" }
```

---

ุนู ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดู **ููู inputูุง ุจุง ฺฉ ุชุงุจุน ูุดุชุฑฺฉ ุขูพุฏุช ุจุดู** ฺูู `name` ุชุนู ูโฺฉูู ฺฉุฏูู ููุฏุงุฑ ุจุงุฏ ุชุบุฑ ฺฉูู.

---

---

ุชู ุฌุงูุงุงุณฺฉุฑูพุช ู ุชุงูพโุงุณฺฉุฑูพุช ุงู ุนูุงูุช ุณุคุงู ุฏุฑ
`nameRef.current?.value`
ุจูุด ูฺฏู **Optional chaining operator (`?.`)**.

ฺฉุงุฑุด ุงูู ฺฉู ูุจู ุงุฒ ุฏุณุชุฑุณ ุจู ฺฉ propertyุ ุจุฑุฑุณ ูโฺฉูู ฺฉู ููุฏุงุฑ ูุจู ุงุฒ ุงูู `null` ุง `undefined` ูุจุงุดู.

---

### ูุซุงู ุณุงุฏู

ูุฑุถ ฺฉู ุฏุงุฑู:

```js
let user = null;
console.log(user.name); // โ ุฎุทุง: ููโุชูุงู ุจู name ุงุฒ null ุฏุณุชุฑุณ ุฏุงุดุช
```

ุจุง optional chaining:

```js
let user = null;
console.log(user?.name); // โ undefined ุจุฑูโฺฏุฑุฏูููุ ุจุฏูู ุฎุทุง
```

---

### ุฏุฑ ููุฑุฏ `nameRef.current?.value`

ุฏุฑ ุงูุฌุง:

- `nameRef.current` ููฺฉูู **ูููุฒ ููุฏุงุฑ ูฺฏุฑูุชู ุจุงุดู** (ูุจู ุงุฒ ุงูฺฉู input ุชู DOM ุฑูุฏุฑ ุจุดู)
- ุงฺฏู ูุณุชูู ุจููุณ `nameRef.current.value` ู ููุฏุงุฑุด null ุจุงุดูุ ุจุฑูุงูู ุฎุทุง ูุฏู.
- ููุช `?.` ุจุฒุงุฑ:

  - ุงฺฏู `nameRef.current` ูุฌูุฏ ุฏุงุดุชู ุจุงุดู โ ูุฑู ุณุฑุงุบ `.value`
  - ุงฺฏู ูุฌูุฏ ูุฏุงุดุชู ุจุงุดู โ ูููู ุฌุง `undefined` ุจุฑูโฺฏุฑุฏููู ู ุงุฏุงูู ููโุฏู.

---

### ุจู ุฒุจุงู ุฎูุฏููู

ูฺฏู:

> ยซุงฺฏู `current` ุฎุงู ูุจูุฏุ ุจุฑู ุณุฑุงุบ `.value`ุ ูฺฏุฑูู ุจโุฎุงูุด ุดู ู undefined ุจุฏู.ยป

---

---

![Hook Flow](https://raw.githubusercontent.com/donavon/hook-flow/master/hook-flow.png)

---

โ ุฏุฑ ูุงู `main.js`ุ ฺฉุงููพูููุช `<React.StrictMode>` ุญุฐู ุดุฏ.  
ุงู ุนู ุงูพูฺฉุดู ุฏฺฏุฑ ุฏุฑ ุญุงูุช StrictMode ุงุฌุฑุง ููโุดูุฏ ู ุจุฑุฎ ูุดุฏุงุฑูุง ุง ุจุฑุฑุณโูุง ุงุถุงู ฺฉู React ุฏุฑ ุชูุณุนู ูุดุงู ูโุฏูุฏุ ูุนุงู ูุฎูุงููุฏ ุจูุฏ.

---

ุนุงูู ๐
ุจุฐุงุฑ ุณูโุชุง ุญุงูุช ุฑู ุงุฒ ุงูู ูุฑุชุจ ู ููุงุณูโุง ุชูุถุญ ุจุฏู. ุงู ฺฉ ุงุฒ ุงูู ูฺฉุงุช ููู **ูุงูโุณุงฺฉู useState** ูุณุช ฺฉู ุฎูโูุง ุงููุด ูุงุท ูโฺฉูู.

---

## ๐ข ุญุงูุช 1:

```jsx
const [count, setCount] = useState(getInitialCount());
```

- ุงูุฌุง ูพุฑุงูุชุฒ ฺฏุฐุงุดุช โ ุนู ุชุงุจุน **ุจูุงูุงุตูู** ุงุฌุฑุง ูุดู.
- ูพุณ ูุฑ ุจุงุฑ ฺฉู ฺฉุงููพูููุช render ุจุดูุ ุงูู `getInitialCount()` ุตุฏุง ุฒุฏู ูุดู ู ูุชุฌูโุด ุจู `useState` ุฏุงุฏู ูุดู.
- ุงูุง โ๏ธ ูฺฉุชู: ููุฏุงุฑ state ููุท ูููู ุฏูุนู ุงูู ุฐุฎุฑู ูุดูุ ุฏูุนูโูุง ุจุนุฏ ุฑโุงฺฉุช ููุฏุงุฑ state ูุจู ุฑู ูฺฏู ูุฏุงุฑู.
- ุจุง ุงู ูุฌูุฏ ฺูู ุขุฑฺฏููุงู ุจุงุฏ ุญุณุงุจ ุจุดูุ ุชุงุจุน ูุฑ ุจุงุฑ ุงุฌุฑุง ูุดู.

๐ ุฎุฑูุฌ console:

- ุจุงุฑ ุงูู:

  ```
  Init
  render
  ```

- ุจุนุฏ ุงุฒ ูุฑ ฺฉูฺฉ:

  ```
  Init
  render
  ```

---

## ๐ข ุญุงูุช 2:

```jsx
const [count, setCount] = useState(getInitialCount);
```

- ุงูุฌุง ูพุฑุงูุชุฒ ูุฏุงุฑ โ ุนู ุฏุงุฑ ุฎูุฏ **ุชุงุจุน** ุฑู ูุฏ ุจู `useState`.
- ุฑโุงฺฉุช ูฺฏู: ุงฺฏู ุขุฑฺฏููุงู ู ุชุงุจุน ุจูุฏุ ูู ููุท **ุจุงุฑ ุงูู (initial render)** ุงูู ุฑู ุงุฌุฑุง ูโฺฉูู.
- ุจุนุฏุด ุจุฑุง ุฑูุฏุฑูุง ุจุนุฏ ุฏฺฏู ุชุงุจุน ุฑู ุตุฏุง ููโุฒูู.

๐ ุฎุฑูุฌ console:

- ุจุงุฑ ุงูู:

  ```
  Init
  render
  ```

- ุจุนุฏ ุงุฒ ูุฑ ฺฉูฺฉ:

  ```
  render
  ```

---

## ๐ข ุญุงูุช 3:

```jsx
const [count, setCount] = useState(() => getInitialCount());
```

- ุงู ุญุงูุช ูููู **lazy initializer** ูุณุช.
- ูุฑู ุธุงูุฑุด ุจุง ุญุงูุช 2 ุงูู ฺฉู ุงูุฌุง ุชู arrow function ุฎูุฏุช ุตุฑุญุงู ุชุงุจุน ุฑู ุตุฏุง ูุฒู.
- ุฑโุงฺฉุช ุงู arrow function ุฑู ููุท **ุจุงุฑ ุงูู** ุงุฌุฑุง ูโฺฉูู.
- ุงุฒ ูุธุฑ ุฑูุชุงุฑุ ฺฉุงููุงู ูุนุงุฏู ุญุงูุช 2 ูุณุช.

๐ ุฎุฑูุฌ console:

- ุจุงุฑ ุงูู:

  ```
  Init
  render
  ```

- ุจุนุฏ ุงุฒ ูุฑ ฺฉูฺฉ:

  ```
  render
  ```

---

## ๐ ุฌุฏูู ููุงุณู

| ุญุงูุช | ฺฉุฏ                                  | ุงุฌุฑุง ุชุงุจุน init                    | ุฎุฑูุฌ console                                    |
| ---- | ----------------------------------- | ---------------------------------- | ------------------------------------------------ |
| 1    | `useState(getInitialCount())`       | ูุฑ ุจุงุฑ render                      | ุจุงุฑ ุงูู: `Init, render` <br> ุจุนุฏ: `Init, render` |
| 2    | `useState(getInitialCount)`         | ููุท ุจุงุฑ ุงูู (React ุฎูุฏุด ุตุฏุง ูุฒูู) | ุจุงุฑ ุงูู: `Init, render` <br> ุจุนุฏ: `render`       |
| 3    | `useState(() => getInitialCount())` | ููุท ุจุงุฑ ุงูู (lazy init)            | ุจุงุฑ ุงูู: `Init, render` <br> ุจุนุฏ: `render`       |

---

๐ ุฎูุงุตู:

- ุงฺฏู ููุฏุงุฑ ุงููู ุณุงุฏู ุจุงุดู (ูุซู `0` ุง `"hi"`)ุ ูุณุชูู ูโููุณ.
- ุงฺฏู ููุฏุงุฑ ุงููู ุจุง ูุญุงุณุจู ุง ูุงูฺฉุดู ุณูฺฏู ุจู ุฏุณุช ูุงุฏ (ูุซูุงู fetch ุง loop ุจุฒุฑฺฏ)ุ ุจุงุฏ ุญุงูุช 2 ุง 3 ุงุณุชูุงุฏู ฺฉู ุชุง ููุท ุจุงุฑ ุงูู ุงุฌุฑุง ุจุดู ู ูุฑุจุงุฑ render ุจุฎูุฏ ุฏูุจุงุฑู ูุญุงุณุจู ูุดู.

---

---

ุณุคุงู ุฎู ุฎูุจ ูพุฑุณุฏ ๐
ุญุงูุง ุฏฺฏู ุจุฐุงุฑ ุงุฒ ูฺฏุงู **React** (ูู ุงู ฺฉุฏ ุฎุงุต) ุชูุถุญ ุจุฏู ฺฉู ููุช ฺฉ ฺฉุงููพูููุช ุฏูุจุงุฑู ุฑูุฏุฑ ูุดู ฺู ูุฑุงุญู ุท ูุดู ู ฺุฑุง ุงูู ุณู ุญุงูุช ูุฎุชูู ูุฑู ุฏุงุฑู.

---

## ๐ ูุงูโุณุงฺฉู ูุงูฺฉุดู ฺฉุงููพูููุชโูุง ุฏุฑ React

1. **ฺฉุงููพูููุช ูุงูฺฉุดูู = ูููู ูุงูฺฉุดู ูุฑ ุจุงุฑ ุตุฏุง ุฒุฏู ูุดู**
   ููุช ุฑโุงฺฉุช ุชุตูู ูโฺฏุฑู ฺฉ ฺฉุงููพูููุช ุฑู ุฑูุฏุฑ ฺฉูู (ฺู ุจุงุฑ ุงููุ ฺู ุจุงุฑ ุฏููุ ...)ุ ุฎู ุณุงุฏู ูุงุฏ ุชุงุจุน ุงูู ฺฉุงููพูููุช ุฑู **ุงุฒ ุงูู** ุงุฌุฑุง ูโฺฉูู.

   ุนู:

   ```jsx
   function MyComp() {
     console.log("function body running...");
     return <div>Hi</div>;
   }
   ```

   ูุฑ ุจุงุฑ state ุง props ุชุบุฑ ฺฉูู โ ุฑโุงฺฉุช ุฏูุจุงุฑู `MyComp()` ุฑู ุตุฏุง ูุฒูู.

---

2. **useState ู ุณุงุฑ hookูุง "ุญุงูุธู" ุฏุงุฑู**
   ุงฺฏู ุฑโุงฺฉุช ูุฑ ุจุงุฑ ูููโฺุฒ ุฑู ุงุฒ ุตูุฑ ุงุฌุฑุง ฺฉููุ ูฺ stateุง ุจุงู ููโูููู.
   ุจุฑุง ููู React ุจุฑุง ูุฑ ฺฉุงููพูููุช ฺฉ **ุญุงูุธู ุฏุงุฎู (state bucket)** ูฺฏู ูุฏุงุฑู.

   ููุช ูฺฏ:

   ```jsx
   const [count, setCount] = useState(0);
   ```

   - ุจุงุฑ ุงูู: ููุฏุงุฑ `0` ุฏุงุฎู ุญุงูุธู ุฑโุงฺฉุช ุฐุฎุฑู ูุดู.
   - ุฏูุนูโูุง ุจุนุฏ: ุฑโุงฺฉุช ููุฏุงุฑ ุฐุฎุฑูโุดุฏู ุฑู ุจุฑูโฺฏุฑุฏูููุ ูู ุงูู `0` ุงููู.

   ๐ ุนู `useState` ููุท ุฏุฑ **mount (ุงููู ุจุงุฑ)** ููุฏุงุฑ ุงููู ุฑู ุงุณุชูุงุฏู ูฺฉููุ ุจุนุฏุด ูููู ููุฏุงุฑ ุฐุฎุฑู ุดุฏู ุจุฑูโฺฏุฑุฏู.

---

3. **ูพุณ ฺุฑุง ฺฏุงู ุชุงุจุน ุงููู ุฏูุจุงุฑู ุงุฌุฑุง ูุดูุ**
   ุงู ุจู ุดฺฉู ููุดุชู `useState` ุจุฑูโฺฏุฑุฏู:

   - ููุช ูโููุณ `useState(getInitialCount())` โ ุฑโุงฺฉุช ุจุงุฏ **ุงูู** ุงูู ูพุฑุงูุชุฒ ุฑู ุญุณุงุจ ฺฉูู ุชุง ุขุฑฺฏููุงู ุฑู ุจุฏุณุช ุจุงุฑู. ูพุณ ุชุงุจุน ูุฑ ุจุงุฑ ุงุฌุฑุง ูุดู (ูุจู ุงุฒ ุงูฺฉู React ุจู ุญุงูุธู ุฎูุฏุด ุจุฑุณููู).

   - ููุช ูโููุณ `useState(getInitialCount)` ุง `useState(() => getInitialCount())` โ ุงูุฌุง ุขุฑฺฏููุงู ฺฉ ุชุงุจุน ูุณุช. ุฑโุงฺฉุช ุงู ุฑู ูฺฏู ูโุฏุงุฑู ู ููุท ุฏุฑ **mount** ุตุฏุงุด ูุฒูู.

---

4. **ฺู ฺุฒ ุจุงุนุซ re-render ูุดูุ**

   - ุชุบุฑ state ุจุง `setState` (`setCount`, `setTodos`, ...)
   - ุชุบุฑ props ุงุฒ ูุงูุฏ
   - ุชุบุฑ context (ุงฺฏู ุงุฒ `useContext` ุงุณุชูุงุฏู ฺฉุฑุฏู ุจุงุด)
   - ุชุบุฑ forceUpdate (ุฎู ฺฉู ุงุณุชูุงุฏู)

   ๐ ุฏุฑ ููู ุงู ุญุงูุชโูุงุ ฺฉู ูุงูฺฉุดู ฺฉุงููพูููุช **ุงุฒ ุงูู** ุงุฌุฑุง ูุดู.

---

5. **ุงูุง React ุจุงููุดู:**

   - JSX ุฌุฏุฏ ุฑู ุจุง Virtual DOM ูุจู ููุงุณู ูโฺฉูู (diffing).
   - ููุท ุจุฎุดโูุง ุงุฒ DOM ูุงูุน (Real DOM) ุฑู ฺฉู ุชุบุฑ ฺฉุฑุฏูุ ุขูพุฏุช ูโฺฉูู.
   - ุงู ุนู ูุฑ ุจุงุฑ ูุงูฺฉุดู ุฏูุจุงุฑู ุตุฏุง ุฒุฏู ูุดูุ ูู **ููู DOM ุงุฒ ูู ุณุงุฎุชู ููุดู**.

---

## ๐ ููููู ฺฉู

- ูุฑ ุจุงุฑ ุฑูุฏุฑ = ูุงูฺฉุดู ฺฉุงููพูููุช ุฏูุจุงุฑู ุงุฌุฑุง ูุดู.
- ูู `useState` (ู ุณุงุฑ ููฺฉโูุง) ุญุงูุธูโุดูู ุฑู ูฺฏู ูโุฏุงุฑู ู ููุฏุงุฑ ูุจู ุฑู ุจุฑูโฺฏุฑุฏููู.
- ุงฺฏู ููุฏุงุฑ ุงููู `useState` ุฑู ุจู ุดฺฉู ฺฉ **ุชุงุจุน ุจูุงูุงุตูู ุงุฌุฑุงุดุฏู** ุจููุณุ ุงูู ุชุงุจุน ูุฑ ุจุงุฑ ูุจู ุงุฒ ุฐุฎุฑู ุฎูุงูุฏู ูุดู.
- ุงฺฏู ุจู ุดฺฉู **ุชุงุจุน lazy** ุจููุณุ ุฑโุงฺฉุช ููุท ุจุงุฑ ุงูู ุงูู ุฑู ุงุฌุฑุง ูฺฉูู.

---

### ู ุชุดุจู ๐

ฺฉุงููพูููุช ุฑู ูุซู ฺฉ **ูุงุดู ุญุณุงุจ** ุฏุฑ ูุธุฑ ุจฺฏุฑ:

- ูุฑ ุจุงุฑ ฺฉู ูฺฏ "ุญุณุงุจ ฺฉู"ุ ูุงุดู ุงุฒ ุงูู ุฏฺฉููโูุง ุฑู ูุดุงุฑ ูุฏู (ุชุงุจุน ฺฉุงููพูููุช ุงุฌุฑุง ูุดู).
- ูู `useState` ูุซู ฺฉ **ุญุงูุธู ุฏุงุฎู** ุชู ูุงุดู ุญุณุงุจู ฺฉู ุฌูุงุจโูุง ูุจู ุฑู ุฐุฎุฑู ูโฺฉูู.
- ุญุงูุง ุงฺฏู ูุฑูุฏ ุงููู ุฑู ุจุง ูพุฑุงูุชุฒ ุจุฏ (`getInitialCount()`)ุ ุงูฺฏุงุฑ ูุฑ ุจุงุฑ ูุจู ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุญุงูุธูุ ุฏูุจุงุฑู ุฏุงุฑ ูุญุงุณุจู ุงููู ุงูุฌุงู ูุฏ.
- ุงฺฏู ุฎูุฏ ุชุงุจุน ุฑู ุจุฏ (`getInitialCount`)ุ ุงูฺฏุงุฑ ูฺฏ "ุงู ูุฑููู ุฑู ููุท ุฏูุนู ุงูู ุญุณุงุจ ฺฉูุ ุจุนุฏุด ุฏฺฏู ุฌูุงุจ ูุจู ุฑู ุงุฒ ุญุงูุธู ุจุฏู."

---

---

```jsx
import { useState } from "react";

export default function A9() {
  const [users, setUsers] = useState([]);

  console.log(users);

  async function loadUsers() {
    try {
      const res = await fetch("https://dummyjson.com/users");
      if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
      const data = await res.json();
      setUsers([...data.users]);
    } catch (err) {
      console.error(err.message);
    }
  }
  loadUsers();

  return (
    <div>
      <h2>lifecycle</h2>
      <ul>
        {users.map(({ id, firstName, lastName }) => (
          <li key={id}>
            {firstName} {lastName}
          </li>
        ))}
      </ul>
      <hr className="hr1" />
    </div>
  );
}
```

ุฎูุจ ุญุงูุง ุชู ุงู ฺฉุฏ ูุงุฌุนู ุง ฺฉู ุฏุงุฑู ุงุชูุงู ููุชู ุฑู ฺฉุงูู ุชูุถุญ ุจุฏู , ูู ุฎูุฏ ูุงุฌุนู ู ูู ุฏูู ูพุดุช ูพุฑุฏุด ุฑู ฺฉุงูู

---

ฺฉุงููุงู ุฏุฑุณุช ูฺฏ ฺฉู ุงู ฺฉุฏ ยซูุงุฌุนูยป ุงุณุชุ ุจุงู ุฏูู ู ููููู ุงุฒ ููุธุฑ React ุจุงุฒุด ฺฉูู.

# ฺู ูุงุฌุนูโุง ุฑุฎ ูโุฏูุฏุ

1. **ุทููุงู ุฑูุฏุฑ ู ุฏุฑุฎูุงุณุช ุดุจฺฉู (request storm)**
   ุชู ุจุฏููโ ฺฉุงููพูููุชุ `loadUsers()` ุฑุง ูุณุชูู ุตุฏุง ุฒุฏูโุง. ูุฑ ุฑูุฏุฑ โ `loadUsers()` ุฏูุจุงุฑู ุงุฌุฑุง โ ฺฉ `fetch` ุฌุฏุฏ.
   ููุช ูพุงุณุฎ ุจุฑฺฏุฑุฏูุ `setUsers(...)` ุงุฌุฑุง ูุดู โ **ุฑูุฏุฑ ุฌุฏุฏ** โ ุฏูุจุงุฑู `loadUsers()` โ **ุจุงุฒ ูู fetch** โฆ ู ุงู ฺุฑุฎู ูููโุทูุฑ ุงุฏุงูู ูพุฏุง ูโฺฉูู. ูุชุฌูโุงุด: ุฏูโูุง/ุตุฏูุง ุฏุฑุฎูุงุณุช ุจููุฏู ุจู API.

2. **Race condition (ุญุงูุช ุณุจูุช ูพุงุณุฎโูุง)**
   ฺูู ูุฑ ุฑูุฏุฑ ฺฉ ุฏุฑุฎูุงุณุช ุชุงุฒู ูโูุฑุณุชูุ ููฺฉูู ูพุงุณุฎู ุฏุฑุฎูุงุณุช ุฌุฏุฏ **ูุจู** ุงุฒ ูพุงุณุฎู ูุจู ุจุฑุณู ุง ุจุฑุนฺฉุณ. ุฏุฑ ุงู ุญุงูุช UI ููฺฉูู ุจุง **ุฏุงุฏูโ ูุฏูโุชุฑ** ุจูโุฑูุฒุฑุณุงู ุจุดู (last write wins ูู ูุฒููุงู ุขุฎุฑู ุฏุงุฏู ยซุฌุฏุฏุชุฑูยป ูุณุช).

3. **ูุตุฑู ููุงุจุน + ุชุฌุฑุจูโ ฺฉุงุฑุจุฑ ุจุฏ**
   CPUุ ุดุจฺฉูุ ุจุงุชุฑ ู ุณูููโ API ูุฏุฑ ูุฑูุ ุงุญุชูุงู rate-limit ู ุงุฑูุฑูุง ุนุฌุจ ุจุงูุง ูุฑู.

4. **Strict Mode ุจุฏุชุฑุด ูโฺฉูุฏ (Dev)**
   ุฏุฑ React 18ุ ุชู ุญุงูุช ุชูุณุนู ุจุง `<React.StrictMode>`ุ ุจุนุถ ฺุฒูุง (ุงุฒ ุฌููู mount ุงููู) **ุนูุฏุงู ุฏู ุจุงุฑ** ุงุฌุฑุง ูโุดู ุชุง ุณุงุฏุงูฺฉุชโูุง ูุงุงูู ูู ุจุฑู. ุนู ุญุช ุงฺฏุฑ ูฺฉุฑ ฺฉู ยซฺฉโุจุงุฑยป ุตุฏุง ูโุฒููุ ุฏุฑ Dev ุนููุงู **ุฏู ุจุงุฑ** ุตุฏุง ูโุฎูุฑูุ ูพุณ ุฏุฑุฎูุงุณุชโูุง ุฏู ุจุฑุงุจุฑ ูู ูโุดู.

---

# ฺุฑุง ุงู ุงุชูุงู ูโุงูุชุฏุ (ููุทู ูพุดุช ูพุฑุฏูโ React)

- **ุฑูุฏุฑ ุจุงุฏ ยซุฎุงูุตยป (pure) ุจุงุดุฏ.**
  ูุงูฺฉุดู ฺฉุงููพูููุช ูุฑ ุจุงุฑ ฺฉู props/state/context ุนูุถ ูุดูุ **ุงุฒ ุงูู** ุงุฌุฑุง ูุดู. ุจุฏููโ ฺฉุงููพูููุช ูุจุงุฏ ุณุงุฏุงูฺฉุช ุฏุงุดุชู ุจุงุดู (ูุซู fetchุ ุชุงูุฑุ ุฏุณุชโฺฉุงุฑ DOMโฆ).
- **ุณุงุฏุงูฺฉุชโูุง ุจุงุฏ ุจุนุฏ ุงุฒ commit ุงูุฌุงู ุดููุฏ.**
  React ุฏู ูุงุฒ ุฏุงุฑุฏ:

  - _Render phase_: ููุท ูุญุงุณุจูโ JSXุ ุจุงุฏ ูุงุจู ุชฺฉุฑุงุฑ ู ุจุฏูู ุงุซุฑ ุฌุงูุจ ุจุงุดุฏ.
  - _Commit phase_: ุงุนูุงู ุชุบุฑุงุช ุฑู DOMุ **ุงูุฌุง**ุณุช ฺฉู `useEffect` ุงุฌุฑุง ูโุดูุฏ ู ุฌุง ุฏุฑุณุชู ฺฉุงุฑูุง ุฌุงูุจ ุงุณุช.

- ููุช `loadUsers()` ุฑุง **ุฏุฑ render phase** ุตุฏุง ูโุฒูุ ุนููุงู ูุงููู ยซุจุฏูู ุณุงุฏุงูฺฉุชยป ุฑุง ูโุดฺฉู. ุจุนุฏ ูู `setUsers` ฺฉู ูโุขุฏุ re-render ูโุณุงุฒ ู ุญููู ุชุดฺฉู ูุดู.

---

# ุงุตูุงุญ ุฏุฑุณุช (ุงูฺฏู ุงุณุชุงูุฏุงุฑุฏ)

ุณุงุฏุงูฺฉุชู fetch ุฑุง ุจู `useEffect` ููุชูู ฺฉู ุชุง **ุจุนุฏ ุงุฒ commit** ู ุจุง **ฺฉูุชุฑู ุฏูุนุงุช ุงุฌุฑุง** ุงูุฌุงู ุดูุฏ.

```jsx
import { useEffect, useRef, useState } from "react";

export default function A9() {
  const [users, setUsers] = useState([]);

  useEffect(() => {
    const controller = new AbortController();

    async function loadUsers() {
      try {
        const res = await fetch("https://dummyjson.com/users", {
          signal: controller.signal,
        });
        if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
        const data = await res.json();
        setUsers(data.users); // ูุงุฒ ุจู ุงุณูพุฑุฏ ูุณุช
      } catch (err) {
        // ุงฺฏุฑ ุงุซุฑ ูุบู ุดุฏุ ุงุฑูุฑ AbortError ุฑุง ูุงุฏุฏู ุจฺฏุฑ
        if (err.name !== "AbortError") console.error(err.message);
      }
    }

    loadUsers();
    // cleanup: ุงฺฏุฑ ฺฉุงููพูููุช ูุจู ุงุฒ ุงุชูุงู fetch unmount ุดุฏ ุง effect ุฏูุจุงุฑู ุงุฌุฑุง ุดุฏุ ุฏุฑุฎูุงุณุช ุฑุง ูุบู ฺฉู
    return () => controller.abort();
  }, []); // [] ุนู ููุท ุฑู mount ุงุฌุฑุง ุดูุฏ
}
```

## ูฺฉุงุช ุชฺฉูู

- **ฺุฑุง AbortControllerุ**
  ุงฺฏุฑ ฺฉุงููพูููุช ูุจู ุงุฒ ุฑุณุฏู ูพุงุณุฎ unmount ุดูุฏุ ุจุง abort ุฌูู setState ุฑู ฺฉุงููพูููุชู ุงุฒ ุจู ุฑูุชู ุฑุง ูโฺฏุฑ ู ูุดุช ุญุงูุธู/ูุดุฏุงุฑูุง ุฑุง ฺฉุงูุด ูโุฏู.
- **StrictMode ุฏุฑ Dev**
  ุญุช ุจุง `[]`ุ ุฏุฑ ุชูุณุนู ููฺฉู ุงุณุช ุงุซุฑู mount **ุฏู ุจุงุฑ** ุงุฌุฑุง ุดูุฏ. ุงู ุฑูุชุงุฑ ุฏุฑ Production ูุฌูุฏ ูุฏุงุฑุฏ. ุงฺฏุฑ ูุงูุนุงู ูุงุฒู ุดุฏ ุฏุฑ Dev ููุท ฺฉโุจุงุฑ fetch ุดูุฏุ ูโุชูุงู ุงุฒ ฺฉ ููฺฏ ref ุงุณุชูุงุฏู ฺฉู:

  ```jsx
  const didFetch = useRef(false);
  useEffect(() => {
    if (didFetch.current) return;
    didFetch.current = true;
    // ... fetch
  }, []);
  ```

  ูู ูุนูููุงู ุชุญููู ุฏูุจุงุฑ fetch ุฏุฑ Dev ูุงุจู ูุจููโุชุฑ ุงุฒ ุงูุฒูุฏู ููุทู ุงุถุงู ุงุณุช.

---

# ุฌูุนโุจูุฏู ููููู

- ุจุฏููโ ฺฉุงููพูููุช ุจุงุฏ **ุฎุงูุต** ุจุงุดุฏุ ูฺ ุณุงุฏุงูฺฉุช (fetch/ุชุงูุฑ/โฆ) ุฏุฑ ุขู.
- ูุฑ ุจุงุฑ ุฑูุฏุฑ ุนู **ูุงูฺฉุดู ุฏูุจุงุฑู ุงุฌุฑุง ูโุดูุฏ**ุ ูพุณ ูุฑ ฺุฒ ุฏุฑ ุจุฏูู ุจฺฏุฐุงุฑ ููฺฉู ุงุณุช ุจุงุฑูุง ุงุฌุฑุง ุดูุฏ.
- ุณุงุฏุงูฺฉุชโูุง ุฑุง ููุดู ุฏุฑ `useEffect` (ุง `useLayoutEffect` ุฏุฑ ููุงุฑุฏ ุฎุงุต) ุงูุฌุงู ุจุฏู ุชุง **ูพุณ ุงุฒ commit** ู ุจุง **ฺฉูุชุฑู ุชุนุฏุงุฏ ุงุฌุฑุง** ุงูุฌุงู ุดููุฏ.
- ุจุง `AbortController` ู/ุง ุงูฺฏููุง ฺฉูุชุฑู ุงุฒ **race** ู **memory leak** ุฌููฺฏุฑ ฺฉู.

---

ุขูุง ฺฏุฑูุชู โ  
ุจุฐุงุฑ ูุณุฎูโ **ุฎู ุณุงุฏูโุชุฑ** ุฑู ุจุฑุงุช ุจููุณูุ ุจุฏูู ุงูู ุฏุงุณุชุงูโูุง ุงุถุงู ูุซู `AbortController`.

---

### ูุณุฎูโ ุณุงุฏู ููุท ุจุง `useEffect` ๐

```jsx
import { useState, useEffect } from "react";

export default function A9() {
  const [users, setUsers] = useState([]);

  console.log(users);

  useEffect(() => {
    async function loadUsers() {
      try {
        const res = await fetch("https://dummyjson.com/users");
        if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
        const data = await res.json();
        setUsers(data.users);
      } catch (err) {
        console.error(err.message);
      }
    }

    loadUsers();
  }, []); // [] ุนู ููุท ุจุงุฑ ุงูู (mount) ุงุฌุฑุง ุดูุฏ

  return (
    <div>
      <h2>lifecycle</h2>
      <ul>
        {users.map(({ id, firstName, lastName }) => (
          <li key={id}>
            {firstName} {lastName}
          </li>
        ))}
      </ul>
      <hr className="hr1" />
    </div>
  );
}
```

---

### ฺุฑุง ุงู ุฏุฑุณุช ฺฉุงุฑ ูโฺฉููุ

1. `useEffect(() => {...}, [])` ุนู:

   - ุงู ุชุงุจุน ููุท **ุจุนุฏ ุงุฒ ุงููู ุจุงุฑ ุฑูุฏุฑ ุดุฏู ฺฉุงููพูููุช** ุงุฌุฑุง ุจุดู.
   - ูพุณ ุฏฺฏู ูุซู ูุจูุ ูุฑ ุจุงุฑ ุฑูุฏุฑ ุฌุฏุฏ ุฏุฑุฎูุงุณุช fetch ููโูุฑุณุชู.

2. `loadUsers()` ุฏุงุฎู `useEffect` ุชุนุฑู ู ุตุฏุง ุฒุฏู ูุดู.

   - ุงูุทูุฑ `fetch` ููุท ฺฉ ุจุงุฑ ุงูุฌุงู ูุดู (ุฒูุงู ฺฉู ฺฉุงููพูููุช mount ูุดู).

3. ููุช ุฏุงุฏูโูุง ุฑุณุฏูุ `setUsers` ููุฏุงุฑ state ุฑู ุชุบุฑ ูุฏู โ ุฑโุงฺฉุช ุฏูุจุงุฑู ฺฉุงููพูููุช ุฑู ุฑูุฏุฑ ูโฺฉูู โ ูุณุช users ุฑู ุตูุญู ููุงุด ุฏุงุฏู ูุดู.

---

### ูุฑูุด ุจุง ฺฉุฏ ุงูููโ ุชู

- ุชู ฺฉุฏ ูุจู: `loadUsers()` ูุณุชูู ุชู ุจุฏููโ ฺฉุงููพูููุช ุจูุฏ โ ูุฑ ุฑูุฏุฑ ฺฉ fetch ุฌุฏุฏ โ ุญููู ุจโููุงุช.
- ุชู ุงู ฺฉุฏ: `loadUsers()` ููุท ฺฉ ุจุงุฑ ุชู `useEffect` ุงุฌุฑุง ูุดู โ ูฺ ุญูููโ ุจโููุงุช ูุฌูุฏ ูุฏุงุฑู.

---

---

ุฎู ุฎูุจ ฺฉู ูพุฑุณุฏ ๐
ุจุงู ูุฏู ุจู ูุฏู ุฎู ุณุงุฏู ู ููููู ุชูุถุญ ุจุฏู:

---

## ฑ. ุงูู ุจูููู "cleanup" ุนู ฺุ

ุฏุฑ React ููุช ุงุฒ `useEffect` ุงุณุชูุงุฏู ูโฺฉูุ ูโุชูู ฺฉ **ุชุงุจุน ุจุฑฺฏุดุช** (return function) ูู ุจุฏ. ุงู ุชุงุจุน ุจูุด ูฺฏู **cleanup function**.

ุนู:

```jsx
useEffect(() => {
  console.log("effect ุงุฌุฑุง ุดุฏ");

  return () => {
    console.log("cleanup ุงุฌุฑุง ุดุฏ");
  };
}, []);
```

- ููุช ฺฉุงููพูููุช **ุงุฒ ุจู ุจุฑู (unmount ุจุดู)** โ cleanup ุงุฌุฑุง ูุดู.
- ุง ููุช **ูุจู ุงุฒ ุงุฌุฑุง ุฏูุจุงุฑูโ effect** ุฑโุงฺฉุช ุจุงุฏ effect ูุจู ุฑู ูพุงฺฉ ฺฉูู โ cleanup ุงุฌุฑุง ูุดู.

---

## ฒ. ฺุฑุง ุฏุฑ fetch ุจู cleanup ูุงุฒ ุฏุงุฑูุ

ูุฑุถ ฺฉู:

- ฺฉุงููพูููุช `A9` ูุงุฏ ฺฉ fetch ูโุฒูู (ูุซูุงู ต ุซุงูู ุทูู ูโฺฉุดู).
- ุจุนุฏ ุงุฒ ฑ ุซุงููุ ฺฉุงุฑุจุฑ ูุฑู ุจู ุตูุญู ุฏฺฏู โ `A9` ุงุฒ ุจู ูุฑู (unmount).
- ูู ุฏุฑุฎูุงุณุช fetch ูููุฒ ุชู ุฑุงูู!
- ููุช ูพุงุณุฎ ุจุฑฺฏุฑุฏูุ `setUsers(...)` ุตุฏุง ุฒุฏู ูุดู. ูุดฺฉู ุงูุฌุงุณุช ฺฉู ุงู ฺฉุงููพูููุช ุฏฺฏู ูุฌูุฏ ูุฏุงุฑู!

๐ด ูุชุฌู: ุงุฑูุฑ ูโฺฏุฑ (`Warning: Can't perform a React state update on an unmounted component`).

---

## ณ. ุฑุงู ุญู โ cleanup ุจุง **AbortController**

ุงูุฌุงุณุช ฺฉู ูุงู ุงุฒ `AbortController` ุงุณุชูุงุฏู ูโฺฉูู:

- ฺฉ controller ูโุณุงุฒู.
- ุฏุฑุฎูุงุณุช fetch ุฑู ุจุง ุงูู controller ูโูุฑุณุชู.
- ุชู cleanupุ `controller.abort()` ุฑู ุตุฏุง ูโุฒูู ุชุง ุฏุฑุฎูุงุณุช ูููโฺฉุงุฑู **ูุบู ุจุดู**.

ูุซุงู:

```jsx
useEffect(() => {
  const controller = new AbortController();

  async function loadUsers() {
    try {
      const res = await fetch("https://dummyjson.com/users", {
        signal: controller.signal,
      });
      const data = await res.json();
      setUsers(data.users);
    } catch (err) {
      if (err.name !== "AbortError") {
        console.error(err.message);
      }
    }
  }

  loadUsers();

  // cleanup
  return () => controller.abort();
}, []);
```

---

## ด. ุฌูุนโุจูุฏ ุณุงุฏู

- **ุจุฏูู cleanup**: ุงฺฏู ฺฉุงููพูููุช ุณุฑุน unmount ุจุดูุ ููฺฉูู `setState` ุฑู ฺุฒ ฺฉู ุฏฺฏู ูุฌูุฏ ูุฏุงุฑู ุงุฌุฑุง ุจุดู โ ุฎุทุง ุง memory leak.
- **ุจุง cleanup**: ููุช ฺฉุงููพูููุช ูุงุจูุฏ ุดุฏุ ุฏุฑุฎูุงุณุช ุฑู ูู ูุบู ูโฺฉู โ ูฺ ุงุชูุงู ุจุฏ ูููุชู.

---

๐ ูโุฎูุง ูู ู ูุซุงู ุฎู ุณุงุฏู ุนูู ุจุฒูู (ุจุง `setTimeout`) ุชุง ูุดูู ุจุฏู ูุฑู **ุจุฏูู cleanup** ู **ุจุง cleanup** ฺ ูุดูุ

---ุนุงู ๐
ูโุฎูุงู ู ูุซุงู ุฎู ุณุงุฏู ุจุง `setTimeout` ุจุณุงุฒู ุชุง ุฑูุชุงุฑ **ุจุฏูู cleanup** ู **ุจุง cleanup** ุฑู ุจุจูุ ุจุฏูู ุงูฺฉู ุจู fetch ุง ุดุจฺฉู ฺฉุงุฑ ุฏุงุดุชู ุจุงุดู.

---

## ูุซุงู ุนูู ุจุฏูู cleanup

```jsx
import { useState, useEffect } from "react";

export default function TimerExample() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    // ุดุจู fetch ฺฉู ุทูู ูฺฉุดูุ ฺฉ ุชุงูุฑ 3 ุซุงููโุง ุฏุงุฑู
    setTimeout(() => {
      setCount(1); // state ุชุบุฑ ูโฺฉูู
      console.log("State updated!");
    }, 3000);
  }, []);

  return <div>Count: {count}</div>;
}
```

### ุฑูุชุงุฑ:

1. ฺฉุงููพูููุช mount ูุดู โ ุชุงูุฑ ุดุฑูุน ูุดู.
2. ุงฺฏุฑ ูุจู ุงุฒ ณ ุซุงูู ฺฉุงุฑุจุฑ ฺฉุงููพูููุช ุฑู ุงุฒ ุจู ุจุจุฑู (unmount) โ ุชุงูุฑ ูููุฒ ุงุฌุฑุง ูุดู.
3. ููุช ุชุงูุฑ ุงุฌุฑุง ูุดูุ `setCount` ุตุฏุง ุฒุฏู ูุดู โ **ุงุฑูุฑ** ูฺฏุฑ:

```
Warning: Can't perform a React state update on an unmounted component
```

---

## ูุซุงู ุนูู ุจุง cleanup

```jsx
import { useState, useEffect } from "react";

export default function TimerExample() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const timer = setTimeout(() => {
      setCount(1);
      console.log("State updated!");
    }, 3000);

    // cleanup function
    return () => {
      clearTimeout(timer);
      console.log("Cleanup: timer cleared");
    };
  }, []);

  return <div>Count: {count}</div>;
}
```

### ุฑูุชุงุฑ:

1. ฺฉุงููพูููุช mount ูุดู โ ุชุงูุฑ ุดุฑูุน ูุดู.
2. ุงฺฏุฑ ูุจู ุงุฒ ณ ุซุงูู ฺฉุงููพูููุช unmount ุจุดู โ cleanup ุงุฌุฑุง ูุดู โ ุชุงูุฑ ูุบู ูุดู (`clearTimeout`).
3. ุฏฺฏุฑ ูฺ ุงุฑูุฑ ุง ูุดุฏุงุฑ ุฏุฑุงูุช ููโฺฉููุ ฺูู state ุฑู ฺฉุงููพูููุช ฺฉู ูุฌูุฏ ูุฏุงุฑู ุชุบุฑ ููโฺฉูู.

---

### ๐ ูฺฉุชู ุงุตู:

- ูุฑ ฺุฒ ฺฉู **ุจุนุฏ ุงุฒ ูุฏุช ุง ุบุฑููุฒูุงู ุงุฌุฑุง ูุดู** (ูุซู fetchุ setTimeoutุ setInterval) โ **ููฺฉูู ุจุนุฏ ุงุฒ unmount ูู ุงุฌุฑุง ุจุดู**.
- ููุดู ุจุง **cleanup function** ุขู ุฑุง ูุบู ฺฉู ุชุง ุงุฒ ุฎุทุง ู ูุดุช ุญุงูุธู ุฌููฺฏุฑ ุจุดู.

---

---

ุขุฑูุ ุงูุงู `console.log(users)` **ุฏู ุจุงุฑ ุงุฌุฑุง ูุดู**. ุจุงู ุฏูู ู ููููู ุงุฒ ูพุดุช ูพุฑุฏูโ React ุชูุถุญุด ุจุฏู:

---

## ฑ๏ธโฃ ฺุฑุง ุฏูุจุงุฑ ุงุฌุฑุง ูุดูุ

### ูุฑุญูู ุงูู: ุงููู ุฑูุฏุฑ (mount)

1. ฺฉุงููพูููุช `A9` **ุงููู ุจุงุฑ** ุงุฌุฑุง ูุดู โ ุชุงุจุน ฺฉุงููพูููุช run ูุดู.
2. `useState([])` ููุฏุงุฑ ุงููู (`[]`) ุฑู ุจุฑูโฺฏุฑุฏููู โ `users = []`.
3. `console.log(users)` ุงุฌุฑุง ูุดู โ **ฺุงูพ `[]`**.
4. JSX ุณุงุฎุชู ูุดู ู DOM render ูุดู.
5. ุจุนุฏ React ูุฑู ู effect `useEffect(() => {...}, [])` ุฑู ุงุฌุฑุง ูฺฉูู โ `loadUsers()` ุตุฏุง ุฒุฏู ูุดู.
6. fetch ุดุฑูุน ูุดู ุงูุง ูููุฒ ูพุงุณุฎ ุจุฑูฺฏุดุชูุ state ุชุบุฑ ูฺฉุฑุฏูุ ูพุณ ุฑูุฏุฑ ุฌุฏุฏ ูุฏุงุฑู.

---

### ูุฑุญูู ุฏูู: ููุช fetch ุชููู ูุดู

1. ุจุนุฏ ุงุฒ ฺูุฏ ููโุซุงููุ ูพุงุณุฎ fetch ูุงุฏ โ `setUsers([...data.users])` ุงุฌุฑุง ูุดู.
2. **setState ุจุงุนุซ re-render ูุดู** โ ฺฉู ุชุงุจุน ฺฉุงููพูููุช ุฏูุจุงุฑู ุงุฌุฑุง ูุดู.
3. ุญุงูุง `users` ููุฏุงุฑ ุฌุฏุฏุด (`data.users`) ุงุณุช.
4. `console.log(users)` ุฏูุจุงุฑู ุงุฌุฑุง ูุดู โ ุงู ุจุงุฑ **ฺุงูพ array ูุงูุน ฺฉุงุฑุจุฑุงู**.
5. JSX ุฏูุจุงุฑู ุณุงุฎุชู ู DOM ุจุง ุฏุงุฏู ุฌุฏุฏ ุขูพุฏุช ูุดู.

---

## ฒ๏ธโฃ ูฺฉุงุช ูพุดุช ูพุฑุฏู

- **React ฺฉุงููพูููุช ูุงูฺฉุดูู = ูุฑ ุฑูุฏุฑ = ุงุฌุฑุง ฺฉู ุชุงุจุน**
  ูุฑ ุจุงุฑ state ุชุบุฑ ฺฉูู ุง props ุนูุถ ุจุดู โ React ุฏูุจุงุฑู ุชุงุจุน ฺฉุงููพูููุช ุฑู run ูฺฉูู.
- **useState ููุท ููุฏุงุฑ state ุฑู ูฺฏู ูโุฏุงุฑู**
  ููุช re-render ุฑุฎ ูุฏูุ ููุฏุงุฑ ุฌุฏุฏ `users` ุจุฑฺฏุฑุฏููุฏู ูุดูุ ูู ููุฏุงุฑ ุงููู `[]` ุฏฺฏู ุงุณุชูุงุฏู ููุดู.
- **useEffect ุจุง \[]**
  ุงู effect ููุท ุจุงุฑ ุงูู mount ุงุฌุฑุง ูุดูุ ูู ููุช `setUsers` state ุฑู ุชุบุฑ ูุฏู โ re-render ุฌุฏุฏ ุฑุฎ ูุฏู.
- ุจูุงุจุฑุงู `console.log(users)` ุฏุฑ **ูุฑ ุฑูุฏุฑ** ุงุฌุฑุง ูุดู โ ุฏู ุจุงุฑ ุฏุฑ Dev/Production.

---

### ณ๏ธโฃ ูุชุฌู

- **ุจุงุฑ ุงูู:** `console.log([])` โ state ุงููู
- **ุจุงุฑ ุฏูู:** `console.log([...users fetched])` โ state ุจุนุฏ ุงุฒ fetch

๐ก ูฺฉุชู: ุงู ุฑูุชุงุฑ ุทุจุน React ูุณุช ู ูุดูููโ ุฏุฑุณุช ฺฉุงุฑ ฺฉุฑุฏู state ู re-render ุงุณุช.

---

---

ุนุงูุ ุงู ฺฉุฏ ฺฉ **ูุซุงู ฺฉูุงุณฺฉ ุงุฒ dependent `useEffect`** ูุณุช. ุจุฐุงุฑ ููููู ุชูุถุญ ุจุฏู ฺู ุงุชูุงู ููุชู ู ูฺฉุงุช ูพุดุช ูพุฑุฏู ุฑู ุฑูุดู ฺฉูู.

---

## ฑ๏ธโฃ ุณุงุฎุชุงุฑ ฺฉู

- ุฏู state ุฏุงุฑู:

  ```js
  const [users, setUsers] = useState([]);
  const [count, setCount] = useState(5);
  ```

- `useEffect` ูุงุจุณุชู ุจู `[count]` ูุณุช:

  ```js
  useEffect(() => { ... }, [count]);
  ```

  ุนู **ูุฑ ุจุงุฑ ฺฉู `count` ุชุบุฑ ฺฉูู**ุ ุงู effect ุงุฌุฑุง ูุดู.

- ุฏุฑ effect ุฏุงุฑู `fetch` ฺฉู ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ุฑู ุจุฑ ุงุณุงุณ `count` ูุงุฑู ู ุฏุฑ state `users` ุฐุฎุฑู ูโฺฉูู.

- ุฏฺฉูู `Add Users` ุจุงุนุซ ูุดู `count` ูพูุฌ ูุงุญุฏ ุฒุงุฏ ุจุดู โ trigger ุดุฏู effect.

---

## ฒ๏ธโฃ ุฑูุชุงุฑ ูพุดุช ูพุฑุฏู React

### ูุฑุญูู ุงูู: mount

1. ฺฉุงููพูููุช mount ูุดู.
2. stateูุง ููุฏุงุฑ ุงูููโุดูู ุฏุงุฑู: `users = []` ู `count = 5`.
3. JSX ุณุงุฎุชู ูุดู ู DOM render ูุดู.
4. React ุจุนุฏ ุงุฒ commit phaseุ `useEffect` ุฑู ุงุฌุฑุง ูโฺฉูู โ `loadUsers()` ุตุฏุง ุฒุฏู ูุดู.
5. fetch ุงุฌุฑุง ูุดูุ ููุช ูพุงุณุฎ ุฑุณุฏ โ `setUsers([...data.users])` ุตุฏุง ุฒุฏู ูุดู โ **re-render** ุงุชูุงู ููุชู.
6. ุฏูุจุงุฑู JSX ุณุงุฎุชู ูุดูุ ุงู ุจุงุฑ ุจุง ูุณุช ฺฉุงุฑุจุฑุงู ูุงูุน.

---

### ูุฑุญูู ุฏูู: ูุฑ ุจุงุฑ count ุชุบุฑ ฺฉูู

1. ฺฉุงุฑุจุฑ ุฑู ุฏฺฉูู ฺฉูฺฉ ูโฺฉูู โ `setCount((c) => c + 5)` ุงุฌุฑุง ูุดู.
2. state `count` ุชุบุฑ ูโฺฉูู โ **re-render** ุงุชูุงู ููุชู.
3. ุชุงุจุน ฺฉุงููพูููุช ุฏูุจุงุฑู ุงุฌุฑุง ูุดูุ JSX ุจุง ููุฏุงุฑ ุฌุฏุฏ `count` ุณุงุฎุชู ูุดู.
4. ฺูู dependency array `[count]` ุชุบุฑ ฺฉุฑุฏูุ React effect ุฑู ุฏูุจุงุฑู ุงุฌุฑุง ูโฺฉูู โ `loadUsers()` ุฏูุจุงุฑู fetch ูโฺฉูู ู `users` ุขูพุฏุช ูุดู.
5. ููุช `setUsers` ุงุฌุฑุง ุดุฏ โ ุฏูุจุงุฑู re-render ุจุฑุง ุขูพุฏุช ูุณุช.

๐ก ูฺฉุชู: `users` ุชุบุฑ ฺฉุฑุฏู ูู effect ุฏูุจุงุฑู ุงุฌุฑุง ููุดู ฺูู `[count]` ุชุบุฑ ูฺฉุฑุฏู.

---

## ณ๏ธโฃ ุฌูุนโุจูุฏ ุฑูุชุงุฑ

| ุฑูุฏุงุฏ              | ฺู ุงุชูุงู ููุชู                                                                              |
| ------------------- | -------------------------------------------------------------------------------------------- |
| Mount ุงููู         | effect ุงุฌุฑุง ูุดูุ fetch ูุฑูุ `users` ุขูพุฏุช ูุดูุ re-render ุจุนุฏ                             |
| ฺฉูฺฉ ุฏฺฉูู           | `count` ุชุบุฑ โ re-render โ effect ุฏูุจุงุฑู ุงุฌุฑุง โ fetch ุฌุฏุฏ โ `users` ุขูพุฏุช โ re-render ุฌุฏุฏ |
| ุชุบุฑ state `users` | ููุท re-render ุงุชูุงู ููุชูุ effect ุฏูุจุงุฑู ุงุฌุฑุง ููุดู ฺูู `[count]` ุชุบุฑ ูฺฉุฑุฏู                |

---

### โ ูฺฉุชู ููููู

- `useEffect(..., [deps])` = ุงุฌุฑุง **ุณุงุฏุงูฺฉุช ูุงุจุณุชู ุจู state/props ูุดุฎุต**
- ุชุบุฑ state ฺฉู ุฏุฑ `[deps]` ูุณุช โ effect ุงุฌุฑุง ููโุดู
- ุชุบุฑ state ฺฉู ุฏุฑ `[deps]` ูุณุช โ effect ุฏูุจุงุฑู ุงุฌุฑุง ูุดู โ fetch ุง ูุฑ ุณุงุฏุงูฺฉุช ูุฌุฏุฏ

---

---

![Hook Flow](https://raw.githubusercontent.com/donavon/hook-flow/master/hook-flow.png)

#### ูููุทูุฑ ฺฉู ุงุฒ ุชุตูุฑ ูพุฏุงุณุช (ุจุฎุด ูุง ูุฑุจูุท ุจู Effects , ุฏู ูุงู ุขุฎุฑ):

- run ุงูฺฉุช (ุจุฏูู useEffect) ุตุฑูุง ุฏุฑ mount ฺฉุงููพูููุช ุงุชูุงู ูุงูุชุฏ
- ุฏุฑ update ุงูู cleanup ุงูฺฉุช (ุจุฎุด return ุฏุฑ useEffect) ู ุณูพุณ run ุงูฺฉุช ุงุชูุงู ูุงูุชุฏ
- ู ุฏุฑ ุขุฎุฑ ุฏุฑ unmount , ููุท cleanup ุงุชูุงู ูุงูุชุฏ

#### ูุซุงู :

```jsx
import { useEffect, useState } from "react";

export default function A11() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log("Render");

    return () => {
      console.log("Clean-Up");
    };
  }, [count]);

  return (
    <div>
      <h3>{count}</h3>
      <button onClick={() => setCount((c) => c + 1)}>+</button>
      <hr className="hr1" />
    </div>
  );
}
```

---

---

# ููุงุณูู ุณู ุญุงูุช useEffect ุจุฑุง ุณุฑฺ (debounce)

ูุฏู: ุจุฑุฑุณ ุฑูุชุงุฑ ุณู ุงูฺฏู ูุฎุชูู ุจุฑุง ูุงฺฉุด/ูุงฺฏ ููฺฏุงู ุชุบุฑ ููุฏุงุฑ `value` ุฏุฑ ฺฉ input.

---

## ๐น ุญุงูุช ุงูู โ ุงุฌุฑุง ููุฑ (ุจุฏูู ุชุฃุฎุฑ)

```jsx
useEffect(() => {
  console.log(`search for: ${value}`);
}, [value]);
```

- ูุฑ ุจุงุฑ ฺฉู `value` ุชุบุฑ ฺฉูุฏุ ุจูุงูุงุตูู ุจุนุฏ ุงุฒ ุฑูุฏุฑ ูุงฺฏ ุฒุฏู ูโุดูุฏ.
- ููุงุณุจ ููุช ูโุฎูุงู ุจูุงูุงุตูู ูุงฺฉูุด ูุดุงู ุฏู (ูู ุงฺฏุฑ ุจูโุฌุง ูุงฺฏุ ุฏุฑุฎูุงุณุช ุดุจฺฉู ุจุฒูุ ุจุงุนุซ ุงุฑุณุงู ุฏุฑุฎูุงุณุชโูุง ุฒุงุฏ ูโุดูุฏ).
- ูุฒุงุง: ุณุงุฏู ู ููุฑ. โ
- ูุนุงุจ: spam ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุงุฒ API. โ

---

## ๐น ุญุงูุช ุฏูู โ ุชุงูุฑ ุจุฏูู ูพุงฺฉุณุงุฒ

```jsx
useEffect(() => {
  setTimeout(() => {
    console.log(`search for: ${value}`);
  }, 2000);
}, [value]);
```

- ุจุฑุง ูุฑ ุชุบุฑ `value` ฺฉ ุชุงูุฑ ฒ ุซุงููโุง ุณุงุฎุชู ูโุดูุฏ.
- ูููู ุชุงูุฑูุง ูพุณ ุงุฒ ฒ ุซุงูู ุงุฌุฑุง ูโุดููุฏ ู ูุงฺฏโูุง ูุชุนุฏุฏ ุชููุฏ ูโุดูุฏ.
- ูุซุงู ูุดฺฉู: ฺฉุงุฑุจุฑ `a` โ `ab` โ `abc` ุชุงูพ ฺฉูุฏุ ุจุนุฏ ุงุฒ ฒ ุซุงูู ุงุฒ ูุฑ ุชุงูุฑ ูุงฺฏโูุง `a`, `ab`, `abc` ุธุงูุฑ ูโุดููุฏ.
- ูุฒุงุง: ุงุถุงูู ฺฉุฑุฏู ุชุฃุฎุฑ ุณุงุฏู. โ
- ูุนุงุจ: ุงุฌุฑุง ฺูุฏฺฏุงูู ู ุบุฑูุทููุจ (ุจุฏูู ูพุงฺฉุณุงุฒ). โ

---

## ๐น ุญุงูุช ุณูู โ debounce ุจุง ูพุงฺฉุณุงุฒ ุชุงูุฑ (ุงูฺฏู ูพุดููุงุฏ)

```jsx
useEffect(() => {
  const searchTimeout = setTimeout(() => {
    value.trim() && console.log(`search for: ${value}`);
  }, 2000);

  return () => {
    clearTimeout(searchTimeout);
  };
}, [value]);
```

- ูุฑ ุจุงุฑ `value` ุชุบุฑ ฺฉูุฏ ุชุงูุฑ ุฌุฏุฏ ุณุงุฎุชู ูโุดูุฏ ู ุชุงูุฑ ูุจู ุจุง `clearTimeout` ูุบู ูโฺฏุฑุฏุฏ.
- ููุท **ุขุฎุฑู** ููุฏุงุฑ (ุจุนุฏ ุงุฒ ฒ ุซุงูู ุณฺฉูุช ฺฉุงุฑุจุฑ) ูพุฑุฏุงุฒุด ูโุดูุฏ โ ููุงู debounce.
- ููุงุณุจ ุจุฑุง ุณุฑฺ ุฒูุฏูุ ุฌููฺฏุฑ ุงุฒ ุงุฑุณุงู ุฏุฑุฎูุงุณุชโูุง ุบุฑุถุฑูุฑ.
- ูุฒุงุง: ุจูููุ ุฌููฺฏุฑ ุงุฒ spamุ ุณุงุฏู ูพุงุฏูโุณุงุฒ. โ
- ูุนุงุจ: ุชุงุฎุฑ ฺฉูฺฺฉ UX (ูุงุจู ูุจูู)ุ ุฏุฑ ุตูุฑุช ูุงุฒ ุจู cancel request ุจุงุฏ ุงุฒ `AbortController` ุง ูุงุจูุช cancel ุฏุฑ Axios ุงุณุชูุงุฏู ุดูุฏ.

---

## ุฎูุงุตูู ููุงุณู

| ุญุงูุช               |                                      ุฑูุชุงุฑ | ูฺฉุชู                                  |
| ------------------ | -----------------------------------------: | ------------------------------------- |
| ุงุฌุฑุง ููุฑ         |                           ูุฑ ุชุบุฑ => ุงุฌุฑุง | ุณุงุฏู ูู ุจุงุนุซ ุฏุฑุฎูุงุณุชโูุง ุฒุงุฏ ูโุดูุฏ |
| ุชุงูุฑ ุจุฏูู ูพุงฺฉุณุงุฒ | ูุฑ ุชุบุฑ => ุชุงูุฑ ุฌุฏุฏ => ููู ุงุฌุฑุง ูโุดููุฏ | ุชููุฏ ูุงฺฏ/ุฏุฑุฎูุงุณุชโูุง ุงุถุงูู           |
| debounce (ูพุงฺฉุณุงุฒ) |       ููุท ุขุฎุฑู ุชุบุฑ ุจุนุฏ ุงุฒ ุชุฃุฎุฑ => ุงุฌุฑุง | ุจูููโุชุฑูุ ุงูฺฏู ูพุดููุงุฏ ุจุฑุง ุณุฑฺ   |

---

## ูฺฉุงุช ูพุดุฑูุชู (ุฏุฑุตูุฑุช ุงุณุชูุงุฏู ุงุฒ API ุจุฌุง console.log)

- ููฺฏุงู ูุฑุงุฎูุงู ุดุจฺฉู ุฏุงุฎู timeout ุงุฒ `AbortController` (fetch) ุง cancel token (axios) ุงุณุชูุงุฏู ฺฉู ุชุง ุฏุฑุฎูุงุณุช ูุจู ููฺฏุงู ูพุงฺฉุณุงุฒ ูุบู ุดูุฏ.
- ุฏุฑ React 18 ู `StrictMode`ุ effectูุง ููฺฉู ุงุณุช ุฏุฑ ุญุงูุช ุชูุณุนู ุฏู ุจุงุฑ mount/cleanup ุดููุฏ โ ุงูุง ุงูฺฏู clearTimeout ุงูู ุงุณุช.
- ุจุฑุง ูพุงุฏูโุณุงุฒ ุญุฑููโุงโุชุฑ ูโุชูุงู ุงุฒ `lodash.debounce` ุง ููฺฉโูุง ุขูุงุฏู (`use-debounce`) ุงุณุชูุงุฏู ฺฉุฑุฏ.

---

---

# ุฏุจุงููุณ (Debounce) ุจุฑุง ุณุฑฺ ุจุง `useEffect`

## ฺู state/props ุฏุงุฑูุ

- `value` ุจุง ููุฏุงุฑ ุงููู `""` (ุงููพูุช ฺฉูุชุฑูโุดุฏู)
- ูุฑ ุจุงุฑ ฺฉุงุฑุจุฑ ุชุงูพ ูโฺฉูุฏ โ `setValue` ุตุฏุง ุฒุฏู ูโุดูุฏ โ ุฑูุฏุฑ ูุฌุฏุฏ

---

## `useEffect` ฺู ูโฺฉูุฏุ

```jsx
useEffect(() => {
  const searchTimeout = setTimeout(() => {
    value.trim() && console.log(`search for: ${value}`);
  }, 2000);

  return () => {
    clearTimeout(searchTimeout);
  };
}, [value]);
```

- ูุฑ ุจุงุฑ ฺฉู `value` ุนูุถ ุดูุฏ (ูุฑ keystroke)ุ ุงู effect ุงุฌุฑุง ูโุดูุฏ.
- ุฏุงุฎูุด ฺฉ ุชุงูุฑ ฒ ุซุงููโุง ูโุณุงุฒุฏ. ุจุนุฏ ุงุฒ ฒ ุซุงูู ุงฺฏุฑ `value.trim()` ุฎุงู ูุจูุฏุ ูุงฺฏ ูโุฒูุฏ: `search for: ...`.
- ุชุงุจุน `return` ููุด **cleanโup** ุฏุงุฑุฏ: ูุจู ุงุฒ ุงุฌุฑุง effect ุจุนุฏ ุง ููฺฏุงู **unmount**ุ `clearTimeout` ูโุฒูุฏ ู ุชุงูุฑ ูุจู ุฑุง ุจุงุทู ูโฺฉูุฏ.

**ูุชุฌู:** ุชุง ููุช ฺฉุงุฑุจุฑ ูพุดุชโุณุฑูู ุชุงูพ ูโฺฉูุฏุ ูุฑ ุจุงุฑ ุชุงูุฑ ูุจู ฺฉูุณู ูโุดูุฏ ู ุชุงูุฑ ุฌุฏุฏ ูโุณุงุฒู. ููุท ฒ ุซุงูู ุจุนุฏ ุงุฒ ุขุฎุฑู ุชุงูพุ ูุงฺฏ ุฒุฏู ูโุดูุฏ. ุงู ููุงู **debounce** ุงุณุช (ุฌููฺฏุฑ ุงุฒ ุงุณูพู ุฏุฑุฎูุงุณุช/ูุงฺฏ).

---

## ุณูุงุฑู ุฒูุงู (Timeline)

- ฺฉุงุฑุจุฑ ยซsยป ูโุฒูุฏ โ ุชุงูุฑ A (ฒs) ุณุงุฎุชู ูโุดูุฏ.
- 300ms ุจุนุฏ ยซspยป ูโุฒูุฏ โ cleanโupุ ุชุงูุฑ A ฺฉูุณู ูโุดูุฏุ ุชุงูุฑ B ุณุงุฎุชู ูโุดูุฏ.
- ุงฺฏุฑ ฒ ุซุงูู ุฏฺฏุฑ ฺุฒ ุชุงูพ ูุดูุฏ โ ุชุงูุฑ B ุงุฌุฑุง ู `search for: sp` ฺุงูพ ูโุดูุฏ.

---

## ุฑูุชุงุฑ ุฏุฑ Mount/Unmount

- **Mount (ุงููู ุฑูุฏุฑ):** effect ุงุฌุฑุง ู ุชุงูุฑ ุจุฑุง `""` ุณุงุฎุชู ูโุดูุฏุ ูู ฺูู `value.trim()` ุฎุงู ุงุณุชุ ุญุช ุงฺฏุฑ ุงุฌุฑุง ุดูุฏ ูู ฺุฒ ูุงฺฏ ููโฺฉูุฏ. ุจูโูุญุถ ุชุงูพุ cleanโup ุชุงูุฑ ุงูู ุฑุง ฺฉูุณู ูโฺฉูุฏ.
- **Unmount:** ุงฺฏุฑ ุชุงูุฑ ูุนุงู ุจุงุดุฏุ ุฏุฑ cleanโup ฺฉูุณู ูโุดูุฏุ ูพุณ ูู ูุงฺฏ ุงุถุงููโุง ูโุขุฏ ู ูู memory leak.

---

## ฺุฑุง `trim`ุ

- ุงฺฏุฑ ฺฉุงุฑุจุฑ ููุท ูุงุตูู ูุงุฑุฏ ฺฉูุฏ (`" "`)ุ ุจุง `trim()` ุชุจุฏู ุจู `""` ูโุดูุฏ ู ูุงฺฏ ููโุฒูู (ุณุฑฺ ุจโูุนูุง).

---

## ูฺฉุงุช ุฑุฒ ฺฉู ุจุฏ ูุณุช ุจุฏุงู

- ุงู ุงูฺฏู ุงุฒ ูุธุฑ React ฺฉุงููุงู ุงุณุชุงูุฏุงุฑุฏ ุงุณุช (effect async ูุณุชุ ุฏุงุฎูุด ุงุฒ `async/await` ุง `setTimeout` ุงุณุชูุงุฏู ูโฺฉู ู ุจุง cleanโup ุฌูุน ูโฺฉู).
- ุฏุฑ React 18 (ุญุงูุช ุชูุณุนู ุจุง `StrictMode`) ููฺฉู ุงุณุช effectูุง ุจุฑุง ุชุดุฎุต sideโeffect ุฏูุจุงุฑ mount/cleanup ุดุจูโุณุงุฒ ุดููุฏุ ฺูู ุชู ูุฑ ููุจุช cleanโup ูโฺฉูุ ุฏู ุชุงูุฑ ูุนุงู ููุฒูุงู ููโูุงูุฏ ู ุฎุฑูุฌ ููุง ฺฉ ุงุณุช.
- ุงฺฏุฑ ุจูโุฌุง ูุงฺฏุ API call ูโุฒุฏุ ูููโุฌุง ุจุฒูุ ูู ุจูุชุฑ ุงุณุช:

  - ุฏุฑุฎูุงุณุช ูุจู ุฑุง ูุบู ฺฉู (`AbortController` ุฏุฑ fetch ุง `CancelToken` ุฏุฑ Axios) ุชุง **race condition** ูุดูุฏ.
  - ุงฺฏุฑ ููุงู `value` ูุจูุงู ุฌุณุชโูุฌู ุดุฏูุ ุฏูุจุงุฑู ุฏุฑุฎูุงุณุช ูุฒู (ุจุง ฺฉ `useRef` ุขุฎุฑู ููุฏุงุฑ ุฌุณุชโูุฌู ุฑุง ูฺฏู ุฏุงุฑ).

---

## ูุณุฎู ุขูุงุฏู ุจุฑุง ูุฑุงุฎูุงู API (ูููููโ ฺฉูุชุงู ุจุง `AbortController`)

```jsx
useEffect(() => {
  const controller = new AbortController();
  const id = setTimeout(async () => {
    const q = value.trim();
    if (!q) return;
    try {
      const res = await fetch(`/api/search?q=${encodeURIComponent(q)}`, {
        signal: controller.signal,
      });
      // handle res
    } catch (e) {
      if (e.name !== "AbortError") console.error(e);
    }
  }, 2000);

  return () => {
    clearTimeout(id);
    controller.abort(); // ูุบู ุฏุฑุฎูุงุณุช ุฏุฑ ุญุงู ูพุฑูุงุฒ
  };
}, [value]);
```

---

## ุฎูุงุตู

ฺฉุฏ ฺฉู ููุดุช ฺฉ **debounce** ุชูุฒ ุจุง **cleanโup** ุตุญุญ ุงุณุชุ ุฏููุงู ููุงู ฺฉุงุฑ ฺฉู ุจุงุฏ ุจุฑุง ุณุฑฺ ุฒูุฏู ุงูุฌุงู ุดูุฏ.

---

---

![Hook Flow](https://raw.githubusercontent.com/donavon/hook-flow/master/hook-flow.png)

```jsx
export default function A15() {
  document.querySelector("#username"); // โ ุงู ุฎุท ูุดฺฉู ุฏุงุฑุฏ

  return (
    <div>
      <h3>Focus Input</h3>
      <input type="text" id="username" placeholder="username" />
    </div>
  );
}
```

ููุช ุชุงุจุน ฺฉ ฺฉุงููพูููุช React (ูุซู `A15`) ุงุฌุฑุง ูโุดูุฏ:

1. **ุชุงุจุน ุฏุฑ ูุงุฒ render ุงุฌุฑุง ูโุดูุฏ.**

   - ุงู ุนู React ููุท **Virtual DOM** ุฑุง ูโุณุงุฒุฏ ู JSX ุฑุง ุจู ุฏุฑุฎุช React ุชุฑุฌูู ูโฺฉูุฏ.
   - ูููุฒ ุนูุงุตุฑ ูุงูุน ุฏุฑ **DOM ูุงูุน ูุฑูุฑฺฏุฑ** ุณุงุฎุชู ูุดุฏูโุงูุฏ.

2. **ุฏุณุชุฑุณ ูุณุชูู ุจู DOM ุฏุฑ ุงู ูุฑุญูู ุงูฺฉุงูโูพุฐุฑ ูุณุช.**

   - ุจู ููู ุฏูู `document.querySelector("#username")` ููุฏุงุฑ `null` ุจุฑูโฺฏุฑุฏุงูุฏ.

3. **ูพุณ ุงุฒ renderุ React ุนูุงุตุฑ ุฑุง ุจู DOM ูุงูุน ุงุถุงูู ูโฺฉูุฏ.**

   - ุจุนุฏ ุงุฒ ุงู ูุฑุญูู ุงุณุช ฺฉู ูโุชูุงู ุฑู ุนูุงุตุฑ ุฏุณุชุฑุณ ูพุฏุง ฺฉุฑุฏ ู ฺฉุงุฑ ูุซู ููฺฉูุณ ุฏุงุฏู ุงูุฌุงู ุฏุงุฏ.
   - ุจู ููู ุฏูู ุงุฒ `useEffect` ุงุณุชูุงุฏู ูโฺฉููุ ฺูู **useEffect ุจุนุฏ ุงุฒ render ูุงูุน ุงุฌุฑุง ูโุดูุฏ** ู DOM ููุฌูุฏ ุงุณุช.

ูพุณ ฺฉุฏ ฺฉู ฺฏุฐุงุดุช ุงุฒ ูุญุงุธ **React** ุฏุฑุณุช ฺฉุงุฑ ููโฺฉููุ ู ุฏููุด ูุฑุจูุท ุจู **ูุญูู ุฏุณุชุฑุณ ุจู ุนูุงุตุฑ DOM ุฏุฑ React** ุงุณุช. ุจุง ุฏูู ุจุฑุฑุณ ฺฉูู:

### ูุดฺฉูุงุช:

1. **ุฏุณุชุฑุณ ุจู DOM ูุจู ุงุฒ ุฑูุฏุฑ ุดุฏู**
   ููุช ุชุงุจุน `A15` ุงุฌุฑุง ูโุดูุฏุ ูููุฒ JSX ุฑูุฏุฑ ูุดุฏู ู `<input>` ุฏุฑ DOM ูุฌูุฏ ูุฏุงุฑุฏ. ูพุณ `document.querySelector("#username")` ููุฏุงุฑ `null` ุจุฑูโฺฏุฑุฏุงูุฏ ู ูฺ ฺฉุงุฑ ุงูุฌุงู ููโุฏูุฏ.

2. **ุงู ุฑูุด ุบุฑ React-ูุญูุฑ ุงุณุช**
   React ุจุฑุง ุฏุณุชุฑุณ ูุณุชูู ุจู ุนูุงุตุฑ DOMุ ุฑูุด ุฎูุฏุด ุฑุง ุฏุงุฑุฏ ุจู ูุงู **Refs**. ุงุณุชูุงุฏู ุงุฒ `document.querySelector` ุฏุฑ React ูุนูููุงู ุชูุตู ููโุดูุฏ ูฺฏุฑ ุฏุฑ ุดุฑุงุท ุฎุงุต.

---

```jsx
import { useEffect } from "react";

export default function A15() {
  useEffect(() => {
    document.querySelector("#username").focus();
  }, []);

  return (
    <div>
      <h3>Focus Input</h3>
      <input id="username" type="text" placeholder="username" />
    </div>
  );
}
```

ฺฉุฏ ฺฉู ูุฑุณุชุงุฏ **ฺฉุงุฑ ูโฺฉูุฏ**ุ ุงูุง ูููุฒ **ุบุฑ ุงุฏูโุขู ู ฺฉู โุบุฑ React-ูุญูุฑโ ุงุณุช**. ุจุง ุจุฑุฑุณ ฺฉูู:

```js
useEffect(() => {
  document.querySelector("#username").focus();
}, []);
```

### ูฺฉุงุช:

1. **ูุฒุช:**

   - ฺูู ุฏุงุฎู `useEffect` ูุณุชุ ุงู ฺฉุฏ ุจุนุฏ ุงุฒ render ูุงูุน ุงุฌุฑุง ูโุดูุฏ ู DOM ููุฌูุฏ ุงุณุชุ ูพุณ `focus()` ุฌูุงุจ ูโุฏูุฏ.

2. **ูุดฺฉู ุงุตู:**

   - ุงุณุชูุงุฏู ูุณุชูู ุงุฒ `document.querySelector` ุนู ูุงุจุณุชู ุดุฏ ุจู **ID ู DOM ูุงูุน**ุ ฺฉู React ุชูุตู ููโฺฉูุฏ.
   - ุงฺฏุฑ ุงู ฺฉุงููพูููุช ุฌุง ุฏุฑ ุตูุญู ุฏูุจุงุฑู render ุดูุฏ ุง ฺูุฏ input ูุดุงุจู ุฏุงุดุชู ุจุงุดุ ููฺฉู ุงุณุช ุฎุทุง ุจุฏูุฏ ุง ููฺฉูุณ ุงุดุชุจุงู ุจุฑูุฏ.

3. **ุฑูุด ุญุฑููโุง ู React-ูุญูุฑ:**
   ุจุง `useRef`ุ ูุณุชูู ุจู ุนูุตุฑ ุงุดุงุฑู ูโฺฉูู ุจุฏูู ุฌุณุชุฌู DOM:

```js
import { useEffect, useRef } from "react";

export default function A15() {
  const inputRef = useRef(null);

  useEffect(() => {
    inputRef.current.focus(); // ููฺฉูุณ ุงูู ู ูุณุชูู
  }, []);

  return (
    <div>
      <h3>Focus Input</h3>
      <input ref={inputRef} type="text" placeholder="username" />
    </div>
  );
}
```

โ ูุฒุงุง:

- ูุณุชูู ุงุฒ ID ู ุณุงุฎุชุงุฑ DOM
- ุงูู ุญุช ููุช ฺูุฏ instance ุงุฒ ฺฉุงููพูููุช ูุฌูุฏ ุฏุงุฑุฏ
- ฺฉุงููุงู ููุงููฺฏ ุจุง ููุณูู React

---

### ุฑูุด ุตุญุญ ุจุง `useRef` ู `useEffect`:

ุงฺฏุฑ ูุฏูุช ุงู ุงุณุช ฺฉู ุฑู ุงู input ููฺฉูุณ ุจุฏูุ ุจุงุฏ ฺุฒ ุดุจู ุงู ุจููุณ:

```js
import { useRef, useEffect } from "react";

export default function A15() {
  const inputRef = useRef(null);

  useEffect(() => {
    inputRef.current.focus(); // ููฺฉูุณ ุฏุงุฏู ุจุนุฏ ุงุฒ ุฑูุฏุฑ
  }, []);

  return (
    <div>
      <h3>Focus Input</h3>
      <input ref={inputRef} type="text" placeholder="username" />
    </div>
  );
}
```

โ ุชูุถุญ:

- `useRef` ฺฉ reference ุจู ุนูุตุฑ input ุงุฌุงุฏ ูโฺฉูุฏ.
- `useEffect` ุจุง ุขุฑุงู dependency ุฎุงู ุนู ุจุนุฏ ุงุฒ ุงููู ุฑูุฏุฑ ุงุฌุฑุง ูโุดูุฏ ู ุนูุตุฑ ููุฌูุฏ ุงุณุช.
- `inputRef.current.focus()` ููฺฉูุณ ุฑุง ุจู input ูโุฏูุฏ.

---

---

ููุ `useRef` ุจุง ูุชุบุฑูุง ูุญู ูุฑู ุฏุงุฑุฏ. ๐

### ุฑูุชุงุฑ `useRef`:

```js
const isFirstRender = useRef(true);
```

1. **ููุฏุงุฑ ุงููู (`true`) ููุท ฺฉ ุจุงุฑ ุฏุฑ mount ุงูู ุชุนู ูโุดูุฏ.**
2. `isFirstRender.current` ูโุชูุงูุฏ ุฏุฑ ุทูู ุนูุฑ ฺฉุงููพูููุช ุชุบุฑ ฺฉูุฏุ ูู **ุงู ุชุบุฑ ุจุงุนุซ rerender ููโุดูุฏ**.
3. ููู: ููุช ฺฉุงููพูููุช ุฏูุจุงุฑู render ูโุดูุฏุ **React ุฏูุจุงุฑู `useRef` ุฑุง ุงุฌุฑุง ููโฺฉูุฏ ุชุง ููุฏุงุฑ ุงููู ุฌุงฺฏุฒู ุดูุฏ**. ููุฏุงุฑ ูุนู (`current`) ุญูุธ ูโุดูุฏ.

### ููุงุณู ุจุง `let` ูุญู:

```js
let isFirstRender = true;
```

- ุงู ูุฑ ุจุงุฑ ฺฉู ุชุงุจุน ฺฉุงููพูููุช ุงุฌุฑุง ุดูุฏ (ูุฑ render)ุ ุฏูุจุงุฑู ููุฏุงุฑุฏู ูโุดูุฏ โ ููุดู `true` ุงุณุช.
- ุจู ููู ุฏูู ุจุฑุง tracking ุญุงูุช ุจู renderูุงุ `useRef` ููุงุณุจ ุงุณุช.

๐ก ุฎูุงุตู: `useRef` ุดุจู ฺฉ โุฌุนุจู ูพุงุฏุงุฑโ ุงุณุช ฺฉู ุจู renderูุง ุญูุธ ูโุดูุฏุ ุงูุง ููุฏุงุฑุฏู ุงููู ููุท **ฺฉ ุจุงุฑ** ุงุชูุงู ูโุงูุชุฏ.

---

---
