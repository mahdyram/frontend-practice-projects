## Memo (React.memo)

ูุฑุจุงุฑ ฺฉู ฺฉ ฺฉุงููพูููุช Rerender ูโุดูุฏุ ฺฉุงููพูููุช ูุง ฺฉู ุจู ุนููุงู Children ุงุณุชูุงุฏู ฺฉุฑุฏู ุงุณุช ูุฒ Rerender ูุดููุฏุ ุญุช ุงฺฏุฑ props ฺฉู ุจู ุขููุง ูุฑุณุชุงุฏู ุงุณุช ุชุบุฑ ูฺฉุฑุฏู ุจุงุดูุฏ.
ุญุงู ุจู ฺฉูฺฉ `Memo` ูุชูุงู ุฌูู ุงู ุงุชูุงู ุฑุง ฺฏุฑูุช.

---

ุนุงู ๐ุ ูพุณ ุจุงู ุงุฒ ุตูุฑ ุชุง ุตุฏ **`React.memo`** ุฑุง ุจุฑุฑุณ ฺฉูู. ูู ฺฉุงูู ู ูุฏูโุจูโูุฏู ุชูุถุญ ูโุฏููุ ููุฑุงู ุจุง ูุซุงูโูุง ุณุงุฏู ู ูฺฉุงุช ุญุฑููโุง.

---

## 1๏ธโฃ ููููู ุงุตู `React.memo`

`React.memo` ฺฉ **Higher-Order Component (HOC)** ุงุณุช ฺฉู ุจุฑุง **ุจูููโุณุงุฒ ุนููฺฉุฑุฏ ฺฉุงููพูููุชโูุง ุชุงุจุน (functional components)** ุงุณุชูุงุฏู ูโุดูุฏ.

### ูุฏู:

- ุฌููฺฏุฑ ุงุฒ **re-render ุบุฑุถุฑูุฑ** ฺฉุงููพูููุชโูุง ููุช props ุขููุง ุชุบุฑ ูฺฉุฑุฏูโุงูุฏ.
- ูุฎุตูุตุงู ููุฏ ููุช ฺฉุงููพูููุช **ุณูฺฏู** ุงุณุช ุง **ุฑูุฏุฑูุง ุฒุงุฏ** ุฏุฑ parent ุงุชูุงู ูโุงูุชุฏ.

---

## 2๏ธโฃ ูุญูู ฺฉุงุฑ

ููุช ฺฉ ฺฉุงููพูููุช ุจุง `React.memo` ูพฺุฏู ูโุดูุฏ:

```js
const MyComponent = React.memo(function MyComponent({ name }) {
  console.log("rendering MyComponent");
  return <div>{name}</div>;
});
```

- React ุจู ุตูุฑุช ุฏุงุฎู **props ุฑุง shallow compare** ูโฺฉูุฏ.
- ุงฺฏุฑ props ููุงู props ูุจู ุจุงุดูุฏ โ ฺฉุงููพูููุช **re-render ููโุดูุฏ**.
- ุงฺฏุฑ props ุชุบุฑ ฺฉูุฏ โ ฺฉุงููพูููุช **render ูโุดูุฏ**.

> โ๏ธ ุชูุฌู: `shallow compare` ุนู ููุท **ููุงุณู ูุฑุฌุน (reference) ุจุฑุง objectูุง ู arrayูุง**.
> ุงฺฏุฑ props ฺฉ object ุง array ุจุงุดุฏ ู ูุญุชูุง ุขู ุชุบุฑ ูฺฉุฑุฏู ุงูุง ูุฑุฌุน ุฌุฏุฏ ุณุงุฎุชู ุดุฏู ุจุงุดุฏ โ ฺฉุงููพูููุช ุจุงุฒ ูู render ูโุดูุฏ.

---

## 3๏ธโฃ ูุซุงู ุณุงุฏู

```js
import React, { useState } from "react";

const Child = React.memo(({ text }) => {
  console.log("Child rendered");
  return <div>{text}</div>;
});

export default function App() {
  const [count, setCount] = useState(0);
  const [text, setText] = useState("Hello");

  return (
    <div>
      <button onClick={() => setCount(count + 1)}>Increment Count</button>
      <button onClick={() => setText(text + "!")}>Change Text</button>
      <h3>Count: {count}</h3>
      <Child text={text} />
    </div>
  );
}
```

### ุฑูุชุงุฑ:

- ููุช ุฑู **Increment Count** ฺฉูฺฉ ูโฺฉู:

  - `App` re-render ูโุดูุฏ.
  - ฺูู `text` ุชุบุฑ ูฺฉุฑุฏูุ `Child` **render ููโุดูุฏ** โ "Child rendered" ุฏุฑ console ฺุงูพ ููโุดูุฏ.

- ููุช ุฑู **Change Text** ฺฉูฺฉ ูโฺฉู:

  - `text` ุชุบุฑ ฺฉุฑุฏู โ `Child` render ูโุดูุฏ.

โ ุงู ุฏููุงู ููุงู ฺุฒ ุงุณุช ฺฉู `React.memo` ุจุฑุง ุขู ุณุงุฎุชู ุดุฏู.

---

## 4๏ธโฃ ูฺฉุงุช ููู

1. **ููุท ุจุฑุง propsูุง ฺฉุงุฑ ูโฺฉูุฏ**:

   - ุงฺฏุฑ ฺฉุงููพูููุช ุจู state ุฏุงุฎู ุฎูุฏุด ูุงุจุณุชู ุจุงุดุฏุ `React.memo` ุขู state ุฑุง ุจููู ููโฺฉูุฏ.

2. **Shallow comparison**:

   - ุจุฑุง propsูุง primitive (string, number, boolean) ุนุงู ุงุณุช.
   - ุจุฑุง object ุง arrayุ ุงฺฏุฑ ูุฑุฌุน ุฌุฏุฏ ุจุงุดุฏ ุญุช ุจุฏูู ุชุบุฑ ูุญุชูุงุ re-render ุฑุฎ ูโุฏูุฏ.

3. **ูโุชูุงู ฺฉ ุชุงุจุน custom ุจุฑุง ููุงุณู ููุดุช**:

```js
const Child = React.memo(
  ({ items }) => {
    console.log("Child rendered");
    return <div>{items.length} items</div>;
  },
  (prevProps, nextProps) => {
    // ููุท ููุช ุทูู ุขุฑุงู ุชุบุฑ ฺฉุฑุฏู render ุดูุฏ
    return prevProps.items.length === nextProps.items.length;
  }
);
```

---

## 5๏ธโฃ ฺู ูููุน ูุจุงุฏ ุงุฒ `React.memo` ุงุณุชูุงุฏู ฺฉุฑุฏ

- ุงฺฏุฑ ฺฉุงููพูููุช **ุฎู ุณุจฺฉ ุงุณุช** โ overhead ููุงุณู props ฺฏุงู ุจุดุชุฑ ุงุฒ render ุฎูุฏ ฺฉุงููพูููุช ุงุณุช.
- ููุช props **ูุฑ ุจุงุฑ ฺฉ object/array ุฌุฏุฏ ุณุงุฎุชู ูโุดููุฏ** โ memo ฺฉูฺฉ ููโฺฉูุฏ ูฺฏุฑ ุงุฒ `useMemo` ุง `useCallback` ุงุณุชูุงุฏู ฺฉูุฏ.

---

## 6๏ธโฃ ูฺฉุชู ุญุฑููโุง: ุชุฑฺฉุจ ุจุง `useCallback` ู `useMemo`

ูุซุงู:

```js
import React, { useState, useCallback } from "react";

const Child = React.memo(({ onClick }) => {
  console.log("Child rendered");
  return <button onClick={onClick}>Click me</button>;
});

export default function App() {
  const [count, setCount] = useState(0);

  const handleClick = useCallback(() => {
    console.log("Clicked!");
  }, []); // ุจุฏูู ุชุบุฑุ ููุดู ฺฉ function

  return (
    <div>
      <button onClick={() => setCount(count + 1)}>Increment Count</button>
      <Child onClick={handleClick} />
    </div>
  );
}
```

- ุจุฏูู `useCallback`ุ `handleClick` ูุฑ render ุฌุฏุฏ **ฺฉ ุชุงุจุน ุฌุฏุฏ** ูโุณุงุฒุฏ โ `Child` ุจุงุฒ ูู render ูโุดูุฏ.
- ุจุง `useCallback`ุ ูุฑุฌุน ุชุงุจุน ุซุงุจุช ูโูุงูุฏ โ `Child` ููุท ููุช ูุงูุนุงู ูุงุฒ ุจุงุดุฏ render ูโุดูุฏ.

---

---

ฺฉุฏ ฺฉู ููุดุช ูุดุงู ูโุฏูุฏ `memo` ุจู ุชููุง ุฌูู ุฑูุฏุฑ ูุฌุฏุฏ ุฑุง ููโฺฏุฑุฏ. ุฏููุด ุงู ุงุณุช ฺฉู **ุดุก `text` ุฏุฑ ูุฑ ุฑูุฏุฑ Reference ฺฉ ูุฑุฌุน (reference) ุฌุฏุฏ ูโุณุงุฒุฏ**:

```jsx
const text = { name: "Child4" };
```

ูุฑ ุจุงุฑ ฺฉู Reference ุฑูุฏุฑ ุดูุฏุ ุงู ุดุก ุฏูุจุงุฑู ุณุงุฎุชู ูโุดูุฏ ู ุญุช ุงฺฏุฑ ููุฏุงุฑ ุฏุงุฎูุด ุชุบุฑ ูฺฉุฑุฏู ุจุงุดุฏุ ุงุฒ ูุธุฑ ุฌุงูุงุงุณฺฉุฑูพุช ฺฉ **ุขุฏุฑุณ ุฌุฏุฏ ุฏุฑ ุญุงูุธู** ุฏุงุฑุฏ.
ุจู ููู ุฏูู `memo` ุชุดุฎุต ูโุฏูุฏ ฺฉู props ุนูุถ ุดุฏู ู Child4 ุฏูุจุงุฑู ุฑูุฏุฑ ูโุดูุฏ.

---

### **ุฑุงูโุญู**

ุงุฒ `useMemo` ุจุฑุง ุณุงุฎุชู ุดุก ุงุณุชูุงุฏู ฺฉู ุชุง ุฏุฑ ูุฑ ุฑูุฏุฑ ุฌุฏุฏ ุณุงุฎุชู ูุดูุฏ:

```jsx
import { useState, useMemo } from "react";
import Child4 from "./Child4";

export default function Reference() {
  const [count, setCount] = useState(0);

  const text = useMemo(() => ({ name: "Child4" }), []);

  return (
    <div>
      <h2>Child4 with Memo</h2>

      <button onClick={() => setCount(count + 1)}>Increment Count</button>

      <h3>Count: {count}</h3>

      <Child4 text={text} />
      <hr className="hr1" />
    </div>
  );
}
```

---

### **ูฺฉุชู ููู**

- ุงฺฏุฑ `text` ฺฉ ููุฏุงุฑ ุณุงุฏู ูุซู string ุง number ุจูุฏุ ูุงุฒ ุจู `useMemo` ูุฏุงุดุช.
- ูุดฺฉู ููุท ููุช ุงุณุช ฺฉู props ฺฉ ุดุก ุง ุขุฑุงู ุงุณุช ฺูู ูุฑ ุจุงุฑ ฺฉ reference ุฌุฏุฏ ูโฺฏุฑุฏ.

---

ุฏููุงู ูฺฉุชู ูููโุฌุงุณุช:

ููุช ุงุฒ **`useState`** ุงุณุชูุงุฏู ูโฺฉู:

```jsx
const [text, setText] = useState({ name: "Child4" });
```

- ุดุก `text` **ููุท ฺฉโุจุงุฑ** ููฺฏุงู mount ุดุฏู ฺฉุงููพูููุช ุณุงุฎุชู ูโุดูุฏ.
- ุชุง ููุช ฺฉู **`setText`** ูุฑุงุฎูุงู ูุดูุฏุ ุฑโุงฺฉุช **ููุงู reference ุงููู** ุฑุง ุฏุฑ state ูฺฏู ูโุฏุงุฑุฏ.
- ุจูุงุจุฑุงู ุฏุฑ ุฑูุฏุฑูุง ุจุนุฏุ ููุฏุงุฑ props ุจุฑุง `Child4` **ุนูุถ ูุดุฏู** ู `React.memo` ุชุดุฎุต ูโุฏูุฏ ฺฉู ูุงุฒ ุจู ุฑูุฏุฑ ูุฌุฏุฏ ูุณุช.

---

ุงูุง ุฏุฑ ุญุงูุช ูุจู:

```jsx
const text = { name: "Child4" };
```

- ุฏุฑ ูุฑ ุฑูุฏุฑ ฺฉ **ุดุก ุฌุฏุฏ** ุณุงุฎุชู ูโุดูุฏ.
- ุญุช ุงฺฏุฑ ููุฏุงุฑ ุฏุงุฎูุด ููุงู ุจุงุดุฏุ reference ุนูุถ ุดุฏู ู React.memo ูฺฉุฑ ูโฺฉูุฏ props ุชุบุฑ ฺฉุฑุฏูโุงูุฏ.

---

### **ูุชุฌู**

- `useState` โ ููุฏุงุฑ ุฑุง ุฏุฑ ุญุงูุธู ูฺฏู ูโุฏุงุฑุฏ ู reference ุซุงุจุช ูโูุงูุฏ ุชุง ุฒูุงู ฺฉู ุชุบุฑ ุฏู.
- ุชุนุฑู ูุณุชูู ุดุก ุฏุงุฎู ูุงูฺฉุดู โ ุฏุฑ ูุฑ ุฑูุฏุฑ ฺฉ reference ุฌุฏุฏ ูโุณุงุฒุฏ.

---

---

ุฏุฑ ุงู ฺฉุฏ:

```jsx
const text = { name: "Child4" };
.
.
.
<Child4 text={text.name} />
```

- `text.name` ฺฉ **primitive** (ุฑุดุชู `"Child4"`) ุงุณุช.
- ููุช props ุจู ุตูุฑุช **primitive** ูพุงุณ ุฏุงุฏู ุดูุฏ (string, number, boolean, null, undefined)ุ
  React.memo ูโุชูุงูุฏ ููุฏุงุฑ ุฑุง ุจูโุฏุฑุณุช ููุงุณู ฺฉูุฏ ฺูู ููุงุณูโ primitive ูุง ุจุง `===` ุงูุฌุงู ูโุดูุฏ.

---

### ูุชุฌู

- ุจุง ูุฌูุฏ ุงูฺฉู ุฎูุฏ `text` ฺฉ **object** ุฌุฏุฏ ุฏุฑ ูุฑ ุฑูุฏุฑ ุณุงุฎุชู ูโุดูุฏุ
  ุงูุง ฺูู ุจู `Child4` ููุฏุงุฑ `text.name` (ฺฉู string ุงุณุช) ูพุงุณ ุฏุงุฏู ูโุดูุฏุ
  **ูฺ ุฑูุฏุฑ ุงุถุงู** ุงุชูุงู ููโุงูุชุฏ ุชุง ููุช ฺฉู ููุฏุงุฑ ุฑุดุชู ุชุบุฑ ูฺฉูุฏ.

---

### ุฎูุงุตู

- ุงฺฏุฑ prop ูุณุชููุงู primitive ุจุงุดุฏ โ ููุงุณู ุฑุงุญุช ู memo ุฎูุจ ุนูู ูโฺฉูุฏ.
- ุงฺฏุฑ prop reference type ุจุงุดุฏ (object, array, function) โ ูุงุฒ ุจู useMemo ุง useState ุจุฑุง ุชุซุจุช reference ุฏุงุฑู.

---

---

```jsx
import { useState } from "react";
import Child4 from "./Child4";

const text = { name: "Child4" };

export default function Reference() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <h2>Memo with Reference types</h2>

      <button onClick={() => setCount(count + 1)}>Increment Count</button>

      <h3>Count: {count}</h3>

      <Child4 text={text} />
      <hr className="hr1" />
    </div>
  );
}
```

ุงูุฌุง ุชูุงูุช ููู ูุณุช:

```jsx
const text = { name: "Child4" };
```

- ุงู ุดุก **ุฎุงุฑุฌ ุงุฒ ฺฉุงููพูููุช** ุชุนุฑู ุดุฏู.
- ุฏุฑ ูุชุฌู ููุท ฺฉโุจุงุฑ ุณุงุฎุชู ูโุดูุฏ ู ุจู ุชูุงู ุฑูุฏุฑูุง **ููุงู ูุฑุฌุน (reference)** ุญูุธ ูโุดูุฏ.
- ููุช `count` ุชุบุฑ ูโฺฉูุฏุ ฺฉุงููพูููุช `Reference` ุฏูุจุงุฑู ุฑูุฏุฑ ูโุดูุฏ ูู **ูุชุบุฑ text ุซุงุจุช ุงุณุช** ู ุจู ููุงู object ุงุดุงุฑู ูโฺฉูุฏ.

---

### ูุชุฌู

- `Child4` ุฏูุจุงุฑู ุฑูุฏุฑ **ูุฎูุงูุฏ** ุดุฏ (ุชุง ุฒูุงู ฺฉู props ุฏฺฏุฑ ุชุบุฑ ูฺฉูุฏ).
- ฺูู `React.memo` ููฺฏุงู ููุงุณู ูโุจูุฏ ฺฉู `text` ููุงู object ูุจู ุงุณุช (`===` ุจุฑูุฑุงุฑ ุงุณุช).

---

### ูฺฉุชู ุญุฑููโุง

- ุงฺฏุฑ prop reference-type ุฏุงุฎู ุจุฏููโ ฺฉุงููพูููุช ุณุงุฎุชู ุดูุฏ โ ูุฑ ุจุงุฑ object ุฌุฏุฏ ูโุณุงุฒุฏ ู memo ุจโุงุซุฑ ูโุดูุฏ.
- ุงฺฏุฑ ุจุฑูู ุชุนุฑู ุดูุฏ ุง ุจุง `useMemo` ุชุซุจุช ุดูุฏ โ memo ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูุฏ.

---

ูพุณ ุฏุฑ ูุฌููุน ุง ุจุงุฏ ูุชุบุฑ ุฎุงุฑุฌ ุงุฒ ฺฉุงููพูููุช ุชุนุฑู ุดุฏู ุจุงุดุฏ ุ ุง ุงฺฏุฑ ุฏุงุฎู ฺฉุงููพูููุช ูุณุช primitive ุจุงุดุฏ ุ ุง ุงฺฏุฑ ุฏุงุฎู ู reference ุงุณุชุ ุฏุฑ useState ุง useMemo ุชุนุฑู ุดุฏู ุจุงุดุฏ ุชุง memo ุจุฏุฑุณุช ุงุซุฑ ฺฉูุฏ ู ูุงูุน ุฑูุฏุฑ ุงุถุงูู ุดูุฏ

ุงูุจุชู ุงฺฏุฑ ูุชุบุฑ ูุง reference ุจุงุดุฏุ ู ูุฒ ุจู ูพุงุฑุงูุชุฑ ุง ุงุณุชุช ุงุฒ ฺฉุงููพูููุช ูุง ูุงุฒ ุฏุงุดุชู ุจุงุดุฏ ุ ุจุงุฏ ุญุชูุง ุฏุงุฎู ฺฉุงููพูููุช ู ุงุฒ ุทุฑู useMemo ุชุนุฑู ุดูุฏ
ูุซูุง ุงฺฏุฑ ฺฉ ุงุฒ ูููโ ูุง ุด ูุง ุงุฒ ุงุณุชุช ุจุงุฏ.

---

---
