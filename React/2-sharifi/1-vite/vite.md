ุญุชูุงู! ุจุงู ุงู ุฎุท ฺฉุฏ ุฑู **ฺฉุงูู ู ููููู** ุจุฑุฑุณ ฺฉูู:

---

### โ ฺฉุฏ:

```jsx
<input type="text" value={task} onChange={(e) => setTask(e.target.value)} />
```

---

### ๐ ููุด ูุฑ ุจุฎุด:

#### `type="text"`

- ูุดุฎุต ูโฺฉูู ุงู input ุงุฒ ููุน ูุชู ูุณุช. (ฺฉุงุฑุจุฑ ูโุชููู ูุชู ูุงุฑุฏ ฺฉูู)

---

#### `value={task}`

๐น ุงู ุนู ููุฏุงุฑ ุฏุงุฎู inputุ **ุงุฒ ูุชุบุฑ `task` ฺฉู ุฏุฑ state ุฐุฎุฑู ุดุฏู ูุงุฏ**.
โ ุงู input ุชุจุฏู ุจู ฺฉ **"ฺฉุงููพูููุช ฺฉูุชุฑูโุดุฏู (controlled component)"** ูุดู.

๐ ุนู React ฺฉูุชุฑู ูโฺฉูู ฺฉู ฺู ฺุฒ ุฏุงุฎู input ุจุงุดูุ ูู ุฎูุฏ ูุฑูุฑฺฏุฑ.

---

#### `onChange={(e) => setTask(e.target.value)}`

๐น ุงู ุนู: ูุฑ ููุช ฺฉุงุฑุจุฑ ฺุฒ ุชู input ุชุงูพ ฺฉุฑุฏุ ุงู ุชุงุจุน ุงุฌุฑุง ูุดู.

๐ธ `e` = event (ุฑูุฏุงุฏ ุชุบุฑ)
๐ธ `e.target.value` = ููุฏุงุฑ ุฌุฏุฏ ฺฉู ฺฉุงุฑุจุฑ ุชุงูพ ฺฉุฑุฏู

โ ูุง ุจุง `setTask(...)` ููุฏุงุฑ ุฌุฏุฏ ุฑู ุฏุงุฎู state ูโุฑุฒูุ ู ฺูู `value={task}` ูุณุชุ input ุฏูุจุงุฑู ุจุง ููุฏุงุฑ ุฌุฏุฏ ุฑูุฏุฑ ูุดู.

---

### ๐ ุฌุฑุงู ุงุชูุงูุงุช:

1. ฺฉุงุฑุจุฑ ุชุงูพ ูโฺฉูู ูุซูุงู ุญุฑู `a`
2. `onChange` ุงุฌุฑุง ูุดู ู `setTask("a")` ุตุฏุง ุฒุฏู ูุดู
3. ููุฏุงุฑ `task` ุฏุฑ state ุชุบุฑ ูโฺฉูู
4. ฺฉุงููพูููุช ุฏูุจุงุฑู ุฑูุฏุฑ ูุดู
5. ฺูู `value={task}` ูุณุชุ input ููุฏุงุฑ `"a"` ูุดูู ูุฏู

---

### โ ุงฺฏุฑ ููุท `value` ุจุงุดู ู `onChange` ูุจุงุดู ฺ ูุดูุ

```jsx
<input type="text" value={task} />
```

๐ด ฺฉุงุฑุจุฑ ููโุชููู ฺุฒ ุชุงูพ ฺฉููุ input ููู ูุดู!
ฺูู React ููุท ูโุฎูุงุฏ ููุฏุงุฑ state ุฑู ูุดูู ุจุฏู ูู ูฺ ุฑุงู ุจุฑุง ุชุบุฑ ุงูู ูุฏุงุฏู.

---

### ๐ง ุงุตุทูุงุญ ููู: Controlled vs Uncontrolled

| ุญุงูุช         | ุชูุถุญ                                | ูุซุงู                                     |
| ------------ | ------------------------------------ | ---------------------------------------- |
| Controlled   | ููุฏุงุฑ input ุงุฒ state ูุงุฏ            | `value={task}` ููุฑุงู ุจุง `onChange`       |
| Uncontrolled | ููุฏุงุฑ input ุฏุฑ ุฎูุฏ DOM ูฺฏูโุฏุงุฑ ูุดู | ุจุฏูู `value` ู `onChange` ุง ุจุง `useRef` |

---

### โ ูุชุฌูโฺฏุฑ:

```jsx
<input type="text" value={task} onChange={(e) => setTask(e.target.value)} />
```

ุนู:

- input ููุท ุงูู ฺุฒ ุฑู ูุดูู ูโุฏู ฺฉู ุฏุฑ state (`task`) ูุณุช
- ู ูุฑ ุชุบุฑ ฺฉู ฺฉุงุฑุจุฑ ุงุนูุงู ฺฉููุ ุจูโูุณููโ `onChange` ุฏุฑ state ุฐุฎุฑู ูโุดู

---

ุงฺฏู ุฎูุงุณุช ูุฑู ุงู ุฑูุด ุจุง `useRef` ุฑู ูู ุงุฒ ูุธุฑ ฺฉุงุฑุจุฑุฏ ู ูุนูุงุฑ ูพุฑูฺู ุจุฏููุ ุฎูุดุญุงู ูโุดู ุชูุถุญ ุจุฏู.

---

---

ุนุงููุ ุจุฑู ูุฑุญููโุจูโูุฑุญูู ุฌูู ๐

## ๐ง ุงูู: `useRef` ฺูุ

`useRef` ฺฉ ุงุฒ **ููฺฉโูุง ุงุตู React** ูุณุช ฺฉู ุจุฑุง ุฏู ูุฏู ุงุตู ุงุณุชูุงุฏู ูุดู:

---

### โ 1. ุฏุณุชุฑุณ ูุณุชูู ุจู ุนูุงุตุฑ DOM

ูุซูุงู ฺฏุฑูุชู ููุฏุงุฑ ู input ุง ููฺฉูุณ ฺฉุฑุฏู ุฑู ุงูู (ุฏุฑูุงูุน ุจูยุฌุง ุงุณุชูุงุฏู ุงุฒ getelement ุง queryselctor , ุฏุฑ react ุงุฒ useref ุจุฑุง ุฏุณุชุฑุณ ุจู ุนูุงุตุฑ ุงุณุชูุงุฏู ูฺฉูู):

```jsx
const inputRef = useRef();

<input ref={inputRef} />;
```

ู ุจุนุฏ:

```js
console.log(inputRef.current.value); // ููุฏุงุฑ ุฏุงุฎู input
```

---

### โ 2. ูฺฏูุฏุงุฑ ููุฏุงุฑ ุจู ุฑูุฏุฑูุง **ุจุฏูู** ุงุฌุงุฏ re-render

ูุซูุงู ู ูุชุบุฑ ฺฉู ุชุบุฑ ฺฉููุ ูู ุจุงุนุซ ุฑูุฏุฑ ุฏูุจุงุฑู ูุดู:

```js
const counter = useRef(0);
counter.current += 1;
```

๐ ุฏุฑ ุญุงู ฺฉู ุงฺฏุฑ ุงุฒ `useState` ุงุณุชูุงุฏู ูโฺฉุฑุฏุ ูุฑ ุชุบุฑ ุจุงุนุซ `re-render` ูโุดุฏ.

---

## ๐ ุญุงูุง ุจุฑู ุณุฑุงุบ ููุงุณู `useRef` ุจุง `useState`

| ูฺฺฏ                                 | `useState`                  | `useRef`                        |
| ------------------------------------- | --------------------------- | ------------------------------- |
| ููุฏุงุฑ ุฏุงุฎู input ุฑู ฺฉูุชุฑู ูโฺฉููุ     | โ ุจูู                      | โ ูู                           |
| ุจุงุนุซ re-render ูโุดูุ                 | โ ุจูู                      | โ ูู                           |
| ุจุฑุง ฺฏุฑูุชู ููุฏุงุฑ input ููุงุณุจูุ        | โ ุจูุชุฑ ุจุฑุง ูุฑูโูุง ูุงูุน  | โ ุณุงุฏูโุชุฑ ุจุฑุง ููุงุฑุฏ ุณุงุฏู      |
| ฺฉูุชุฑู ูุฑู                             | ฺฉุงูู (Controlled Component) | ุฌุฒุฆ (Uncontrolled)             |
| ุงุณุชูุงุฏู ุจุฑุง ุชุบุฑ ุธุงูุฑ (ูุซูุงู ููฺฉูุณ) | โ ูู ูุณุชูู                | โ ุจูู (ูุณุชูู ุจู DOM ูุตู ูุดู) |

---

## ๐ ุฏู ุฑูุด ฺฏุฑูุชู ููุฏุงุฑ ุงุฒ input

### 1. ุจุง `useState` (Controlled)

```jsx
const [task, setTask] = useState("");

<input value={task} onChange={(e) => setTask(e.target.value)} />;
```

โ ููุงุณุจ ุจุฑุง:

- ูุฑูโูุง ูพฺุฏู
- ุงุนุชุจุงุฑุณูุฌ (validation)
- ุงุฑุชุจุงุท ุจู ฺูุฏ ููุฏ

---

### 2. ุจุง `useRef` (Uncontrolled)

```jsx
const inputRef = useRef();

<input ref={inputRef} />;

// ุฏุฑ ุฒูุงู ูุงุฒ:
console.log(inputRef.current.value);
```

โ ููุงุณุจ ุจุฑุง:

- ฺฏุฑูุชู ููุฏุงุฑ ูุญุธูโุง
- ูุฑูโูุง ุฎู ุณุงุฏู
- ููุช ููโุฎูุง ุจุง state ุฑูุฑุด ุจุดู

---

## ๐ ุฎูุงุตู ฺฉุงุฑุจุฑุฏูุง:

| ุงฺฏุฑ ูโุฎูุง...                                   | ุงุฒ ุงู ุงุณุชูุงุฏู ฺฉู: |
| ------------------------------------------------ | ------------------ |
| ููุฏุงุฑ input ุฑู ููโุฒูุงู ููุงุด ู ฺฉูุชุฑู ฺฉู         | `useState`         |
| ููุท ูุญุธูโุง ููุฏุงุฑ input ุฑู ุจุฎูู                 | `useRef`           |
| ุฑู input ููฺฉูุณ ฺฉู ุง DOM ุฑู ูุณุชููุงู ุชุบุฑ ุจุฏ | `useRef`           |
| ูุฑูโูุง ุญุฑููโุง ู ุงุนุชุจุงุฑุณูุฌ ุดุฏู ุจุณุงุฒ           | `useState`         |

---

### ุงูู ู ุณูุงู:

ุชุง ุญุงูุง ุจุง `useState` ฺฉุงุฑ ฺฉุฑุฏุ ูโุฏูู ฺฉู ุงฺฏู ููุฏุงุฑุด ุนูุถ ุจุดูุ ฺฉุงููพูููุช ุฏูุจุงุฑู ุฑูุฏุฑ ูุดูุ ุฏุฑุณุชูุ

ุญุงูุง ูุฑุถ ฺฉู ู ูุชุบุฑ ูโุฎูุง ฺฉู:

- ุจุชูู ุชูุด ฺุฒ ุฐุฎุฑู ฺฉู
- ุชุบุฑุด ุจุฏ
- **ุงูุง ุจุงุนุซ ุฑูุฏุฑ ุฏูุจุงุฑู ูุดู**
- ุง ู ุงููุงู ุงุฒ DOM ุฑู ูุณุชููุงู ุงุดุงุฑู ฺฉู (ูุซูุงู ฺฉ `input` ุง `div` ุฎุงุต)

ุงูุฌุงุณุช ฺฉู `useRef` ูุงุฑุฏ ูุดู.

---

### ุชุนุฑู ุณุงุฏู:

```jsx
const myRef = useRef(initialValue);
```

- `myRef.current` ุงูู ููุฏุงุฑู ฺฉู ุฐุฎุฑู ุดุฏู.
- ูโุชูู ุงู ููุฏุงุฑ ุฑู ูุฑ ููุช ุฎูุงุณุช ุชุบุฑ ุจุฏ.
- ุชุบุฑุด ุจุงุนุซ ุฑูุฏุฑ ูุฌุฏุฏ ููโุดู.

---

### ุฏู ฺฉุงุฑุจุฑุฏ ุฎู ูุนุฑูู:

#### 1. ุฏุณุชุฑุณ ุจู ุงููุงูโูุง HTML (ูุซู document.querySelector)

```jsx
const inputRef = useRef(null);

return (
  <div>
    <input ref={inputRef} />
    <button onClick={() => inputRef.current.focus()}>
      ููฺฉูุณ ฺฉู ุฑู ุงููพูุช
    </button>
  </div>
);
```

#### 2. ูฺฏูโุฏุงุดุชู ููุฏุงุฑ ุจู ุฑูุฏุฑูุง (ุจุฏูู ุฑูุฏุฑ ูุฌุฏุฏ)

```jsx
const countRef = useRef(0);

const handleClick = () => {
  countRef.current++;
  console.log("Clicked", countRef.current);
};
```

---

### ู ูฺฉุชู ุฎู ููู:

`useRef` ูุซู ู **ุฌุนุจู** ูุณุช ฺฉู ููุท ุชูุด ู ููุฏุงุฑ ูุณุช ุจู ุงุณู `current`.

---

---

ุญุชูุงู! ููุถูุน **pure effect** ู **side effect** (ุง ุจูโุทูุฑ ุฏููโุชุฑ **pure function** ู **side effects**) ฺฉ ุงุฒ ููุงูู ููู ุฏุฑ ุจุฑูุงููโููุณ ู ูุฎุตูุตุงู ุฏุฑ React ูุณุช.

---

## ๐ง ุงูู ุจูููู: ุชุงุจุน Pure ฺูุ

### โ ุชุงุจุน Pure (ุฎุงูุต)

ุชุงุจุน ฺฉู:

1. **ููุดู ุจุฑุง ูุฑูุฏ ฺฉุณุงูุ ุฎุฑูุฌ ฺฉุณุงู ูโุฏู**
2. **ูฺ ุงุซุฑ ุฑู ุฏูุง ุจุฑูู ุฎูุฏุด ูุฏุงุฑู** (ุนู ฺุฒ ุฑู ุชุบุฑ ููโุฏู)

---

### ๐น ูุซุงู ุชุงุจุน Pure:

```js
function add(a, b) {
  return a + b;
}
```

- ูุฑ ููุช `add(2, 3)` ุฑู ุตุฏุง ุจุฒูุ ูุชุฌูโุงุด ููุดู `5` ูุณุช
- ฺุฒ ุฎุงุฑุฌ ุงุฒ ุฎูุฏุด ุฑู ุชุบุฑ ููโุฏู (ูุซู console ุง DOM)

---

## โ Side Effect ฺูุ

**Side effect (ุงุซุฑ ุฌุงูุจ)** ุนู ฺฉ ฺฉุงุฑ ฺฉู **ุฎุงุฑุฌ ุงุฒ ูุญุฏูุฏู ุชุงุจุน ุฏุงุฑู ุชุฃุซุฑ ูโุฐุงุฑู**.

---

### ๐น ูุซุงูโูุง ุฑุงุฌ side effect:

| ุนููุงุช                               | ุชูุถุญ                                        |
| ------------------------------------ | -------------------------------------------- |
| ุชุบุฑ ุฏุงุฏู DOM                       | ูุซู `document.body.style.background = "red"` |
| console.log                          | ฺูู ุฎุฑูุฌ ุชุงุจุน ูุณุชุ ููุท ูโููุณู ุชู ฺฉูุณูู   |
| ูุฑุงุฎูุงู API                         | ฺูู ุฏุงุฏู ุงุฒ ุจุฑูู ูุงุฏ ู ุงุซุฑ ุฏุงุฑู            |
| ุชุบุฑ state ุง variable ุฎุงุฑุฌ ุงุฒ ุชุงุจุน | ูุซู `someGlobalVar = 5`                      |
| ุฐุฎุฑู ุฏุฑ localStorage                | ฺูู ูุฑูุฑฺฏุฑ ุฑู ุชุบุฑ ูโุฏู                    |

---

### ๐น ูุซุงู ุชุงุจุน ุจุง Side Effect:

```js
function sayHello(name) {
  console.log("Hello " + name);
}
```

- ุฎุฑูุฌ ูุฏุงุฑูุ ููุท ูโููุณู ุชู ฺฉูุณูู
- ูพุณ **side effect** ุฏุงุฑู

---

## ๐งช ฺุฑุง React ุจู ุงู ุงููุช ูโุฏูุ

React ุฏูุณุช ุฏุงุฑู ฺฉู componentูุง ูุซู **ุชูุงุจุน pure** ุจุงุดู:

```js
<Component props={} />
```

ุนู ุจุฑุง ูุฑ props ุฎุฑูุฌ ูุดุฎุต ุจุงุดู ู ฺุฒ ุฎุงุฑุฌ ุงุฒ ุฎูุฏุด ุชุบุฑ ูุฏู.

ูู ฺฏุงู ูุงุฒูู ฺฉุงุฑูุง ุฌุงูุจ ฺฉูู (ูุซูุงู ฺฏุฑูุชู ุฏุชุง ุงุฒ API ุง log ฺฏุฑูุชู). ุงููุฌุง ุงุฒ **useEffect** ุงุณุชูุงุฏู ูโฺฉูู.

---

## ๐ React ู useEffect: ฺฉูุชุฑู side effects

ุฏุฑ React ูุฑ ฺฉุงุฑ ฺฉู:

- ูุณุชููุงู ุจู DOM ฺฉุงุฑ ุฏุงุฑู
- ุจุง ุชุงูุฑ ุง API ฺฉุงุฑ ูโฺฉูู
- ุง ูุงุฒ ุจู cleanup ุฏุงุฑู (ูุซูุงู WebSocket ุง ุฑูุฏุงุฏูุง)

ุจุงุฏ ุฏุงุฎู `useEffect` ุงูุฌุงู ุจุดู ุชุง:

โ ฺฉุฏุช ููุธูุ ูุงุจูโูพุดโุจู ู ูุงุจูโฺฉูุชุฑู ุจุงุดู.

---

## ๐ ูุซุงู: useEffect ุจุฑุง side effect

```js
import { useEffect } from "react";

useEffect(() => {
  console.log("Component mounted!");
  document.title = "Welcome";

  return () => {
    console.log("Component unmounted");
  };
}, []);
```

๐น ุงูุฌุง:

- `console.log` ู `document.title` โ side effect
- ุชู `useEffect` ฺฏุฐุงุดุชู ฺฉู ฺฉูุชุฑู ุดุฏู ุจุงุดู

---

## โ ุฎูุงุตู:

| ุงุตุทูุงุญ        | ุชุนุฑู ุณุงุฏู                             | ูุซุงู                                    |
| ------------- | -------------------------------------- | --------------------------------------- |
| Pure Function | ููุท ุจู ูุฑูุฏ ูุงุจุณุชู ู ุจุฏูู ุชุบุฑ ุจุฑูู | `(a, b) => a + b`                       |
| Side Effect   | ุชุบุฑ ุฎุงุฑุฌ ุงุฒ ุชุงุจุน                     | `console.log`, `DOM`, `API`             |
| useEffect     | ูุญู ุงูุฌุงู side effect ุฏุฑ React         | ฺฏุฑูุชู ุฏุชุงุ ุชุบุฑ ุนููุงู ุตูุญูุ ุซุจุช event |

---

---

ฺฉุฏ ฺฉู ูุฑุณุชุงุฏ ุงุฒ ูุธุฑ ุนููฺฉุฑุฏ ฺฉุงุฑ ูโฺฉูู ูู **ุงุฒ ูุธุฑ ุงุณุชุงูุฏุงุฑุฏ React**ุ **ู ุงุดฺฉุงู ููู ุฏุงุฑู**:

---

## โ ูุดฺฉู: ุงุฌุฑุง ูุณุชูู Side Effect ุฎุงุฑุฌ ุงุฒ `useEffect`

```js
document.title = count;
```

ุงู ุฎุท ูุณุชููุงู ุฏุงุฎู ุจุฏูู ฺฉุงููพูููุช ุงุฌุฑุง ุดุฏู. ุนู **ุฏุฑ ูุฑ ุจุงุฑ ุฑูุฏุฑ ุดุฏู ฺฉุงููพูููุช** ุงู ุฎุท ุงุฌุฑุง ูโุดู. ุงู ููุน ฺฉุฏ:

- ฺฉ **Side Effect** ูุณุช (ุชุบุฑ `document.title`)
- ู ุจุงุฏ ุฏุงุฎู `useEffect` ุจุงุดูุ ูู ุชู ุจุฏูู ุชุงุจุน.

---

## โ ุฑุงู ุฏุฑุณุช (ุจุง `useEffect`):

```js
import { useState, useEffect } from "react";

export default function A7() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    document.title = count;
  }, [count]); // ูุฑ ุจุงุฑ ฺฉู count ุชุบุฑ ฺฉููุ ุงู ุงุฌุฑุง ูุดู

  return (
    <div>
      <button onClick={() => setCount(count + 1)}>Click me</button>
      <p>You clicked {count} times</p>
    </div>
  );
}
```

---

### ๐ ฺุฑุง ุจุงุฏ ุงุฒ useEffect ุงุณุชูุงุฏู ฺฉููุ

ฺูู React ูโุฎูุงุฏ ุชูุงุจุน ฺฉุงููพูููุชโูุง ุฑู ูุซู **ุชูุงุจุน ุฎุงูุต (pure)** ุจุจูู:

- ูุฑูุฏโูุง (props, state) โ ุฎุฑูุฌ (JSX)
- ุจุฏูู side effect ูุณุชูู

ููุช ุดูุง `document.title = count` ุฑู ูุณุชููุงู ุฏุงุฎู ฺฉุงููพูููุช ูโุฐุงุฑุ ุงูู ุชุงุจุน ุฏฺฏู **ุฎุงูุต ูุณุช**.

---

### โ ูุฒุงุง ุงุณุชูุงุฏู ุงุฒ useEffect:

1. ฺฉุฏุช ูุงุจู ูพุดโุจู ู ุชูุฒ ูโูููู
2. ูุงุจู ฺฉูุชุฑู ู cleanup ูุณุช
3. ูุทูุฆู ููุท ููุช ูุงุฒ ุจูุฏ ุงุฌุฑุง ูโุดู (ูุซูุงู ุจุง `[count]` ููุท ูููุน ุชุบุฑ `count`)

---

---

ุณุคุงู ุฎู ุฎูุจ ูพุฑุณุฏ! ุจุงุฏ ุจุง ุฏูุช ู ูุฏูโุจูโูุฏู ุชูุงูุช **ุนููฺฉุฑุฏ** ู **ููุณููโุง** ุจู ฺฉุฏ ฺฉู ููุดุช ู ฺฉุฏ ฺฉู ุจุง `useEffect` ุจุงุฒููุณ ูโฺฉูู ุจุฑุฑุณ ฺฉูู:

---

## โ ุงูู: ฺฉุฏ ุชู (ุจุฏูู `useEffect`)

```js
document.title = count;
```

ุงู ุฎุท **ุฏุฑ ูุฑ ุจุงุฑ ุฑูุฏุฑ ุดุฏู ฺฉุงููพูููุชุ ุจุฏูู ุดุฑุท** ุงุฌุฑุง ูโุดู.

### โ ฺู ุฒูุงู ุงุฌุฑุง ูโุดูุ

- ูุฑ ุจุงุฑ ฺฉู ฺฉุงููพูููุช ุฑูุฏุฑ ูโุดูุ ุงู ุฎุท **ููุดู** ุงุฌุฑุง ูโุดูุ ุญุช ุงฺฏุฑ `count` ุชุบุฑ ูฺฉุฑุฏู ุจุงุดู.

### ๐ ูุดฺฉูุด ฺูุ

- ุจุงุนุซ **ุงุฌุฑุง ุบุฑ ุถุฑูุฑ** ฺฉุฏ ูโุดู (ูุซูุงู ุงฺฏุฑ `count` ุนูุถ ูุดุฏู ุจุงุดู ูู ุฑูุฏุฑ ุจู ูุฑ ุฏูู ุงุชูุงู ุงูุชุงุฏู ุจุงุดู, ูุซูุงยู state ุฏฺฏู ุฏุงุฑู ฺฉู ุงูู ุชุบุฑ ฺฉุฑุฏู).
- ุจุงุนุซ ูโุดู ฺฉุงููพูููุชุช **ุฎุงูุต (pure)** ูุจุงุดู.
- ูุงุจู ฺฉูุชุฑู ูุณุช (ูุซูุงู ููโุชูู ุจฺฏ "ููุท ููุช ููุงู ฺุฒ ุชุบุฑ ฺฉุฑุฏ ุงู ฺฉุฏ ุงุฌุฑุง ุดู").

---

## โ ุญุงูุง: ฺฉุฏ ูพุดููุงุฏ ุจุง `useEffect`

```js
useEffect(() => {
  document.title = count;
}, [count]);
```

### โ ฺู ุฒูุงู ุงุฌุฑุง ูโุดูุ

- ููุท ููุช `count` ุชุบุฑ ฺฉูู.
- ุฏุฑ ูุงูุน: ุจุนุฏ ุงุฒ ูุฑ ุฑูุฏุฑุ **React ฺฺฉ ูโฺฉูู ุขุง \*\***`count`\***\* ุชุบุฑ ฺฉุฑุฏูุ** ุงฺฏุฑ ุจููุ then ุงุฌุฑุง.

### โ ูุฒุงุง ููู:

| ูฺฺฏ                                     | ุจุฏูู useEffect          | ุจุง useEffect                   |
| ----------------------------------------- | ----------------------- | ------------------------------ |
| ฺฉูุชุฑู ุฏูู ุงุฌุฑุง                           | โ                      | โ ููุท ุฏุฑ ุตูุฑุช ุชุบุฑ ููุฏุงุฑ     |
| ุจููู ุจูุฏู                                | โ ููฺฉูู ุจุงุฑูุง ุงุฌุฑุง ุดู  | โ ููุท ููุช ูุงุฒ ุงุฌุฑุง ูโุดู     |
| ุฑุนุงุช ููุงุนุฏ React                         | โ ููุถ ุฎููุต ุชุงุจุน        | โ ฺฉุงููุงู ุณุงุฒฺฏุงุฑ ุจุง ุงุตูู React |
| ูุงุจูุช Clean up (ูุซูุงู ุจุณุชู ุชุงูุฑ ุง API) | โ ูุฏุงุฑู                | โ ููฺฉูู                       |
| ุขูุฏูโูพุฐุฑ ู ุชูุณุนู                       | โ ูพุฑุฎุทุง ู ุบุฑุงุณุชุงูุฏุงุฑุฏ | โ ูุงุจู ุงุนุชูุงุฏ                 |

---

## ๐ ูุซุงู ููููุณ:

ูุฑุถ ฺฉู ู ูพุฑูฺู ุฏุงุฑ ฺฉู ุชูุด ฺฉู state ุฏฺฏู ูู ูุณุช. ุงฺฏู ุจููุณ:

```js
document.title = count;
```

ูุฑ ุจุงุฑ ฺฉู **state unrelated ุฏฺฏูโุง** ุชุบุฑ ฺฉููุ ุฏูุจุงุฑู `document.title = count` ุงุฌุฑุง ูโุดูุ ุนู ฺฉุงููุงู ุจโุฏูู.

ูู ุจุง `useEffect(() => {...}, [count])` ููุท ููุช `count` ุชุบุฑ ฺฉูู ุงุฌุฑุง ูโุดู. ุฎู ุฏูู ู ุจููู.

---

## ๐ง ูพุณ ุฌูุนโุจูุฏ:

| ฺุฑุง ุงุฒ `useEffect` ุจุงุฏ ุงุณุชูุงุฏู ฺฉููุ                                  |
| ---------------------------------------------------------------------- |
| ุจุฑุง ุงูฺฉู ฺฉูุชุฑู ุฏุงุดุชู ุจุงุดู ุฑู **ฺู ูููุน** side-effect ุงุฌุฑุง ุดู.     |
| ุจุฑุง ุงูฺฉู ุชุงุจุน ฺฉุงููพูููุช "ุฎุงูุต" ุจูููู ู ุฑุงุญุช ุชุณุช ุดู.                   |
| ุจุฑุง ุงูฺฉู ุจุชููู ุจู ุฑุงุญุช clean-up ุงูุฌุงู ุจุฏู.                        |
| ุจุฑุง ุงูฺฉู ุฑูุฏุฑูุง ุงุถุงู ู ุจโูุงุฏู ูุฏุงุดุชู ุจุงุดู.                      |
| ฺูู React ุทุฑุงุญ ุดุฏู ฺฉู side-effect ูุง ุฏุงุฎู `useEffect` ุจุงุดูุ ูู ุจุฑูู. |

---

---

ุฎู ุฎูุจุ ุจุฑู ุณุฑุงุบ ุชูุถุญ ุฏููโุชุฑ ู ุณุงุฏูโ `useReducer`:

---

## ๐น `useReducer` ฺูุ

`useReducer` ฺฉ ุงุฒ **ููฺฉโูุง React** ูุณุช ฺฉู ุจุฑุง ูุฏุฑุช state ุงุณุชูุงุฏู ูโุดูุ **ูุดุงุจู `useState`**.
ุงูุง ููุช state ูพฺุฏูโุชุฑ ุง ูุงุจุณุชู ุจู ุนููุงุช ูุฎุชูู ุจุงุดู (ูุซูุงู ุฒุงุฏ ฺฉุฑุฏูุ ฺฉู ฺฉุฑุฏูุ ุฑุณุช ฺฉุฑุฏูุ ุง ุชุบุฑ ุจุฑ ุงุณุงุณ ุดุฑุท)ุ `useReducer` ุจูุชุฑ ู ุชูุฒุชุฑ ุนูู ูโฺฉูู.

---

## โ ูุฑู ุงุตู ุจุง `useState`

| `useState`                     | `useReducer`                                 |
| ------------------------------ | -------------------------------------------- |
| ุณุงุฏู ู ุณุฑุน ุจุฑุง stateูุง ุณุงุฏู | ุจูุชุฑ ุจุฑุง ูุฏุฑุช ุญุงูุชโูุง ูพฺุฏู ุง ฺูุฏุญุงูุชู |
| ฺฉ ุชุงุจุน ุจุฑุง ุชุบุฑ state       | ุงุฒ ฺฉ `reducer function` ุงุณุชูุงุฏู ูโฺฉูู      |
| ููุฏุงุฑ ู setter ุจุฑูโฺฏุฑุฏููู     | ููุฏุงุฑ ู dispatch ุจุฑูโฺฏุฑุฏููู                 |

---

## ๐ฆ ุณุงุฎุชุงุฑ `useReducer`

```jsx
const [state, dispatch] = useReducer(reducer, initialState);
```

### ุงุฌุฒุง ุขู:

- `state`: ููุฏุงุฑ ูุนู state
- `dispatch`: ุชุงุจุน ุจุฑุง ุงุฑุณุงู ฺฉ ุงฺฉุดู (ูุซูุงู "increase")
- `reducer`: ุชุงุจุน ฺฉู ูุดุฎุต ูโฺฉูู ููุช ุงฺฉุดู ุฎุงุต ุงุฑุณุงู ุดุฏุ state ฺุทูุฑ ุชุบุฑ ฺฉูู
- `initialState`: ููุฏุงุฑ ุงููู

---

## ๐ง reducer ฺูุ

ฺฉ **ุชุงุจุน ูุนููู ุฌุงูุงุงุณฺฉุฑูพุช**ู ฺฉู ูุฑูุฏโูุงุด:

- **state ูุนู**
- **action** (ฺฉ ุด ูุนูููุงู ุจุง ููุฏ `type`)

ู ุฎุฑูุฌโุด **state ุฌุฏุฏ** ูุณุช.

### ูุซุงู:

```js
const reducer = (state, action) => {
  switch (action.type) {
    case "increase":
      return state + 1;
    case "decrease":
      return state - 1;
    case "reset":
      return 0;
    default:
      return state;
  }
};
```

---

## ๐ฎ dispatch ฺฺฉุงุฑ ูโฺฉููุ

ูุซู ุงู ูโูููู ฺฉู ุจฺฏ:

> "ุงฺฉุดู `increase` ุฑู ุงุฌุฑุง ฺฉู!"

ูุซุงู:

```js
dispatch({ type: "increase" });
```

---

## ๐ ฺฉ ุงุฒ useReducer ุงุณุชูุงุฏู ฺฉููุ

**ุจูุชุฑู ุงุฒ `useReducer` ุงุณุชูุงุฏู ฺฉูู ููุช:**

1. state ูพฺุฏูโุณุช (ูุซูุงู ุขุจุฌฺฉุช ุจุง ฺูุฏ ููุฏ)
2. ฺูุฏ ุญุงูุช ูุฎุชูู ุฏุงุฑู (increase, decrease, reset, โฆ)
3. ุขูพุฏุช state ุจู ุตูุฑุช ุดุฑุท ุง ููุทู ูุณุช
4. ูุงุฒ ุจู ูุถูุญ ุจุดุชุฑ ู ุฌุฏุง ฺฉุฑุฏู ููุทู ุฏุงุฑู (ฺฉุฏ ุชูุฒุชุฑ ูโุฎูุงู)

---

---

```js
import { useEffect } from "react";

export default function A12() {
  useEffect(() => {
    const clickHandler = () => console.log("clicked window");
    window.addEventListener("click", clickHandler);
    };
  }, []);

  return <div>A12</div>;
}
```

ฺฉุฏ ฺฉู ููุดุชุ **ุชูุฑุจุงู ุฏุฑุณุชู ุงูุง ูุงูุตู**ุ ฺูู ุฏุฑ `useEffect` ููุท **ุงูุฒูุฏู** (`addEventListener`) ุฑู ุงูุฌุงู ุฏุงุฏ ูู **ูพุงฺฉโุณุงุฒ** (`removeEventListener`) ุฑู ุงูุฌุงู ูุฏุงุฏ.

---

## โ ูุดฺฉู ุงุตู:

ุงฺฏุฑ ุงู ฺฉุงููพูููุช ุจุงุฑูุง **unmount ู mount** ุจุดู (ูุซูุงู ุจุง ููุงุด/ูุฎูโุณุงุฒ)ุโ ูุฑุจุงุฑ ู listener ุฌุฏุฏ ุจู window ุงุถุงูู ูโุดู ู ูฺโููุช ุญุฐู ููโุดู.
ุงู ูโุชููู ููุฌุฑ ุจู **memory leak** ู ุฑูุชุงุฑูุง ุนุฌุจ ุจุดู (ูุซูุงู ูุฑ ฺฉูฺฉ ฺูุฏ ุจุงุฑ ูุงฺฏ ุจุดู).

---

## โ ูุณุฎูโ ุฏุฑุณุช ุจุง Clean-up:

```js
import { useEffect } from "react";

export default function A12() {
  useEffect(() => {
    const clickHandler = () => console.log("clicked window");
    window.addEventListener("click", clickHandler);

    // ๐ป Clean-up function
    return () => {
      window.removeEventListener("click", clickHandler);
    };
  }, []);

  return <div>A12</div>;
}
```

---

## ๐ก ูฺฉุชู:

ุฏุฑ `useEffect(() => { ... }, [])`:

- ฺฉุฏ ุฏุงุฎู ุจุฏููโ `useEffect` **ุฏุฑ mount ุดุฏู** ุงุฌุฑุง ูโุดู.
- ฺฉุฏ ฺฉู ุงุฒ `return` ุจุฑูโฺฏุฑุฏููุ **ุฏุฑ unmount ุดุฏู** ุงุฌุฑุง ูโุดู.

---

---

ุญุชูุงู! ุฏุฑ ุฏูุง Reactุ **ฺุฑุฎู ุญุงุช ฺฉุงููพูููุช** (Component Lifecycle) ุจู ูุฑุงุญู ฺฏูุชู ูโุดู ฺฉู ฺฉ ฺฉุงููพูููุช ุงุฒ ุฒูุงู ุณุงุฎุชูโุดุฏู (Mount) ุชุง ุฒูุงู ุญุฐูโุดุฏู (Unmount) ุท ูโฺฉูู.

ุฏุฑ ุงูุฌุง ูุง ุชูุฑฺฉุฒ ุฑู ุฑู **ฺฉุงููพูููุชโูุง ุชุงุจุน (Functional Components)** ุฏุงุฑู ฺฉู ุจุง **ููฺฉโูุง (ูุซู useEffect)** ูุฏุฑุช ูโุดู (ุจุฑุฎูุงู ฺฉูุงุณโฺฉุงููพูููุชโูุง ฺฉู ูุชุฏูุง lifecycle ูุฎุตูุต ุฎูุฏุดูู ุฑู ุฏุงุดุชู).

---

## ๐ ูุฑุงุญู ฺุฑุฎู ุญุงุช ุฏุฑ ฺฉุงููพูููุชโูุง ุชุงุจุน

### โ 1. Mount (ูุตุจ ุดุฏู)

ฺฉุงููพูููุช ุจุฑุง ุงููู ุจุงุฑ **render** ูโุดู ู ุจู DOM ุงุถุงูู ูโุดู.

```js
useEffect(() => {
  // ุงู ูุณูุช ููุท ฺฉ ุจุงุฑ ููฺฏุงู mount ุงุฌุฑุง ูโุดู
}, []);
```

ูุซุงู: ฺฏุฑูุชู ุฏุงุฏู ุงุฒ APIุ ุงุถุงูู ฺฉุฑุฏู event listener ู...

---

### ๐ 2. Update (ุจูโุฑูุฒุฑุณุงู ุดุฏู)

ูุฑ ุจุงุฑ ฺฉู **state ุง props** ุชุบุฑ ฺฉููุ ฺฉุงููพูููุช ุฏูุจุงุฑู render ูโุดู ู useEffectูุง ฺฉู ูุงุจุณุชฺฏ (dependency) ุจู ุงูู ููุฏุงุฑูุง ุฏุงุดุชูุ ุงุฌุฑุง ูโุดู.

```js
useEffect(() => {
  // ููุช count ุชุบุฑ ฺฉูู ุงุฌุฑุง ูโุดู
}, [count]);
```

---

### โ 3. Unmount (ุญุฐู ุดุฏู)

ููุช ฺฉุงููพูููุช ุงุฒ ุตูุญู (DOM) ุญุฐู ูโุดูุ ุชุงุจุน ุจุงุฒฺฏุดุช useEffect ุงุฌุฑุง ูโุดู. ุงู ุฌุง ุจุฑุง ูพุงฺฉุณุงุฒ ุงุณุชูุงุฏู ูโุดู.

```js
useEffect(() => {
  const handler = () => console.log("scroll");
  window.addEventListener("scroll", handler);

  return () => {
    window.removeEventListener("scroll", handler);
    console.log("cleaned up!");
  };
}, []);
```

---

## ๐ ฺฉุงุฑุจุฑุฏูุง ุงุตู useEffect ุฏุฑ ฺุฑุฎู ุญุงุช:

| ูุฑุญูู   | ฺฉุงุฑุจุฑุฏ ูุนููู                                   | ูุซุงู                                   |
| ------- | ---------------------------------------------- | -------------------------------------- |
| Mount   | ฺฏุฑูุชู ุฏุชุงุ ุชูุธู ุนููุงู ุตูุญูุ ุฑุงูโุงูุฏุงุฒ ุงุชุตุงู | `fetch`, `document.title = ...`        |
| Update  | ูุงฺฉูุด ุจู ุชุบุฑ ููุฏุงุฑ ุฎุงุต                      | ูุงฺฉูุด ุจู ุชุบุฑ `props` ุง `state`      |
| Unmount | ูพุงฺฉ ฺฉุฑุฏู ุชุงูุฑุ ุญุฐู eventูุง                    | `clearInterval`, `removeEventListener` |

---

## ๐ ฺฉ ูุซุงู ฺฉุงูู:

```jsx
import { useEffect, useState } from "react";

export default function Counter() {
  const [count, setCount] = useState(0);

  // Mount: ุชูุธู ุนููุงู ุตูุญู
  useEffect(() => {
    console.log("Mounted");
    document.title = `Count is ${count}`;

    // Unmount
    return () => {
      console.log("Unmounted");
    };
  }, []); // ููุท ฺฉโุจุงุฑ ุงุฌุฑุง ูุดู

  // Update: ูุฑ ุจุงุฑ count ุชุบุฑ ฺฉูู
  useEffect(() => {
    console.log("Count updated:", count);
  }, [count]);

  return (
    <div>
      <p>{count}</p>
      <button onClick={() => setCount(count + 1)}>Increase</button>
    </div>
  );
}
```

---

## ๐ ุฌูุนโุจูุฏ:

| ูุฑุญูู     | ุชูุถุญ                                        |
| --------- | -------------------------------------------- |
| Mount     | ููุช ฺฉุงููพูููุช ุจุฑุง ุงููู ุจุงุฑ ุจู ุตูุญู ูุงุฏ    |
| Update    | ููุช props ุง state ุชุบุฑ ูโฺฉูู             |
| Unmount   | ููุช ฺฉุงููพูููุช ุงุฒ DOM ุญุฐู ูโุดู               |
| useEffect | ฺฉูุชุฑู ุงู ูุฑุงุญู ุจุง ููฺฉ useEffect ุงูุฌุงู ูโุดู |

---

---

ุณุคุงู ุจุณุงุฑ ุฎูุจ ูพุฑุณุฏ!
ุจุงู ุฏูู ุจุฑุฑุณ ฺฉูู ฺฉู **ุงฺฏุฑ `return` ู `removeEventListener` ุฑู ูููุณูุ ฺู ุงุชูุงู ูโุงูุชู**:

---

## ๐ ฺฉุฏ ฺฉู ููุดุช:

```js
useEffect(() => {
  const clickHandler = () => console.log("clicked window");
  window.addEventListener("click", clickHandler);

  // ูพุงฺฉุณุงุฒ (clean-up) ููฺฏุงู unmount:
  return () => {
    window.removeEventListener("click", clickHandler);
  };
}, []);
```

---

## โ ุงฺฏุฑ ุจุฎุด `return` ุฑู ูููุณ ฺู ูุดูุ

ุนู ุงูู ุจููุณ:

```js
useEffect(() => {
  const clickHandler = () => console.log("clicked window");
  window.addEventListener("click", clickHandler);
}, []);
```

---

## ๐ ุชูุงูุช ุนููฺฉุฑุฏ ฺูุ

### โ ุฏุฑ ูฺฏุงู ุงูู: **ูฺ ุงุฑูุฑ ุง ูุดฺฉู ุธุงูุฑ ูพุด ููุงุฏ.**

ฺฉุงููพูููุช ุฏุฑุณุช ฺฉุงุฑ ูโฺฉููุ ฺฉูฺฉโูุงุฑู ุซุจุช ูโฺฉูู ู ูุงฺฏ ูโุฒูู.

ุงูุง...

---

## โ ูุดฺฉู ูุงูุน ฺฉุฌุงุณุชุ (ูุฎุตูุตุงู ุฏุฑ ูพุฑูฺูโูุง ูุงูุน ู ุจุฒุฑฺฏ)

### 1. **ูุดุช ุญุงูุธู (Memory Leak):**

ููุช ฺฉุงููพูููุช ุญุฐู ูโุดู ูู ูุณูุฑ ูููุฒ ูุนุงููุ ุงูู **ุชุงุจุน ุชู ุญุงูุธู ุจุงู ูโูููู**.

- ุงฺฏู ฺฉุงุฑุจุฑ ุฑูุช ุจู ฺฉ ุตูุญู ุฏฺฏู (ฺฉุงููพูููุช unmount ุดุฏ)ุ ููฺูุงู ุงูู ูุณูุฑ ูุนุงูู ู ุจุงุนุซ ูุตุฑู ุจโููุฑุฏ ููุงุจุน ูุดู.

---

### 2. **ุงุฌุฑุง ฺูุฏุจุงุฑูโ ูุณูุฑ ุฏุฑ ูุณุฎู ุจุฏูู \[]**

ุงฺฏู ุงุฒ ุงู ฺฉุฏ ุงุณุชูุงุฏู ฺฉุฑุฏู ุจุงุด:

```js
useEffect(() => {
  window.addEventListener("click", handler);
});
```

ู `[]` ูู ูุฐุงุฑุ ูุฑ ุจุงุฑ ฺฉู ฺฉุงููพูููุช ุฑูุฏุฑ ุจุดูุ ู **ูุณูุฑ ุฌุฏุฏ** ุซุจุช ูโฺฉู ู ูุณูุฑ ูุจู ูพุงฺฉ ููโุดู!
ุนู ู ฺฉูฺฉุ ฺูุฏ ุจุงุฑ ูุงฺฏ ูโุฒูู!
(ูุซู ุงู ฺฉู ุฑู ู ุฏฺฉูู ุตุฏ ุจุงุฑ ฺฉูฺฉโูุณูุฑ ุจุฒุงุฑ ูู ูฺโฺฉุฏูู ุฑู ูพุงฺฉ ูฺฉู)

---

### 3. **ุจุดโูุนุงู ุบุฑูุงุจูโฺฉูุชุฑู**

ูุซูุงู ุงฺฏู ุชู ูุณูุฑ ู ฺฉุงุฑ ุณูฺฏู ุงูุฌุงู ุจุฏ (ูุซู fetch)ุ ุฏุฑ ุญุงูุช ุจุฏูู `return` ููฺฉูู ุชู ุตูุญุงุช ูุฎุชูู ฺูุฏู ุจุงุฑ ุงุฌุฑุง ุจุดู ู ุจุงุนุซ ฺฉูุฏ ุดุฏู ุดุฏุฏ ุจุฑูุงูู ุจุดู.

---

## โ ูุชุฌูโฺฏุฑ ููุง:

| ูุถุนุช         | ฺู ุงุชูุงู ูโุงูุชูุ  | ูุชุฌู                                     |
| ------------- | ------------------- | ----------------------------------------- |
| ุจุง `return`   | ูุณูุฑ ุชูุฒ ูพุงฺฉ ูุดู | โ ุงูู ู ุจููู                            |
| ุจุฏูู `return` | ูุณูุฑ ุจุงู ูโูููู  | โ ูุดุช ุญุงูุธูุ ฺูุฏู ุจุงุฑ ุงุฌุฑุงุ ูุตุฑู ุจโููุฑุฏ |

---

### โ ููุดู ุจุฑุง eventListener ูุงุ ุชุงูุฑูุงุ ุงููุดูโูุง ู ููุงุจุน ุฎุงุฑุฌุ ุญุชูุงู `return` ุฑู ุฏุฑ `useEffect` ุจููุณ.

โ ฺูู ุงู ูููู ฺุฒู ฺฉู **cleanup** ู **ุฑูุชุงุฑ ุญุฑููโุง** ุฏุฑ React ูุญุณูุจ ูุดู.

---

---

ุณุคุงู ุนุงูู! ๐
ุฏุฑ Reactุ ููุช ุงุฒ `useEffect` ุงุณุชูุงุฏู ูโฺฉูุ ุงูู `return` ฺฉู ุฏุงุฎูุด ูููุณ ุจู ุงุณู **cleanup function** ุดูุงุฎุชู ูุดู.
ุญุงูุง ุงูฺฉู _ฺู ูููุนโูุง ุจุงุฏ ุงุฒุด ุงุณุชูุงุฏู ฺฉููุ_ ุงูุฌุง ุจุฑุงุช ฺฉุงูู ุชูุถุญ ุฏุงุฏู:

---

## โ **ฺู ููุงูุน ุจุงุฏ ุงุฒ `return` ุฏุฑ `useEffect` ุงุณุชูุงุฏู ฺฉููุ**

### 1. **Event Listeners (ูุซู `addEventListener`)**

ููุช ุจู ฺุฒ ูุซู `window`ุ `document` ุง ู DOM ุนูุตุฑุ ูุณูุฑ ุงุถุงูู ูโฺฉู:

```js
useEffect(() => {
  const handler = () => console.log("clicked");
  window.addEventListener("click", handler);

  return () => {
    window.removeEventListener("click", handler);
  };
}, []);
```

> โ ุงฺฏุฑ ูพุงฺฉุด ูฺฉูุ ูุณูุฑ ุจุงู ูโูููู ู ุจุงุนุซ ูุดุช ุญุงูุธู ู ุฑูุชุงุฑ ุนุฌุจ ูุดู.

---

### 2. **ุชุงูุฑ ู Interval ูุง**

ูุซู `setTimeout` ู `setInterval` ฺฉู ุจุงุฏ `clearTimeout` ุง `clearInterval` ุฑู ุงูุฌุงู ุจุฏ:

```js
useEffect(() => {
  const timer = setInterval(() => {
    console.log("Running...");
  }, 1000);

  return () => {
    clearInterval(timer);
  };
}, []);
```

> โ ุงฺฏู ูพุงฺฉ ูฺฉูุ ุญุช ุจุนุฏ ุงุฒ ุฎุฑูุฌ ุงุฒ ุตูุญู ูู ุชุงูุฑ ุงุฏุงูู ุฏุงุฑู!

---

### 3. **ุงุดุชุฑุงฺฉโูุง (Subscriptions)**

ูุซูุงู ููุช ุจุง WebSocketุ Firebaseุ ุง ฺฉุชุงุจุฎูููโูุง ูุซู RxJS ฺฉุงุฑ ูโฺฉู:

```js
useEffect(() => {
  const subscription = someAPI.subscribe((data) => console.log(data));

  return () => {
    subscription.unsubscribe();
  };
}, []);
```

> โ ุจุฏูู cleanupุ ุงุชุตุงูโูุง ุจุงู ูโูููู.

---

### 4. **Abort ฺฉุฑุฏู fetchโูุง ุง async taskูุง**

ููุช ู ุฏุฑุฎูุงุณุช async ูุซู `fetch` ุฏุงุฑุ ููฺฉูู ูุจู ุงุฒ ุงููุฏู ุฌูุงุจุ ฺฉุงููพูููุช ุญุฐู ุจุดู:

```js
useEffect(() => {
  const controller = new AbortController();

  fetch("...", { signal: controller.signal })
    .then((res) => res.json())
    .then((data) => console.log(data))
    .catch((err) => {
      if (err.name === "AbortError") console.log("Fetch aborted");
    });

  return () => controller.abort();
}, []);
```

> โ ุฌููฺฏุฑ ุงุฒ ุงุฑูุฑูุง ูุซู:
> `Can't perform a React state update on an unmounted component`

---

### 5. **ุงููุดูโูุง ุง ฺฉุชุงุจุฎุงููโูุง ุฎุงุฑุฌ**

ูุซู ููุช ฺฉู ุงุฒ `GSAP`ุ `Framer Motion` ุง `Chart.js` ุงุณุชูุงุฏู ูโฺฉู ู ุจุงุฏ instance ุฑู destroy ฺฉู.

---

## ๐ง ุฎูุงุตูโ ฺฉุงุฑุจุฑุฏ `return` ุฏุฑ `useEffect`:

> โ **ูุฑ ุฒูุงู ฺฉู ฺุฒ ุงุฌุงุฏ ูโฺฉู ฺฉู ูุงุฒ ุจู ูพุงฺฉุณุงุฒ ุฏุงุฑู** (listenerุ timerุ subscriptionุ fetchุ animation ู ...)
> ุจุงุฏ `return` ุจุฒุงุฑ ุชุง ููฺฏุงู `unmount` ุง `re-run` ุดุฏู effectุ ูพุงฺฉ ุจุดู.

---

---

ุฎู ุณุคุงู ูููู ู ุฏููุงู ฺฉ ุงุฒ ุชููโูุง ุฑุงุฌ ุฏุฑ `useEffect` ูุณุช ๐

---

## ๐ ูุดฺฉู: ฺุฑุง `console.log("clicked window")` ุฏูุจุงุฑ ฺุงูพ ูุดูุ

ุชู ุงู ฺฉุฏ:

```js
useEffect(() => {
  const clickHandler = () => console.log("clicked window");
  window.addEventListener("click", clickHandler);
}, []);
```

ุชู ููุท ฺฉ ุจุงุฑ `addEventListener` ุงูุฌุงู ุฏุงุฏุ ูพุณ **ุฏุฑ ุญุงูุช ุนุงุฏ ุจุงุฏ ููุท ฺฉ ุจุงุฑ ููฺฏ ุจุฒูู**.
ุงูุง ฺูู ุฏุงุฑ ุงุฒ **React 18 ุง ุจุงูุงุชุฑ** (ฺฉู `Strict Mode` ูุนุงูู) ุงุณุชูุงุฏู ูโฺฉูุ ู ุงุชูุงู ุฎุงุต ูโุงูุชู:

---

## ๐ง ุฏูู ูุงูุน: **Strict Mode ุฏุฑ React 18+**

ุฏุฑ ุญุงูุช Strict Modeุ ุจุฑุง ฺฉูฺฉ ุจู ูพุฏุง ฺฉุฑุฏู ุจุงฺฏโูุง ู side effectูุง ุงุดุชุจุงูุ React ุนูุฏุงู ุชู ุญุงูุช developmentุ `useEffect` ู ุณุงุฑ lifecycleูุง ุฑู **ุฏู ุจุงุฑ ุงุฌุฑุง ูโฺฉูู** (ููุท ุฏุฑ dev modeุ ูู production).

### ุนู ฺุ

- ุงูู `useEffect` ุงุฌุฑุง ูุดู โ `addEventListener` ุงูุฌุงู ูุดู.
- ุจุนุฏ React ูุงุฏ `unmount` ูโฺฉูู (ุดุจูโุณุงุฒ ุดุฏู)ุ ูู ฺูู ุดูุง **ูฺ `return`-ุง ูุฐุงุดุช**ุ ูุณูุฑ ูพุงฺฉ ููโุดู โ.
- ุฏูุจุงุฑู `useEffect` ุงุฌุฑุง ูุดู ู ู `addEventListener` ุฏฺฏู ุงุถุงูู ูโฺฉูู โ.

ูุชุฌูุ
ุงูุงู **ฒ ุชุง ูุณูุฑ ุฏุงุฑ** ฺฉู ูุฑ ุฏู ุจุง ฺฉ ฺฉูฺฉ ุงุฌุฑุง ูโุดู โ ุฏูุจุงุฑ `console.log`.

---

## โ ุฑุงู ุญู: ุญุชูุงู `return` ุจุฒุงุฑ ุจุฑุง ูพุงฺฉุณุงุฒ:

```js
useEffect(() => {
  const clickHandler = () => console.log("clicked window");
  window.addEventListener("click", clickHandler);

  // Cleanup function
  return () => {
    window.removeEventListener("click", clickHandler);
  };
}, []);
```

---

## ๐ฆ ูุชุฌู ููุง:

| ูฺฺฏ               | ุชูุถุญ                                                                 |
| ------------------- | --------------------------------------------------------------------- |
| ฺุฑุง ุฏูุจุงุฑ ูุงฺฏุ      | ฺูู React ุฏุฑ dev mode ู strict mode ุฏูุจุงุฑ `useEffect` ุฑู ุงุฌุฑุง ูโฺฉูู. |
| ุฑุงู ุญู              | ุงุณุชูุงุฏู ุงุฒ `cleanup function` ุจุฑุง ุญุฐู event listener.                |
| ุฏุฑ production ฺุทูุฑุ | ุงู ุงุชูุงู ููโุงูุชู. ููุท ฺฉ ุจุงุฑ ุงุฌุฑุง ูุดู.                             |

---

---

ุฏุฑ ฺฉุฏ ฺฉู ูุฑุณุชุงุฏ:

```jsx
useEffect(() => {
  const clickHandler = () => console.log("clicked window");
  window.addEventListener("click", clickHandler);

  // Clean-up function
  return () => {
    window.removeEventListener("click", clickHandler);
    console.log("unmount");
  };
}, []);
```

ฺฉุฏ ุฏุงุฎู `return` ูููู _cleanup function_ ูุณุช ู ุฒูุงู ุงุฌุฑุง ูุดู ฺฉู ฺฉุงููพูููุช **unmount** ุจุดู.

---

### ๐ข ุนู ุฏููุงู ฺฉ ุงู ุงุชูุงู ูโุงูุชูุ

ููุช ฺฉู ฺฉุงููพูููุช `A13` ุงุฒ DOM ุญุฐู ุจุดู.

---

### ๐ ูพุณ ฺู ุฒูุงู `console.log("unmount")` ุฏุฑ ฺฉูุณูู ฺุงูพ ูโุดูุ

ููุช ฺฉ ุงุฒ ุงู ุญุงูุชโูุง ุงุชูุงู ุจูุชู:

1. **ฺฉุงููพูููุช A13 ุฏฺฏู ุฏุฑ DOM ุฑูุฏุฑ ูุดู.**

   - ูุซูุงู ุงฺฏู A13 ุฏุงุฎู ฺฉ ุดุฑุท `show && <A13 />` ุจุงุดู ู `show = false` ุจุดู.

2. **ุตูุญู ุฑูุฑุด ุง route ุชุบุฑ ฺฉูู (ุฏุฑ ุงูพูฺฉุดู SPA ูุซู React Router).**
   - ฺูู ุฏุฑ ุงู ุญุงูุช React ุงูู ฺฉุงููพูููุช ุฎุงุต ุฑู unmount ูโฺฉูู.

---

### ๐งช ุงฺฏุฑ ุจุฎูุง ุงูุขู ุงูุชุญุงูุด ฺฉู:

ูุซูุงู ู ฺฉุฏ ุณุงุฏู ุจุณุงุฒ ฺฉู `A13` ุจุง ุฏฺฉูู ุญุฐู ุจุดู:

```jsx
import { useState } from "react";
import A13 from "./A13";

export default function App() {
  const [show, setShow] = useState(true);

  return (
    <div>
      <button onClick={() => setShow(!show)}>Toggle A13</button>
      {show && <A13 />}
    </div>
  );
}
```

ููุช ุฏฺฉูู ุฑู ุจุฒู ู `A13` ุงุฒ ุตูุญู ุญุฐู ุจุดูุ ุชู ฺฉูุณูู ูโุจู:

```
unmount
```

---

ุงฺฏู ุฎูุงุณุชุ ู ูุซุงู ุนูู ูู ุจุฑุงุช ูโุณุงุฒู.

---

---

ุนุงู! ุงู ู ุฏูู ุณุงุฏูโุณุช ฺฉู ูุดูู ูโุฏู ฺู ุงุชูุงู ุฏุฑ ูุฑุงุญู **Mount** ู **Unmount** ฺฉุงููพูููุช ูโุงูุชู ู ฺุทูุฑ `useEffect` ู ุชุงุจุน `cleanup` ฺฉุงุฑ ูโฺฉูู:

---

### โ ฺฉุฏ ุฏูู:

```jsx
import { useEffect, useState } from "react";

function Child() {
  useEffect(() => {
    console.log("๐ข Child mounted");

    return () => {
      console.log("๐ด Child unmounted");
    };
  }, []);

  return <div>I'm the child</div>;
}

export default function Parent() {
  const [show, setShow] = useState(true);

  return (
    <div>
      <button onClick={() => setShow(!show)}>Toggle Child Component</button>

      {show && <Child />}
    </div>
  );
}
```

---

### ๐ก ุชูุถุญ:

| ุงุชูุงู ฺฉู ูโุงูุชู                                          | ูุงฺฏ ฺฉู ูโุจู           |
| ---------------------------------------------------------- | ------------------------- |
| ุงููู ุจุงุฑ ฺฉู ฺฉุงููพูููุช `Child` ูุดูู ุฏุงุฏู ูุดู               | `๐ข Child mounted`        |
| ููุช ุฏฺฉูู ุฑู ูโุฒู ู ฺฉุงููพูููุช `Child` ูุฎู ูุดู (unmount) | `๐ด Child unmounted`      |
| ุงฺฏุฑ ุฏูุจุงุฑู ุฏฺฉูู ุฑู ุจุฒู ู `Child` ุจุฑฺฏุฑุฏู                   | ุฏูุจุงุฑู `๐ข Child mounted` |

---

### ๐ ูฺฉุชู ููู:

ุฏุฑ **React 18 (dev mode)** ู ููุช ฺฉู `<React.StrictMode>` ุฏุฑ ูุงู `main.jsx` ุง `index.js` ูุนุงููุ ุงู ุงุชูุงู ูโุงูุชู:

- ฺฉุงููพูููุช `Child` ุฏูุจุงุฑ mount ู unmount ูุดู **ููุท ุจุฑุง ุชุณุช**.

๐ง ุงู ุนู ุญุช ุจุฏูู ฺฉูฺฉ ฺฉุฑุฏู ุฑู ุฏฺฉููุ ููฺฉูู ุชู ฺฉูุณูู ุงูู ุจุจู:

```
๐ข Child mounted
๐ด Child unmounted
๐ข Child mounted
```

โ ูู ุฏุฑ **production build** ููุท ฺฉ ุจุงุฑ mount ูุดู. ูพุณ ุฌุง ูฺฏุฑุงู ูุณุช!

---

---

ุนุงู! ุงูู ูุณุฎูโุง ุงุฒ ูููู ุฏูู ุจุง `window.addEventListener` ฺฉู ุฏููุงู ูุดูู ูโุฏู ฺุฑุง `return` (ูพุงฺฉุณุงุฒ ุง cleanup) ุชู `useEffect` ูุงุฒูู:

---

### โ ุฏูู ฺฉุงูู ุจุง `addEventListener`

```jsx
import { useEffect, useState } from "react";

function Child() {
  useEffect(() => {
    const clickHandler = () => {
      console.log("๐ฑ Window clicked");
    };

    window.addEventListener("click", clickHandler);
    console.log("๐ข Event listener added");

    return () => {
      window.removeEventListener("click", clickHandler);
      console.log("๐ด Event listener removed");
    };
  }, []);

  return <div>Click anywhere in window</div>;
}

export default function Parent() {
  const [show, setShow] = useState(true);

  return (
    <div>
      <button onClick={() => setShow(!show)}>Toggle Child Component</button>

      {show && <Child />}
    </div>
  );
}
```

---

### ๐งช ุชุณุช ฺฉู ฺู ูโุจูุ

1. ุงููุด:

   ```
   ๐ข Event listener added
   ```

2. ููุช ุฑู ุฏฺฉูู ฺฉูฺฉ ูโฺฉู ู `Child` ุญุฐู ูโุดู:

   ```
   ๐ด Event listener removed
   ```

3. ุจุนุฏ ุฏูุจุงุฑู ฺฉู `Child` ุจุฑูโฺฏุฑุฏู:

   ```
   ๐ข Event listener added
   ```

4. ุงฺฏู `return` ุฑู ุจุฑูุฏุงุฑ ู ูพุงฺฉุณุงุฒ ูฺฉูุ ฺ ูุดูุ

   - ูุฑ ุจุงุฑ ฺฉู `Child` ุฏูุจุงุฑู mount ุจุดูุ ู `clickHandler` ุฌุฏุฏ ุงุถุงูู ูุดู ู **ุฑู ูุฑ ฺฉูฺฉ ฺูุฏ ุจุงุฑ ููฺฏ ูโฺฏุฑ!**

---

### โ ูุชุฌูโฺฏุฑ:

- `addEventListener` ูุง ู ููุงุฑุฏ ูุดุงุจูุ ุงฺฏุฑ **ูพุงฺฉุณุงุฒ ูุดู**ุ ุจุงุนุซ **ูุดุช ุญุงูุธู (memory leak)** ุง **ุฑูุชุงุฑ ุบุฑูุงุจู ูพุดโุจู** ูุดู.
- ูพุณ ูุฑ ุฌุง ุงุฒ ููุงุจุน ุจุฑูู (ูุซู eventุ timerุ API subscriptionุ socket) ุงุณุชูุงุฏู ูโฺฉูุ ุงุฏุช ุจุงุดู `return` ุจุฐุงุฑ.

---

---

ุญุชูุงูุ ุงู ูููู ูุซุงู ูุจูู ฺฉู ููุท `window` ุฑู ุจุง ฺฉ `div` ุฎุงุต ุฌุงฺฏุฒู ฺฉุฑุฏูุ ู ููู ฺุฒ ุฏฺฏู (ูุซู `useEffect`ุ `cleanup` ู ูุงฺฏโูุง) **ุจุฏูู ุชุบุฑ** ูููุฏู:

---

### โ ฺฉุฏ ููุง (ุจุง `div` ุจู ุฌุง `window`):

```jsx
import { useEffect, useRef, useState } from "react";

function Child() {
  const boxRef = useRef(null);

  useEffect(() => {
    const clickHandler = () => {
      console.log("๐ฑ Box clicked");
    };

    const box = boxRef.current;
    if (box) {
      box.addEventListener("click", clickHandler);
      console.log("๐ข Event listener added");
    }

    return () => {
      if (box) {
        box.removeEventListener("click", clickHandler);
        console.log("๐ด Event listener removed");
      }
    };
  }, []);

  return (
    <div
      ref={boxRef}
      style={{
        width: "300px",
        height: "150px",
        backgroundColor: "#ffddaa",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        marginTop: "1rem",
        border: "2px dashed #333",
        cursor: "pointer",
      }}
    >
      Click inside this box
    </div>
  );
}

export default function Parent() {
  const [show, setShow] = useState(true);

  return (
    <div>
      <button onClick={() => setShow(!show)}>Toggle Child Component</button>
      {show && <Child />}
    </div>
  );
}
```

---

### ๐ ุชูุงูุชุด ุจุง ูุณุฎูโ `window`:

| ูฺฺฏ                  | ุงุณุชูุงุฏู ุงุฒ `window`      | ุงุณุชูุงุฏู ุงุฒ `div`           |
| ---------------------- | ------------------------ | -------------------------- |
| ูุญู ฺฉูฺฉ               | ฺฉูฺฉ ุฑู ฺฉู ุตูุญู         | ููุท ฺฉูฺฉ ุฑู ุงูู `div` ุฎุงุต |
| ฺฉูุชุฑู ุฏููโุชุฑ          | ุณุฎุชโุชุฑ                   | ุฑุงุญุชโุชุฑ ู ุงุฒูููโุชุฑ        |
| ุงุญุชูุงู ุจุฑูุฒ ูุดฺฉู ุญุงูุธู | ุจุดุชุฑ ุงฺฏู cleanup ูุฐุงุฑู | ฺฉูุชุฑ ฺูู ูุญุฏูุฏูโุฏุงุฑู       |

---

ฺฉุฏ ุดูุง ฺฉ ูุซุงู ุฎู ุฎูุจ ุงุฒ ููุงูู `useRef`, `useEffect`, ู `unmount` ุดุฏู ฺฉุงููพูููุชโูุงุณุช. ุจุงู ูุฏู ุจู ูุฏู ุจุง ุฏูุช ุจุฑุฑุณ ฺฉูู ฺฉู ุฏุฑ ุงู ฺฉุฏ ฺู ุงุชูุงู ูโุงูุชู.

---

## ๐ง ูุฏู ฺฉู

ูโุฎูุงู:

1. ููุท ููุช `Child` ุฏุฑ DOM ูุณุช (ุนู mount ุดุฏู)ุ ุจู ฺฉ div ุฎุงุต ฺฏูุด ุจุฏู ฺฉู ุฑูุด ฺฉูฺฉ ุดุฏู ุง ูู.
2. ุฒูุงู ฺฉู `Child` ุงุฒ DOM ุญุฐู ุดุฏ (ุนู unmount ุดุฏ)ุ ุงูู event listener ุฑู ูู ูพุงฺฉ ฺฉูู.
3. ููู ุงูุง ุฑู ุจุฏูู ุงุณุชูุงุฏู ุงุฒ `window` ุงูุฌุงู ุจุฏูุ ุจูฺฉู ููุท ุฑู ฺฉ `div` ุฎุงุต ฺฏูุด ุจุฏู.

---

## ๐ ุจุฎุด ุจู ุจุฎุด ุจุฑุฑุณ

### ๐น `useRef` ุฏุฑ React

```js
const boxRef = useRef(null);
```

- `useRef` ฺฉ **ูุชุบุฑ ูุงุจูโุชุบุฑ** (mutable) ูโุณุงุฒู ฺฉู ุฏุฑ ุทูู ุฑูุฏุฑูุง ูุฎุชูู **ุซุงุจุช ูโูููู**.
- `boxRef.current` ูโุชููู ุจู ฺฉ ุงูููุช DOM ุงุดุงุฑู ฺฉูู.
- ุงูุฌุง ูโุฎูุงู ุจู `div` ููุฑุฏ ูุธุฑ ุงุดุงุฑู ฺฉูู ุชุง ุจุชููู ุจูุด `addEventListener` ฺฉูู.

---

### ๐น return ุจุฎุด `Child`:

```jsx
<div ref={boxRef} className="divBox1">
  Click inside this box
</div>
```

- ุงู div ุจู ูุณูู `ref` ฺฉูุชุฑู ูโุดู.
- ููุช ฺฉุงููพูููุช `Child` mount ุดุฏุ React ููุฏุงุฑ `boxRef.current` ุฑู ุจุฑุงุจุฑ ุจุง **ููู div** ูุฑุงุฑ ูโุฏู.

---

### ๐น useEffect ุฏุฑ `Child`

```js
useEffect(() => {
  const clickHandler = () => {
    console.log("๐ฑ Box clicked");
  };

  const box = boxRef.current;
  if (box) {
    box.addEventListener("click", clickHandler);
    console.log("๐ข Event listener added");
  }

  return () => {
    if (box) {
      box.removeEventListener("click", clickHandler);
      console.log("๐ด Event listener removed");
    }
  };
}, []);
```

๐ท **ฺ ูโฺฉููุ**

1. ููุช `Child` mount ุดุฏ:

   - `boxRef.current` ุจู div ูุตู ุดุฏู.
   - ุฑู ุงูู div ู event listener ุงุถุงูู ูโุดู ุจุฑุง ฺฉูฺฉ.
   - `๐ข Event listener added` ฺุงูพ ูโุดู.

2. ููุช `Child` unmount ุจุดู (ูุซูุงู ุจุง `setShow(false)`):

   - ุชุงุจุน clean-up ุงุฌุฑุง ูโุดู.
   - ุงูู event listener ุงุฒ ุฑู div ุญุฐู ูโุดู.
   - `๐ด Event listener removed` ฺุงูพ ูโุดู.

โฑ ุงู ุฏููุงู ฺฉ ุจุงุฑ ุงุฌุฑุง ูโุดู ฺูู `[]` ุจู ุนููุงู dependency ุฏุงุฏู ุดุฏูุ ุนู ููุท ุฏุฑ mount ู unmount.

---

### ๐น ุจุฎุด `A16`

```js
const [show, setShow] = useState(true);
```

- state `show` ุชุนู ูโฺฉูู ฺฉู `Child` ุจุงุฏ ููุงุด ุฏุงุฏู ุจุดู ุง ูู.

---

### ๐ ุฏฺฉูู Toggle

```jsx
<button onClick={() => setShow(!show)}>Toggle Child Component</button>;
{
  show && <Child />;
}
```

- ููุช ุฑู ุฏฺฉูู ฺฉูฺฉ ูโฺฉู:

  - `show` ุชุบุฑ ูโฺฉูู.
  - ุงฺฏู `show === false` ุจุดู:

    - ฺฉุงููพูููุช `Child` ุงุฒ DOM ุญุฐู ูุดู โ **unmount**
    - clean-up ุฏุฑ `useEffect` ุงุฌุฑุง ูุดู.

  - ุงฺฏู `show === true` ุจุดู:

    - `Child` ุฏูุจุงุฑู ุจู DOM ุงุถุงูู ูุดู โ **mount**
    - ุฏูุจุงุฑู useEffect ุงุฌุฑุง ูุดู.

---

## ๐ ุฎูุงุตู ุฑููุฏ ุงุชูุงูุงุช:

1. ุตูุญู ููุฏ ูุดู:

   - `Child` ููุงุด ุฏุงุฏู ูุดู.
   - `div` ุจู `boxRef` ูุชุตู ูุดู.
   - event listener ุงุถุงูู ูุดู.

2. ุฑู `div` ฺฉูฺฉ ฺฉู โ `๐ฑ Box clicked`
3. ุฑู ุฏฺฉูู "Toggle" ฺฉูฺฉ ฺฉู:

   - `Child` ุญุฐู ูุดู โ event listener ูพุงฺฉ ูุดู โ `๐ด Event listener removed`

4. ุฏูุจุงุฑู ุฑู "Toggle" ุจุฒู:

   - `Child` ุงุถุงูู ูุดู โ event listener ุฏูุจุงุฑู ุซุจุช ูุดู โ `๐ข Event listener added`

---

## โ ฺุฑุง `useRef` ูููู ุงูุฌุงุ

- ฺูู ููโุชููู ูุณุชููุงู ุจู DOM ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดู ุฏุฑ React.
- `useRef` ูพู ุจู React ู DOM ูุงูุนู.
- ุงฺฏู `ref` ูุจุงุดูุ ููโุชููู ุจฺฏู ุฑู **ฺฉุฏูู ุงูููุช ุฎุงุต** ฺฉูฺฉ ุดุฏู.
- ู ููฺูู ุจุง ุงุณุชูุงุฏู ุงุฒ `ref` ูโุชููู ููุท ุฒูุงู listener ุจุฐุงุฑู ฺฉู ุงูููุช ูุงูุนุงู ุฏุฑ DOM ูุณุช.

---

ุณุคุงู ุนุงูโุง ูพุฑุณุฏ. ุจุงู ุฏูู ุจุฑุฑุณ ฺฉูู ฺฉู ฺุฑุง ุชู ฺฉุฏ ุฒุฑ ุฏูุจุงุฑ `if (box)` ููุดุชู ู ฺ ฺฉุงุฑ ูโฺฉูู:

```js
const box = boxRef.current;

if (box) {
  box.addEventListener("click", clickHandler);
  console.log("๐ข Event listener added");
}

return () => {
  if (box) {
    box.removeEventListener("click", clickHandler);
    console.log("๐ด Event listener removed");
  }
};
```

---

## ๐ง ุงูู ุงุฒ ููู: ฺุฑุง `boxRef.current` ููฺฉูู **null** ุจุงุดูุ

ููุฏุงุฑ ุงููู `useRef(null)`ุ ููููโุทูุฑ ฺฉู ุฏุฑ ุงูู ฺฉุฏ ูโุจูุ `null` ูุณุช:

```js
const boxRef = useRef(null);
```

React ุฒูุงู ููุฏุงุฑ `boxRef.current` ุฑู ููุฏุงุฑุฏู ูโฺฉูู ฺฉู:

- ุงูููุช ูุฑุจูุทู (ุงูุฌุง: `<div ref={boxRef}>`) **ุจู ุทูุฑ ฺฉุงูู ุฏุฑ DOM ุณุงุฎุชู ุดุฏู ุจุงุดู**.

ุงูุง ฺูู `useEffect` ุจุนุฏ ุงุฒ ุฑูุฏุฑ ุงุฌุฑุง ูโุดูุ **ุจู ุงุญุชูุงู ุฒุงุฏ** ููุฏุงุฑ `boxRef.current` ุฏฺฏู null ูุณุชุ ูู ุจุฑุง ุงุทููุงู ููุดู ุจุฑุฑุณุด ูโฺฉูู.

---

## โ ุญุงูุง ุชูุถุญ `if (box)`

### โณ๏ธ ุฏุฑ ุจุฎุด mount (ุงูุฒูุฏู event listener):

```js
if (box) {
  box.addEventListener("click", clickHandler);
}
```

- ุงูุฌุง ุจุฑุฑุณ ูโฺฉูู ฺฉู `boxRef.current` (ฺฉู ุฏุฑ `box` ุฑุฎุชู) ูุงูุนุงู ูุฌูุฏ ุฏุงุฑู ุง ูู.
- ุนู ุขุง `div` ุจู DOM ูุตู ุดุฏู ุง ูู.
- ุงฺฏุฑ ูุตู ูุดุฏู ุจุงุดู (ุนู `null` ุจุงุดู)ุ ูุจุงุฏ `addEventListener` ุจุฒููุ ฺูู ุงุฑูุฑ ูโุฎูุฑู:
  โ `Cannot read property 'addEventListener' of null`

### โณ๏ธ ุฏุฑ ุจุฎุด unmount (ูพุงฺฉโฺฉุฑุฏู event listener):

```js
if (box) {
  box.removeEventListener("click", clickHandler);
}
```

- ุจุงุฒ ูู ุจุฑุฑุณ ูโฺฉูู ฺฉู ุขุง `box` ูููุฒ ูุฌูุฏ ุฏุงุฑู ุง ูู.
- ููฺฉูู ุฏุฑ ุดุฑุงุท ุฎุงุตุ ูุซูุงู ูุจู ุงุฒ ุงูฺฉู `useEffect` ุงุฌุฑุง ุจุดู ุง ุฏุฑ ุญุงูุช ุฎุทุงุ `box` ููุฏุงุฑ ูุฏุงุดุชู ุจุงุดู.
- ุง ููฺฉูู `Child` ุจู ุณุฑุนุช mount ู unmount ุจุดู ู ุฑโุงฺฉุช ูููุฒ ref ุฑู ููุฏุงุฑ ูุฏุงุฏู ุจุงุดู.

---

## โ ฺุฑุง ุงู ฺฺฉ ฺฉุฑุฏู ููููุ

ุจู ุฏูุงู ุฒุฑ:

1. **ุงููโุณุงุฒ ฺฉุฏ** ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุทุง ุฏุฑ ุฒูุงู ุงุฌุฑุง.
2. ุฌููฺฏุฑ ุงุฒ **ุฏุณุชุฑุณ ุจู null ุง undefined** ฺฉู ุจุงุนุซ crash ุดุฏู ุจุฑูุงูู ูุดู.
3. ุงุทููุงู ุงุฒ ุงูฺฉู ููุท ุฑู DOM ูุงูุน ฺฉุงุฑ ูโฺฉูู.

---

## ๐ ูฺฉุชู ูพุดุฑูุชู:

ุชู ุงู ฺฉุฏ:

```js
const box = boxRef.current;
```

ูุง ููุท **ฺฉ ุจุงุฑ** ููุฏุงุฑ `boxRef.current` ุฑู ุฏุงุฎู ูุชุบุฑ `box` ุฑุฎุชู (ุฏุงุฎู useEffect).
ุนู ุงฺฏู `boxRef.current` ุฏุฑ ุงูู ูุญุธู `null` ุจุงุดูุ `box` ูู `null` ูโูููู ุชุง ุขุฎุฑ.
ุจุฑุง ููู ุชู ูุฑ ุฏู ุฌุง ุจุฑุฑุณุด ูโฺฉูู.

---

## โ ูุชุฌูโฺฏุฑ

- ูุฑ ุฌุง ุจุฎูุง ุจุง `ref.current` ฺฉุงุฑ ฺฉูุ ุจูุชุฑู ูุจูุด ุจุง `if (box)` ฺฺฉ ฺฉู.
- ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดู ฺฉุฏ ููุงูู ู ุจุฏูู ุฎุทุง ุจููููุ ูุฎุตูุตุงู ููุช ุจุง DOM ูุงูุน ุณุฑ ู ฺฉุงุฑ ุฏุงุฑ.

---
---
ุญุชูุงู ๐
ฺฉุฏ ฺฉู ุฏุงุฏ ฺฉ ูุฑู ุณุงุฏู ุฏุฑ ุฑโุงฺฉุช ุงุณุช ฺฉู ุงุฒ ุฏู ููุฏ `firstName` ู `lastName` ุชุดฺฉู ุดุฏู ู ุจู ุตูุฑุช ุญุฑููโุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ state ูุงุญุฏ ู ฺฉ ุชุงุจุน ูุดุชุฑฺฉ ุจุฑุง ูุฏุฑุช ุชุบุฑุงุช ูพุงุฏูโุณุงุฒ ุดุฏู. ุจุฑู ุฎุท ุจู ุฎุท ุจุง ุชูุถุญ ูุงุฑุณ:

---

### ๐น 1. ุงููพูุฑุช ู ุชุนุฑู state:

```jsx
import { useState } from "react";
```

* ูุง ุงุฒ hook `useState` ุงุณุชูุงุฏู ูโฺฉูู ุชุง ุฏุงุฏูโูุง ูุฑู ุฑู ุฐุฎุฑู ู ูุฏุฑุช ฺฉูู.

```jsx
const [formData, setFormData] = useState({
  firstName: "",
  lastName: "",
});
```

* `formData`: ฺฉ ุขุจุฌฺฉุช ุงุณุช ฺฉู ุฏู ููุฏ `firstName` ู `lastName` ุฏุงุฑุฏ.
* ููุฏุงุฑ ุงููู ูุฑ ุฏู ููุฏ ุฎุงู ุงุณุช.
* `setFormData`: ุชุงุจุน ุจุฑุง ุจูโุฑูุฒุฑุณุงู `formData`.

---

### ๐น 2. ุชุงุจุน ุชุบุฑ ููุฏุงุฑ inputูุง:

```jsx
function handleChange(e) {
  const { name, value } = e.target;
  setFormData((prev) => ({
    ...prev,
    [name]: value,
  }));
}
```

**ุชูุถุญ:**

* `e.target`: ูููู input ูุนูโุงู ฺฉู ฺฉุงุฑุจุฑ ุฏุงุฎูุด ุชุงูพ ูโฺฉูู.
* `name`: ูุงู input (ูุซูุงู `"firstName"` ุง `"lastName"`).
* `value`: ููุฏุงุฑ ูุนู input.
* `[name]: value`: ุนู ููุฏ ฺฉู ูุงูุด ูุณุช `name`ุ ููุฏุงุฑุด ุฑู ุจุฐุงุฑ `value`. ุงู ุจุงุนุซ ูโุดู ูุง ุจุชููู ููุท ุจุง ฺฉ ุชุงุจุนุ ฺูุฏ ููุฏ ูุฎุชูู ุฑู ฺฉูุชุฑู ฺฉูู.
* `...prev`: ุนู ุจููโ ููุงุฏุฑ ูุจู ุฑู ุญูุธ ฺฉู ู ููุท ุงูู ฺฉ ุฑู ฺฉู ุนูุถ ุดุฏูุ ุขูพุฏุช ฺฉู.

๐ **ูุซุงู ฺฉุงุฑุจุฑุฏ:**
ุงฺฏุฑ `firstName` ููุฏุงุฑุด `Ali` ุจุงุดู ู ฺฉุงุฑุจุฑ ุจุฑู ุชู `lastName` ฺุฒ ุชุงูพ ฺฉููุ ููุท `lastName` ุขูพุฏุช ูโุดู ู `firstName` ุงุฒ ุจู ููโุฑู.

---

### ๐น 3. ุชุงุจุน ุงุฑุณุงู ูุฑู:

```jsx
function handleSubmit(e) {
  e.preventDefault();
  console.log("ูุฑู ุงุฑุณุงู ุดุฏ:", formData);
  // Reset if needed:
  // setFormData({ firstName: "", lastName: "" });
}
```

* `e.preventDefault()` ุฌูู ุฑูุฑุด ุดุฏู ุตูุญู ุจุนุฏ ุงุฒ ุงุฑุณุงู ูุฑู ุฑู ูโฺฏุฑู.
* `console.log(...)`: ฺุงูพ ููุฏุงุฑ ูุนู ูุฑู.
* (ุงุฎุชุงุฑ) ุงฺฏุฑ ุจุฎูุง ูุฑู ุจุนุฏ ุงุฒ ุงุฑุณุงู ุฎุงู ุจุดูุ ูโุชูู ุจุง `setFormData` ููุงุฏุฑ ุฑู ูพุงฺฉ ฺฉู (ฺฉุฏุด ฺฉุงููุช ุดุฏู).

---

### ๐น 4. ุณุงุฎุชุงุฑ JSX ู ูุฑู:

```jsx
<form onSubmit={handleSubmit}>
```

* ููุช ูุฑู ุงุฑุณุงู ูโุดูุ ุชุงุจุน `handleSubmit` ุงุฌุฑุง ูโุดู.

```jsx
<input
  type="text"
  name="firstName"
  placeholder="First Name"
  value={formData.firstName}
  onChange={handleChange}
/>
```

* ุงู input:

  * ููุฏุงุฑุด ุฑู ุงุฒ `formData.firstName` ูโฺฏุฑู (ฺฉูุชุฑูโุดุฏู ุง Controlled).
  * ูุฑ ุชุบุฑ ุฏุฑุด ุฑุฎ ุจุฏูุ `handleChange` ุงุฌุฑุง ูโุดู.
  * ฺูู `name="firstName"` ูุณุชุ ุชู ุชุงุจุน `handleChange` ููุฏุงุฑุด ุชู `formData.firstName` ุฐุฎุฑู ูโุดู.

```jsx
<input
  type="text"
  name="lastName"
  placeholder="Last Name"
  value={formData.lastName}
  onChange={handleChange}
/>
```

* ุงู ฺฉ ูู ูุดุงุจู input ุงููุ ูู ุจุฑุง `lastName`.

```jsx
<button type="submit">ุซุจุช</button>
```

* ุฏฺฉููโุง ฺฉู ูุฑู ุฑู ุงุฑุณุงู ูโฺฉูู ู `handleSubmit` ุฑู ูุนุงู ูโฺฉูู.

---

## โ ุฎูุงุตู ูุฒุงุง

| ูฺฺฏ                      | ุชูุถุญ                              |
| -------------------------- | ---------------------------------- |
| ฺฉ state ุจุฑุง ูููโ ููุฏูุง | ูุฏุฑุช ุฑุงุญุชโุชุฑ                     |
| ุชุงุจุน onChange ูุดุชุฑฺฉ        | ฺฉูุชุฑ ุดุฏู ฺฉุฏุ ุณุงุฏฺฏ ฺฏุณุชุฑุด ูุฑู       |
| Controlled Components      | ุงุทููุงู ุงุฒ ููุงููฺฏ ุจู DOM ู React |

---
---
