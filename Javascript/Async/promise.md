ุฎู ุฎูุจ ุณูุงู ูพุฑุณุฏ ๐
ูุฑ ุฏูุชุง ฺฉุฏ ฺฉู ููุดุช ุจุง **async/await** ููุดุชู ุดุฏูุ ูู ุดุฑุงุทุดูู ูุฑู ุฏุงุฑู.
ุจุฑู ูุฑุญูู ุจู ูุฑุญูู:

---

## ๐น ฺฉุฏ ุงูู (getUsers)

```js
async function getUsers() {
  const users = [{ name: "ali" }, { name: "negar" }];
  const isOk = Math.random() < 0.5;

  if (isOk) {
    return users; // ูุซู resolve
  } else {
    throw new Error("Use a vpn"); // ูุซู reject
  }
}
```

### ุงูุฌุง ฺ ุงุชูุงู ูโุงูุชูุ

- ุชุงุจุน `getUsers` **async** ูุณุช โ ุนู **ุฎูุฏฺฉุงุฑ ฺฉ Promise ุจุฑูโฺฏุฑุฏููู**.
- ุฏุงุฎู ุชุงุจุน:

  - ู ุขุฑุงู ุงุฒ ฺฉุงุฑุจุฑุงู ุณุงุฎุชู.
  - ู ุดุฑุท ุชุตุงุฏู ุฏุงุฑู (`Math.random()`).
  - ุงฺฏู ุดุฑุท ุฏุฑุณุช ุจุงุดู โ `return users` โ ูุนุงุฏู **resolve(users)**.
  - ุงฺฏู ุดุฑุท ุบูุท ุจุงุดู โ `throw new Error("Use a vpn")` โ ูุนุงุฏู **reject("Use a vpn")**.

---

### ุชุงุจุน `run`

```js
async function run() {
  try {
    const res = await getUsers();
    console.log(res);
  } catch (err) {
    console.log(err.message);
  }
}

run();
```

- ุงูุฌุง ุจุง `await` ุตุจุฑ ูโฺฉูู ุชุง Promise ุจุฑฺฏุฑุฏู.
- ุงฺฏู `resolve` ุดุฏ โ ููุฏุงุฑุด ุชู `res` ุฐุฎุฑู ูุดู.
- ุงฺฏู `reject` ุดุฏ โ ุฎุทุง ูโุฑู ุชู `catch`.

๐ ูพุณ ุงู ูุซุงู ุจุดุชุฑ ุจุฑุง **ุดุจูโุณุงุฒ ุฏุณุช ฺฉ Promise** ูุณุชุ ุนู ุฎูุฏุช ูุดุฎุต ูโฺฉู ฺฉู resolve ุง reject ุจุดู.

---

## ๐น ฺฉุฏ ุฏูู (getAdvice)

```js
async function getAdvice() {
  try {
    const res = await fetch("https://api.adviceslip.com/advice");
    if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
    const data = await res.json();
    console.log(data.slip.advice);
  } catch (err) {
    console.error("Failed to fetch advice:", err);
  }
}
```

### ุงูุฌุง ฺ ุงุชูุงู ูโุงูุชูุ

- ุงู ุจุงุฑ ุฏุงุฑู ุงุฒ **fetch API** ุงุณุชูุงุฏู ูโฺฉูู โ ุฎูุฏุด ฺฉ **Promise ูุงูุน** ุจุฑูโฺฏุฑุฏููู (ุจุฑุง ุฏุฑุฎูุงุณุช HTTP).
- `await fetch(...)` ุตุจุฑ ูโฺฉูู ุชุง ูพุงุณุฎ ุณุฑูุฑ ุจุงุฏ.
- ุจุนุฏ ฺฺฉ ูโฺฉูู:

  ```js
  if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
  ```

  ฺูู ุญุช ุงฺฏู ุงูุชุฑูุช ูุตู ุจุงุดูุ ููฺฉูู ุณุฑูุฑ ุฎุทุง ุจุฏู (ูุซูุงู 404 ุง 500).

- `await res.json()` โ ุฏุงุฏูโูุง ุฑู ุงุฒ ูุฑูุช JSON ุจู ุดุก ุฌุงูุงุงุณฺฉุฑูพุช ุชุจุฏู ูโฺฉูู.
- ุฏุฑ ููุงุช ููุฏุงุฑ (`data.slip.advice`) ุฑู ูุงฺฏ ูโฺฉูู.

๐ ุงู ูุซุงู ุจุฑุง **ฺฉุงุฑ ุนูู ุจุง Promiseูุง** ูุณุชุ ุฌุง ฺฉู ูุงูุนุงู ุจุงุฏ ููุชุธุฑ ูพุงุณุฎ ฺฉ ุณุฑูุฑ ุจูููุ ูู ููุท ุดุจูโุณุงุฒ ุฏุณุช.

---

## ๐ ุชูุงูุชโูุง ุงุตู

| ูฺฺฏ           | getUsers (ุจุงูุง)                      | getAdvice (ูพุงู)                         |
| --------------- | -------------------------------------- | ------------------------------------------ |
| ููุน Promise     | ุฏุณุช ุณุงุฎุชู ุดุฏู ุจุง `return` ู `throw`   | Promise ูุงูุน ุจุฑฺฏุฑุฏููุฏูโุดุฏู ุชูุณุท `fetch`   |
| ููุจุน ุฏุงุฏู       | ู ุขุฑุงู ุซุงุจุช ุฏุงุฎู ฺฉุฏ                  | ุฏุงุฏู ุงุฒ ุณุฑูุฑ (API ุงูุชุฑูุช)                |
| ุดุจูโุณุงุฒ/ูุงูุน | ููุท ุจุฑุง ุชูุฑู async/await ู try/catch | ูููููโ ูุงูุน ุงุฒ ุงุณุชูุงุฏู ุฏุฑ ูพุฑูฺู          |
| ุฎุทุงูุง           | ุชุตุงุฏู ุงุฌุงุฏ ูุดู (`Math.random`)      | ููฺฉูู ุงุฒ ุณุฑูุฑ ุจุงุฏ ุง ุจู ุฎุงุทุฑ ุงูุชุฑูุช ุจุงุดู |

---

๐ ุฎูุงุตู:

- **ฺฉุฏ ุงูู** ุจุฑุง ุชูุฑู ููุงูู ูพุงูโุง async/await ู ุงูฺฉู ุจุฏูู `return` = resolve ู `throw` = reject.
- **ฺฉุฏ ุฏูู** ุจุฑุง ุงุณุชูุงุฏู ูุงูุน ุงุฒ async/await ุฏุฑ ฺฉุงุฑ ุจุง APIูุง (ูุซู ฺฏุฑูุชู ุฏุงุฏู ุงุฒ ุณุฑูุฑ ุจุง fetch).

---

---

ุขุฑู ุฏููุงู ๐ฏ

ุชุงุจุน **`fetch`** ุฎูุฏุด ุจู ุตูุฑุช ูพุดโูุฑุถ **ฺฉ Promise ุจุฑูโฺฏุฑุฏููู**.

ุนู ููุช ูโููุณ:

```js
const res = fetch("https://api.adviceslip.com/advice");
```

ุงูุฌุง `res` ุฏุฑ ูููู ูุญุธู **ู Promise** ูุณุช (ูู ุฎูุฏ ุฌูุงุจ ุณุฑูุฑ).
ุจู ููู ุฏูู ูุงุฒูู ฺฉู:

- ุง ุงุฒ `.then().catch()` ุงุณุชูุงุฏู ฺฉู:

  ```js
  fetch("https://api.adviceslip.com/advice")
    .then((res) => res.json())
    .then((data) => console.log(data))
    .catch((err) => console.error(err));
  ```

- ุง ุงุฒ `await` ุงุณุชูุงุฏู ฺฉู:

  ```js
  const res = await fetch("https://api.adviceslip.com/advice");
  const data = await res.json();
  console.log(data);
  ```

๐ ูพุณ ูุฑูุด ุจุง ูุซุงู ุจุงูุง (`getUsers`) ุงูู ฺฉู ุงููุฌุง ุฎูุฏุช **Promise ุฑู ุณุงุฎุช**ุ ูู ุงูุฌุง ุฎูุฏ `fetch` ุจุฑุงุช ู **Promise ุขูุงุฏู** ูโุฏู.

ูโุฎูุง ู ุฌุฏูู ููุงุณู ุจู `fetch` ู `setTimeout` ุจุฒูู ุชุง ฺฉุงูู ุจุฑุงุช ุฑูุดู ุดูุ
