ุฎู ุฎูุจู ๐
ูุจู ุงุฒ ุงูฺฉู ุจุฑู ุณุฑุงุบ **Promises** ู ุณุคุงู ฺฉูฺฺฉ:

๐ ุชู ุงูุงู ุฏุฑุจุงุฑูโ `callbacks` ุง ูููู ุชุงุจุนโูุง ุจุงุฒฺฏุดุช ุฏุฑ ุฌุงูุงุงุณฺฉุฑูพุช ฺุฒ ูโุฏููุ
(ูุซูุงู ุงูฺฉู ู ุชุงุจุน ุฑู ุจู ุนููุงู ูุฑูุฏ ุจู ุชุงุจุน ุฏฺฏู ูุฏู ู ุจุนุฏุงู ุงุฌุฑุง ูุดู)

ุงู ุฑู ูโูพุฑุณู ฺูู **Promises** ุงููุฏู ุชุง ูุดฺฉู ุงุตู `callbacks` ุฑู ุญู ฺฉูู.

ูุฎูุง ุงูู ูู ุฎู ฺฉูุชุงู ุจุฑุงุช ุชูุถุญ ุจุฏู **callback** ฺ ุจูุฏุ ุจุนุฏ ุจุฑู ุณุฑุงุบ **Promises**ุ

---

---

ุนุงูู ๐ ูพุณ ุจุฐุงุฑ ุงุฒ ูููุฌุง ุดุฑูุน ฺฉูู.

### 1. Callback ฺูุ

ุชู ุฌุงูุงุงุณฺฉุฑูพุช ุจุนุถ ฺฉุงุฑูุง **ุฒูุงูโุจุฑ** ูุณุชูุ ูุซู:

- ุฎููุฏู ุฏุงุฏู ุงุฒ ุงูุชุฑูุช (fetch)
- ุชุงูุฑ (`setTimeout`)
- ุฎููุฏู ูุงู (ุฏุฑ Node.js)

ุฌุงูุงุงุณฺฉุฑูพุช ููโุฎูุงุฏ ููุช ููุชุธุฑ ุงู ฺฉุงุฑุง ูุณุชุ ูููโฺ ููู ุจุดู.
ูพุณ ูฺฏู:

> ยซุจุงุดูุ ูู ุงู ฺฉุงุฑ ุฑู ุดุฑูุน ูโฺฉูู. ููุช ุชููู ุดุฏุ ู ุชุงุจุน ฺฉู ุชู ุจูู ุฏุงุฏ ุฑู ุตุฏุง ูโุฒูู.ยป

ุงูู ุชุงุจุน ูููู **callback** ูุณุช.

---

### ูุซุงู ุณุงุฏู:

```js
console.log("ุดุฑูุน");

setTimeout(() => {
  console.log("ณ ุซุงูู ฺฏุฐุดุช");
}, 3000);

console.log("ูพุงุงู");
```

ุฎุฑูุฌ:

```md
ุดุฑูุน
ูพุงุงู
ณ ุซุงูู ฺฏุฐุดุช
```

๐ ูโุจูุ `setTimeout` ุจุนุฏ ุงุฒ ณ ุซุงูู **callback** ุฑู ุงุฌุฑุง ฺฉุฑุฏ.

---

### ูุดฺฉู Callbackูุง

ุงฺฏู ฺูุฏุชุง ฺฉุงุฑ ุฒูุงูโุจุฑ ูพุดุช ุณุฑ ูู ุฏุงุดุชู ุจุงุดูุ ฺฉุฏูุงููู ุดุจู โูุฑุฏุจููโ ูุดู:

```js
doSomething(() => {
  doSomethingElse(() => {
    doThirdThing(() => {
      console.log("ููู ฺฉุงุฑูุง ุงูุฌุงู ุดุฏ!");
    });
  });
});
```

ุจู ุงู ูฺฏู **Callback Hell** ๐

---

ุงูุฌุง ุจูุฏ ฺฉู **Promise** ูุงุฑุฏ ุดุฏ ุชุง ฺฉุฏ ุฎูุงูุงุชุฑ ู ุชูุฒุชุฑ ุจุดู.

---

---

ุฎุจ ุจุฑู ุณุฑุงุบ ุงุตู ูุงุฌุฑุง ๐

---

## 2. Promise ฺูุ

**Promise** ุฑู ูโุชูู ูุซู ู ยซุฌุนุจูยป ุชุตูุฑ ฺฉู ฺฉู ูุชุฌูโ ู ฺฉุงุฑ **ุฒูุงูโุจุฑ** ุฏุงุฎูุดู.
ุงู ูุชุฌู ููฺฉูู:

- **ูููู** ุจุงุดู โ ูฺฏู _fulfilled_ (ุจุง ูุชุฏ `.then` ูโฺฏุฑู)
- **ุดฺฉุณุช ุจุฎูุฑู** โ ูฺฏู _rejected_ (ุจุง ูุชุฏ `.catch` ูโฺฏุฑู)

ูพุณ ู Promise ุณู ุญุงูุช ุฏุงุฑู:

1. **pending** (ุฏุฑ ุญุงู ุงูุฌุงู ฺฉุงุฑู)
2. **fulfilled** (ุจุง ููููุช ุงูุฌุงู ุดุฏ)
3. **rejected** (ุจุง ุฎุทุง ุดฺฉุณุช ุฎูุฑุฏ)

---

### ูุซุงู ุณุงุฏู:

```js
let myPromise = new Promise((resolve, reject) => {
  let success = true; // ุงูุชุญุงู ฺฉู true ุง false ุจุฐุงุฑ

  if (success) {
    resolve("ฺฉุงุฑ ูููู ุดุฏ โ");
  } else {
    reject("ฺฉุงุฑ ุดฺฉุณุช ุฎูุฑุฏ โ");
  }
});

myPromise
  .then((result) => {
    console.log("ูุชุฌู:", result);
  })
  .catch((error) => {
    console.log("ุฎุทุง:", error);
  });
```

---

### ูฺฉุชู ููู

- `resolve` ุนู ฺฉุงุฑ ูููู ุดุฏ โ ูุฑู ุชู `.then`
- `reject` ุนู ฺฉุงุฑ ุดฺฉุณุช ุฎูุฑุฏ โ ูุฑู ุชู `.catch`

---

### ูุซุงู ูุงูุน (ุจุง `setTimeout`):

```js
function wait(ms) {
  return new Promise((resolve) => {
    setTimeout(() => {
      resolve(`${ms} ููโุซุงูู ฺฏุฐุดุช`);
    }, ms);
  });
}

wait(2000).then((msg) => console.log(msg));
```

ุฎุฑูุฌ ุจุนุฏ ุงุฒ ฒ ุซุงูู:

```md
2000 ููโุซุงูู ฺฏุฐุดุช
```

---

ุงูุฌุง Promise ฺฉูฺฉ ฺฉุฑุฏ ฺฉู ุจูโุฌุง โcallback ุชู callbackโ ุจุชููู ุฒูุฌุฑู ุจุณุงุฒู:

```js
wait(1000)
  .then((msg) => {
    console.log(msg);
    return wait(2000);
  })
  .then((msg) => {
    console.log(msg);
    return wait(3000);
  })
  .then((msg) => console.log(msg));
```

---

โ๏ธ ุญุงูุง ุณุคุงู ูู ุงุฒุช:
ุจู ูุธุฑุช ุชู ุงู ฺฉุฏุ ฺุฑุง ุจุนุฏ ุงุฒ ูุฑ `.then` ู `return wait(...)` ููุดุชูุ
ุงฺฏู return ุฑู ูููุณูุ ฺู ุงุชูุงู ููุชูุ

---

---

ุณุคุงู ุฎู ุฎูุจ ูพุฑุณุฏ ๐
ุจุงู ุจุง ูู ููุงุณู ฺฉูู:

---

### ๐ด ุจุฏูู Promise (ููุท Callback)

ูุฑุถ ฺฉู ุจุฎูุง ูููู ฺฉุงุฑ ุฑู (ฑ ุซุงูู ุตุจุฑุ ุจุนุฏ ฒ ุซุงููุ ุจุนุฏ ณ ุซุงูู) ุจุง **callback** ุจููุณ:

```js
setTimeout(() => {
  console.log("ฑ ุซุงูู ฺฏุฐุดุช");
  setTimeout(() => {
    console.log("ฒ ุซุงูู ฺฏุฐุดุช");
    setTimeout(() => {
      console.log("ณ ุซุงูู ฺฏุฐุดุช");
    }, 3000);
  }, 2000);
}, 1000);
```

๐ ุงูุฌุง ูโุจู ฺฉุฏูุง ูุซู ูพููโูพูู ุชู ูู ูุฑู (callback hell).
ุงฺฏุฑ ูพุฑูฺู ุจุฒุฑฺฏโุชุฑ ุจุดูุ ูฺฏูโุฏุงุฑ ู ูููุฏูุด ุฎู ุณุฎุช ูุดู.

---

### ๐ข ุจุง Promise

ููู ฺฉุงุฑ ุฑู ุจุง Promise ุฎู ุฎูุงูุงุชุฑ ู ูุฑุชุจโุชุฑ ููุดุชู:

```js
wait(1000)
  .then((msg) => {
    console.log(msg);
    return wait(2000);
  })
  .then((msg) => {
    console.log(msg);
    return wait(3000);
  })
  .then((msg) => console.log(msg));
```

โ ูุฑ ูุฑุญูู ูพุดุช ูู ุฒูุฌุฑ ุดุฏู (chain).
โ ุฎุทุงูุง ุฑู ูู ุฎู ุฑุงุญุช ุจุง `.catch` ูโฺฏุฑู.
โ ฺฉุฏ ุชูุฒุชุฑ ู ูุงุจูโุฏุฑฺฉโุชุฑู.

---

ูพุณ ุฏูู ุงุตู ุงุณุชูุงุฏู ุงุฒ **Promise** ุงูู ฺฉู:

1. ุงุฒ **callback hell** ูุฌุงุช ูพุฏุง ฺฉูู.
2. ุจุชููู ฺฉุงุฑูุง **ุบุฑููุฒูุงู (async)** ุฑู ูุฑุชุจ ู ูุงุจูโุฎูุงูุฏู ฺฉูุชุฑู ฺฉูู.
3. ูุฏุฑุช ุฎุทุง ุฑุงุญุชโุชุฑ ุจุงุดู.

---

ุญุงูุง ฺฉู ุงูู ูููุฏูุ ูโุฎูุง ุจุฑฺฏุฑุฏู ุจู ุณุคุงู ฺฉู ูพุฑุณุฏูุ
๐ ุจู ูุธุฑุช ุงฺฏู ุชู ุฒูุฌุฑูโ `.then` ูุง ุงูู `return wait(...)` ุฑู ูููุณูุ ฺู ุงุชูุงู ููุชูุ

---

---

ุณุคุงู ุฎู ุฎูุจู ๐
ูพุณ ุจุฐุงุฑ ุจุง ฺฉ ูุซุงู ฺฉูฺฺฉ ู ุณุงุฏู ุจุงุฒุด ฺฉูู:

---

### ููุช **return ูโููุณู**

```js
wait(1000)
  .then((msg) => {
    console.log(msg);
    return wait(2000); // โฌ๏ธ ููู
  })
  .then((msg) => {
    console.log(msg);
    return wait(3000);
  })
  .then((msg) => console.log(msg));
```

ุงูุฌุง:

1. ุงูู `wait(1000)` ุงุฌุฑุง ูุดู.
2. ููุช ุชููู ุดุฏุ ูุชุฌูโุงุด ูุฑู ุชู `.then`.
3. ฺูู `return wait(2000)` ุฏุงุฑูุ ูุฑุญููโ ุจุนุฏ **ุตุจุฑ ูโฺฉูู** ุชุง `wait(2000)` ูู ุชููู ุจุดู.
4. ุจุนุฏ ุชุงุฒู ูุฑู ุณุฑุงุบ `.then` ุจุนุฏ.

ุนู **ูุฑ ฺฉุงุฑ ููุชุธุฑ ูุจู ููููู** โ ฺฉุงุฑูุง ูพุดุช ุณุฑ ูู (ุณุฑุงู) ุงูุฌุงู ูุดู.

---

### ููุช **return ููโููุณู**

```js
wait(1000)
  .then((msg) => {
    console.log(msg);
    wait(2000); // โฌ๏ธ return ุญุฐู ุดุฏ
  })
  .then((msg) => {
    console.log(msg); // msg ุงูุฌุง ฺ ูุดูุ
    return wait(3000);
  })
  .then((msg) => console.log(msg));
```

๐ ุงูุฌุง ฺ ูุดูุ

- ุชู `.then` ุงููุ ฺูู ูุง `return` ูฺฉุฑุฏูุ ููุฏุงุฑ ูพุดโูุฑุถ `undefined` ุจุฑูโฺฏุฑุฏู.
- ูพุณ `.then` ุฏูู **ุฏฺฏู ููุชุธุฑ ุงูู `wait(2000)` ูููููู** ู ููุฑ ุงุฌุฑุง ูุดู.
- ุฏุฑ ูุชุฌู ูุธู ฺฉุงุฑ ุจูโูู ูโุฎูุฑู.

---

โ ูุชุฌู:

- `return` ุจุงุนุซ ูุดู Promise ุฌุฏุฏ ุจุฑฺฏุฑุฏููุฏู ุจุดู ู ุฒูุฌุฑู ุฏุฑุณุช ฺฉุงุฑ ฺฉูู.
- ุจุฏูู `return`ุ ุฒูุฌุฑู ูุทุน ูุดู ู `.then` ุจุนุฏ ุฒูุฏุชุฑ ุงุฌุฑุง ูุดู.

---

---

ุขูุฑู ๐ ูพุณ ุงู ุจุฎุดู ฺฏุฑูุช.

---

## 3. ูุฏุฑุช ุฎุทุง ุฏุฑ Promise

ฺฉ ุงุฒ ูฺฉุงุช ูุดูฺฏ Promise ุงูู ฺฉู ุฎุทุงูุง ุฎู ุฑุงุญุช ูุฏุฑุช ูุดู.

### ูุซุงู:

```js
let myPromise = new Promise((resolve, reject) => {
  let success = false; // ุงู ุจุงุฑ ูุฐุงุฑู false
  if (success) {
    resolve("ูููโฺ ุฎูุจ ูพุด ุฑูุช โ");
  } else {
    reject("ู ุฎุทุง ุฑุฎ ุฏุงุฏ โ");
  }
});

myPromise
  .then((res) => console.log("ูุชุฌู:", res))
  .catch((err) => console.log("ุฎุทุง:", err))
  .finally(() => console.log("ฺฉุงุฑ ุชููู ุดุฏ โ"));
```

๐ ูฺฉุชูโูุง:

- `.catch` ูููโ ุฎุทุงูุง ุฑู ูโฺฏุฑู.
- `.finally` ููุดู ุงุฌุฑุง ูุดู (ฺู ูููู ุจุดู ฺู ุฎุทุง ุจุฏู).

---

## 4. ูุชุฏูุง ฺฉุงุฑุจุฑุฏ Promise

ุฌุงูุงุงุณฺฉุฑูพุช ุจุฑุง ฺฉุงุฑ ุจุง ฺูุฏุชุง Promise ุงุจุฒุงุฑูุง ุขูุงุฏู ุฏุงุฑู:

1. **`Promise.all([p1, p2, p3])`**
   ููู ุฑู ุจุง ูู ุงุฌุฑุง ูโฺฉูู โ ููุช _ููู ูููู ุจุดู_ ูุชุฌู ูุฏู.
   (ุงฺฏู ุญุช ฺฉ ุฎุทุง ุจุฏูุ ฺฉูุด reject ูุดู)

2. **`Promise.race([p1, p2, p3])`**
   ูุฑ ฺฉุฏูู ุฒูุฏุชุฑ ุชููู ุจุดู ูููู ุจุฑฺฏุฑุฏููุฏู ูุดู.

3. **`Promise.allSettled([p1, p2])`**
   ููู ุฑู ุงุฌุฑุง ูโฺฉูู โ ฺู ูููู ฺู ุฎุทุงุ ุขุฎุฑุด ูุถุนุช ูุฑฺฉุฏูู ุฑู ุจุฑูโฺฏุฑุฏููู.

---

## 5. ูพู ุจู Async/Await

ุญุงูุง ฺฉู Promise ุฑู ูููุฏุ ูุฏู ุจุนุฏ **async/await** ูุณุช.
ุฏุฑ ูุงูุน `async/await` ูููู Promise ููุ ููุท ุจุง ุณูุชฺฉุณ ุณุงุฏูโุชุฑ (ุดุจู ฺฉุฏ ููุฒูุงู).

---

---

ุนุงูู ๐ ุญุงูุง ูโุฑู ุณุฑุงุบ **Async/Await**.

---

## 1. ุงุฏู ุงุตู

Async/Await ุฏุฑ ูุงูุน ููุท ู **ุธุงูุฑ ุณุงุฏูโุชุฑ** ุจุฑุง ฺฉุงุฑ ุจุง Promise ูู.

- ุจู ุฌุง `.then` ู `.catch`
- ูโููุณ ูุซู ุงูฺฉู ฺฉุฏุช **ุนุงุฏ ู ูุฑุญูู ุจู ูุฑุญูู** ุงุฌุฑุง ูุดู.

---

## 2. ุดฺฉู ฺฉู

```js
async function myFunc() {
  try {
    let result = await somePromise();
    console.log("ูุชุฌู:", result);
  } catch (err) {
    console.log("ุฎุทุง:", err);
  }
}
```

๐ ูฺฉุงุช:

- ูุฑ ุชุงุจุน ฺฉู `async` ุจุงุดู **ุฎูุฏุด ู Promise ุจุฑูโฺฏุฑุฏููู**.
- `await` ููุท ุฏุงุฎู ุชูุงุจุน async ฺฉุงุฑ ูโฺฉูู.
- ููุช `await` ุฌูู ู Promise ุจุฐุงุฑ โ ฺฉุฏ ุชุง ููุช ุงูู Promise ุชููู ูุดูุ **ุตุจุฑ ูโฺฉูู**.

---

## 3. ูุซุงู ุณุงุฏู

```js
function wait(ms) {
  return new Promise((resolve) => {
    setTimeout(() => resolve(`${ms} ููโุซุงูู ฺฏุฐุดุช`), ms);
  });
}

async function run() {
  console.log("ุดุฑูุน");

  let msg1 = await wait(1000);
  console.log(msg1);

  let msg2 = await wait(2000);
  console.log(msg2);

  let msg3 = await wait(3000);
  console.log(msg3);

  console.log("ูพุงุงู");
}

run();
```

ุฎุฑูุฌ:

```md
ุดุฑูุน
1000 ููโุซุงูู ฺฏุฐุดุช
2000 ููโุซุงูู ฺฏุฐุดุช
3000 ููโุซุงูู ฺฏุฐุดุช
ูพุงุงู
```

๐ ูโุจูุ ุฎู ุดุจู ฺฉุฏ ูุนููู ูุฑุญูู ุจู ูุฑุญููโุณุชุ ูู ูพุดุช ูพุฑุฏู ููฺูุงู Promise ุงุณุชูุงุฏู ูุดู.

---

## 4. ูุฏุฑุช ุฎุทุง

```js
async function test() {
  try {
    let res = await Promise.reject("ู ุฎุทุง ุฑุฎ ุฏุงุฏ โ");
    console.log(res);
  } catch (err) {
    console.log("ฺฏุฑูุชูุด:", err);
  }
}

test();
```

---

## ูพุณ Async/Await ููุท ุจุฑุง ุชูุฒุชุฑ ููุดุชู Promise ููุงุณุช.

ุณุคุงู ุงุฒุช:
ุจู ูุธุฑุช ุงฺฏู ุชู ู ุชุงุจุน `async`ุ ูุง ูฺ `await` ุงุณุชูุงุฏู ูฺฉููุ ฺู ูุฑู ุจุง ู ุชุงุจุน ูุนููู ุฏุงุฑูุ

---

---

ุฎู ูฺฉุฑ ุฎูุจู ๐ ููุงุณู ฺฉูุงุฑ ูู ููุดู ุจุงุนุซ ูุดู ูุทูุจ ุจฺุณุจู.
ุจุฑู ุฏูููโุฏููู ูุนุงุฏูุด ุจุง **Promise ูุนููู** ุฑู ุจุจูู.

---

## 1. ุงุฌุฑุง ูพุดุช ุณุฑ ูู ุจุง **Promise**

(ูููู ูุซุงู ฺฉู ุจุง `await` ุฒุฏูุ ุงูุฌุง ุจุง `.then`)

```js
function wait(ms) {
  return new Promise((resolve) => {
    setTimeout(() => resolve(`${ms} ููโุซุงูู ฺฏุฐุดุช`), ms);
  });
}

console.log("ุดุฑูุน");

wait(1000)
  .then((msg1) => {
    console.log(msg1);
    return wait(2000);
  })
  .then((msg2) => {
    console.log(msg2);
    return wait(3000);
  })
  .then((msg3) => {
    console.log(msg3);
    console.log("ูพุงุงู");
  });
```

---

## 2. ูููู ฺฉุฏ ุจุง **Async/Await**

```js
function wait(ms) {
  return new Promise((resolve) => {
    setTimeout(() => resolve(`${ms} ููโุซุงูู ฺฏุฐุดุช`), ms);
  });
}

async function run() {
  console.log("ุดุฑูุน");

  let msg1 = await wait(1000);
  console.log(msg1);

  let msg2 = await wait(2000);
  console.log(msg2);

  let msg3 = await wait(3000);
  console.log(msg3);

  console.log("ูพุงุงู");
}

run();
```

๐ ูโุจูุ ุฏููุงู ูููู ฺฉุงุฑุ ููุท ูุฑู ุชู ูุญููโ ููุดุชูุดู.

---

## 3. ูุฏุฑุช ุฎุทุง ุจุง Promise

```js
let myPromise = new Promise((resolve, reject) => {
  reject("ู ุฎุทุง ุฑุฎ ุฏุงุฏ โ");
});

myPromise
  .then((res) => console.log("ูุชุฌู:", res))
  .catch((err) => console.log("ุฎุทุง:", err));
```

---

## 4. ูููู ูุฏุฑุช ุฎุทุง ุจุง Async/Await

```js
async function test() {
  try {
    let res = await Promise.reject("ู ุฎุทุง ุฑุฎ ุฏุงุฏ โ");
    console.log(res);
  } catch (err) {
    console.log("ฺฏุฑูุชูุด:", err);
  }
}

test();
```

---

๐ ุฌูุนโุจูุฏ ุณุฑุน:

- **Promise ูุนููู** โ `.then` ู `.catch`
- **Async/Await** โ `await` + `try/catch`

ูุฑ ุฏู ฺฉ ูุณุชูุ ููุท **async/await ุฎูุงูุงุชุฑ ู ุชูุฒุชุฑู**.

---

ุญุงูุง ุจุฑฺฏุฑุฏู ุจู ุณุคุงู ูู:
๐ ุงฺฏู ู ุชุงุจุน `async` ุจููุณูุ ูู **ูฺ `await` ุฏุงุฎูุด ุงุณุชูุงุฏู ูฺฉูู**ุ ฺู ูุฑู ุจุง ู ุชุงุจุน ูุนููู ุฏุงุฑูุ

---

---

๐ ูพุณ ุจุฐุงุฑ ุฎู ุณุงุฏู ุจฺฏู:

---

### ููุช ู ุชุงุจุน ุฑู `async` ูโฺฉู:

- ุงูู ุชุงุจุน **ููุดู ู Promise ุจุฑูโฺฏุฑุฏููู**.
- ุญุช ุงฺฏู ุฏุงุฎูุด ูฺ `await` ูููุณ.

---

### ูุซุงู:

```js
async function foo() {
  return 42;
}

function bar() {
  return 42;
}

console.log(foo()); // Promise { 42 }
console.log(bar()); // 42
```

๐ ุชูุงูุช:

- `foo()` ฺูู `async` ูุณุช โ ูุชุฌูโุงุด ุฏุงุฎู ู Promise ูพฺุฏู ูุดู.
- `bar()` ู ุนุฏุฏ ุนุงุฏ ุจุฑูโฺฏุฑุฏููู.

---

๐ ูพุณ ูุฑูุด ุงูู:

- ุชุงุจุน **ูุนููู** โ ููุฏุงุฑ ุนุงุฏ ุจุฑูโฺฏุฑุฏููู.
- ุชุงุจุน **async** โ ููุดู Promise ุจุฑูโฺฏุฑุฏููู (ฺู `await` ุจุงุดู ฺู ูุจุงุดู).

---

ุญุงูุง ู ุชูุฑู ฺฉูฺฺฉ ุจุฑุงุช:  
ุงฺฏู ุจููุณู:

```js
async function test() {
  return "ุณูุงู";
}

test().then((msg) => console.log(msg));
```

ุจู ูุธุฑุช ุชู ฺฉูุณูู ฺ ฺุงูพ ูุดูุ

---

---

ุงุดฺฉุงู ูุฏุงุฑู ๐
ุจุง ูุฑุญููโุจูโูุฑุญูู ุจุฑุฑุณ ฺฉูู:

---

### ฺฉุฏ:

```js
async function test() {
  return "ุณูุงู";
}

test().then((msg) => console.log(msg));
```

---

1. `test()` ู **ุชุงุจุน async** ูุณุช โ ูพุณ ุฎุฑูุฌุด ููุดู ู Promise ูู.
   ุนู ุงูุฌุง ุฎุฑูุฌ ูุดู:

   ```ms
   Promise { "ุณูุงู" }
   ```

2. ูุง ฺฏูุชู:

   ```js
   test().then((msg) => console.log(msg));
   ```

   ูพุณ ููุช Promise ุจุฑฺฏุฑุฏู (fulfill ุจุดู)ุ ููุฏุงุฑ `"ุณูุงู"` ุจู `.then` ูุฑู.

3. ุฏุฑ ูุชุฌู ุชู ฺฉูุณูู ฺุงูพ ูุดู:

   ```md
   ุณูุงู
   ```

---

๐ ูฺฉุชูโุง ฺฉู ุจุงุฏ ุงุฏุช ุจูููู:

> ูุฑฺ ุชู ุชุงุจุน async `return` ฺฉู โ ุฏุฑ ูุงูุน ูุดู `resolve` ูููู Promise.

---

ูุฎูุง ูู ุญุงูุง ูุซุงู ุจุฒูู ฺฉู ูุดูู ุจุฏู ููุช **reject** ุฏุงุดุชู ุจุงุดู ุชู async ุชุงุจุน ฺู ุดฺฉู ูุดูุ

---

---

ุนุงู ๐ ูพุณ ุจุจูู ููุช ู ุชุงุจุน `async` ุจุฎูุงุฏ ุฎุทุง ุจุฏูุ ฺู ุดฺฉูู:

---

### ูุซุงู ุจุง reject

```js
async function testError() {
  throw new Error("ู ุฎุทุง ุฑุฎ ุฏุงุฏ โ");
}

testError()
  .then((res) => console.log("ูุชุฌู:", res))
  .catch((err) => console.log("ุฎุทุง:", err.message));
```

---

### ฺ ุงุชูุงู ููุชูุ

1. `throw new Error(...)` ุฏุงุฎู `async` ูุซู ุงูู ฺฉู Promise ุฑู **reject** ฺฉุฑุฏู.
2. ูพุณ `.then` ุงุฌุฑุง ููุดู.
3. `.catch` ููุฏุงุฑ ุฎุทุง ุฑู ูโฺฏุฑู ู ฺุงูพ ูโฺฉูู.

๐ ุฎุฑูุฌ:

```md
ุฎุทุง: ู ุฎุทุง ุฑุฎ ุฏุงุฏ โ
```

---

๐ก ูฺฉุชู:

- ุชู async/await ูู ููู ฺฉุงุฑู ูโฺฉููุ ููุท ุจู ุฌุง `.then/.catch` ุงุฒ `try/catch` ุงุณุชูุงุฏู ูโฺฉูู:

```js
async function run() {
  try {
    let res = await testError();
  } catch (err) {
    console.log("ฺฏุฑูุชูุด:", err.message);
  }
}

run();
```

ุฎุฑูุฌ ุฏููุงู ูููู ูุณุช:

```md
ฺฏุฑูุชูุด: ู ุฎุทุง ุฑุฎ ุฏุงุฏ โ
```

---

ุงฺฏู ุจุฎูุงุ ูโุชููู ูุฑุญูู ุจุนุฏ ุจุฑู ู **ฺูุฏ Promise ุจุง Async/Await ููุฒูุงู ุง ูพุดุช ุณุฑ ูู** ุฑู ุจุง ูู ฺฉุงุฑ ฺฉูู ุชุง ฺฉุงููุงู ูุณูุท ุจุด.  
ูุฎูุง ุจุฑู ุงูู ูุฑุญููุ

---

---

ุนุงู ๐ ูพุณ ุจุฑู ุณุฑุงุบ **ุงุฌุฑุง ฺูุฏ Promise ุจุง Async/Await**.

---

## 1๏ธโฃ ุงุฌุฑุง ูพุดุช ุณุฑ ูู (ุณุฑุงู)

ูุซู ูููู ูุซุงู wait ฺฉู ูุจูโุชุฑ ุฏุงุดุชูุ ููุท ุจุง ฺูุฏ Promise:

```js
function wait(ms) {
  return new Promise((resolve) => setTimeout(() => resolve(ms), ms));
}

async function runSerial() {
  let a = await wait(1000);
  console.log("ฑ:", a);

  let b = await wait(2000);
  console.log("ฒ:", b);

  let c = await wait(3000);
  console.log("ณ:", c);
}

runSerial();
```

- ๐น ุงูุฌุง ูุฑ ูุฑุญูู **ุตุจุฑ ูโฺฉูู ุชุง ูุฑุญูู ูุจู ุชููู ุจุดู**.
- ุฒูุงู ฺฉู: ฑ + ฒ + ณ = ถ ุซุงูู

---

## 2๏ธโฃ ุงุฌุฑุง ููุฒูุงู (Parallel)

ุงฺฏุฑ ุจุฎูุงู ฺูุฏ Promise ููุฒูุงู ุดุฑูุน ุจุดู ู ููุช ููู ุชููู ุดุฏู ูุชุฌูโูุง ุฑู ุจฺฏุฑูุ ุงุฒ `Promise.all` ุงุณุชูุงุฏู ูโฺฉูู:

```js
async function runParallel() {
  let results = await Promise.all([wait(1000), wait(2000), wait(3000)]);

  console.log("ูุชุงุฌ:", results);
}

runParallel();
```

- ๐น ููู Promise ูุง ููุฒูุงู ุงุฌุฑุง ูุดู.
- ุฒูุงู ฺฉู = ุฒูุงู ุทููุงูโุชุฑู Promise = ณ ุซุงูู
- ุฎุฑูุฌ:

```md
ูุชุงุฌ: [1000, 2000, 3000]
```

---

๐ก ูฺฉุชูโูุง:

1. **ุณุฑุงู**: ููุช ูุฑุญูู ุจุนุฏ ููุชุธุฑ ูุฑุญูู ูุจู ุจูููู
2. **ููุฒูุงู**: ููู ุจุง ูู ุดุฑูุน ูุดูุ ุณุฑุนโุชุฑ ูุดู

---

ูุฎูุง ุจุฑุงุช ู ูุซุงู ุจุฒูู ฺฉู **ฺูุฏ Promise ููุฒูุงู ุจุง try/catch ู Async/Await ูุฏุฑุช ุฎุทุง ฺฉูู**ุ
ุงู ุฎู ฺฉุงุฑุจุฑุฏู ุชู ูพุฑูฺูโูุง.

---

---

ุฎูุจู ๐ ูพุณ ุจุฑู ุณุฑุงุบ **ฺูุฏ Promise ููุฒูุงู ุจุง ูุฏุฑุช ุฎุทุง**.

---

### ูุซุงู ุนูู

ูุฑุถ ฺฉู ุณู Promise ุฏุงุฑูุ ฺฉ ุงุฒ ุงููุง ููฺฉูู ุฎุทุง ุจุฏู:

```js
function wait(ms, shouldFail = false) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      if (shouldFail) {
        reject(`Promise ${ms} ุดฺฉุณุช ุฎูุฑุฏ โ`);
      } else {
        resolve(`${ms} ููโุซุงูู ฺฏุฐุดุช โ`);
      }
    }, ms);
  });
}

async function runAll() {
  try {
    let results = await Promise.all([
      wait(1000),
      wait(2000, true), // ุงู Promise ุดฺฉุณุช ูุฎูุฑู
      wait(1500),
    ]);

    console.log("ูุชุงุฌ:", results);
  } catch (err) {
    console.log("ุฎุทุง ฺฏุฑูุชู:", err);
  }
}

runAll();
```

---

### ๐ ูฺฉุงุช ููู:

1. ฺูู ุงุฒ `Promise.all` ุงุณุชูุงุฏู ฺฉุฑุฏู:

   - ุงฺฏู ุญุช **ฺฉ ุงุฒ Promise ูุง reject ุจุดู** โ ฺฉู `await Promise.all(...)` ุฎุทุง ูุฏู ู ูุฑู ุชู `catch`.

2. ุชุฑุชุจ ุงุฌุฑุง ููุฒูุงููุ ูู ุฒูุงู ฺฉู ุจุฑุงุจุฑ ุทููุงูโุชุฑู Promiseู (ุงูุฌุง ฒฐฐฐ ููโุซุงูู).

---

๐ก ุงฺฏุฑ ุจุฎูุง ููู Promise ูุง ุฑู ุงุฌุฑุง ฺฉู **ูู ูฺ ฺฉุฏูู ุจู ุฎุงุทุฑ ุฎุทุง ูุทุน ูุดู**ุ ุงุฒ `Promise.allSettled` ุงุณุชูุงุฏู ูโฺฉูู:

```js
async function runAllSettled() {
  let results = await Promise.allSettled([
    wait(1000),
    wait(2000, true),
    wait(1500),
  ]);

  console.log(results);
}

runAllSettled();
```

ุฎุฑูุฌ ู ุขุฑุงู ูุฏู ฺฉู ุชูุด ูุถุนุช ูุฑ Promise ูุดุฎุตู:

```md
[
{ status: 'fulfilled', value: '1000 ููโุซุงูู ฺฏุฐุดุช โ' },
{ status: 'rejected', reason: 'Promise 2000 ุดฺฉุณุช ุฎูุฑุฏ โ' },
{ status: 'fulfilled', value: '1500 ููโุซุงูู ฺฏุฐุดุช โ' }
]
```

---

ุงู ุฑูุด ุฎู ฺฉุงุฑุจุฑุฏู ููุช ูุฎูุง **ฺูุฏ ฺฉุงุฑ ููุฒูุงู ุงุฌุฑุง ุจุดู ูู ุฎุทุง ฺฉ ฺฉู ฺฉุงุฑู ูุชููู ูฺฉูู**.

---

ุงฺฏู ุจุฎูุงุ ูุฑุญูู ุจุนุฏ ูโุชููู ู **ุฌูุนโุจูุฏ ฺฉุงูู** ุงุฒ ููู ููุงูู Promise ู Async/Await ุจุง ู ูุซุงู ูุงูุน ูพุฑูฺูโูุญูุฑ ุจุฒูู ุชุง ููู ฺ ุจฺุณุจู.
ูุฎูุง ุจุฑู ุงูู ูุฑุญููุ

---

---

ุนุงู ๐ ูพุณ ุจุฑู ู **ุฌูุนโุจูุฏ ฺฉุงูู ู ูพุฑูฺูโูุญูุฑ** ุงุฒ ููู ฺ:

---

## ุณูุงุฑู ูุงูุน ูพุฑูฺู

ูุฑุถ ฺฉู ุฏุงุฑู ู ุงูพ ูโุณุงุฒู ฺฉู ุงุฒ **ุณู API ูุฎุชูู** ุฏุงุฏู ูโฺฏุฑู ู ุจุนุฏ ุงูู ุฏุงุฏูโูุง ุฑู ูุดูู ูุฏู:

1. API ุงูู โ ูุญุตููุงุช
2. API ุฏูู โ ฺฉุงุฑุจุฑุงู
3. API ุณูู โ ุณูุงุฑุดโูุง

ูุฎูุงู:

- ุงฺฏู ููู ูููู ุจูุฏู โ ููู ุฑู ููุงุด ุจุฏู
- ุงฺฏู ฺฉ ุฎุทุง ุฏุงุฏ โ ูพุงู ุฎุทุง ูุดูู ุจุฏู
- ููู ููุฒูุงู ุดุฑูุน ุจุดู ุชุง ุณุฑุนโุชุฑ ุจุงุดู

---

### 1๏ธโฃ ุจุง Promise ูุนููู

```js
function fetchData(url) {
  return fetch(url).then((res) => {
    if (!res.ok) throw new Error(`ุฎุทุง ุฏุฑ ${url}`);
    return res.json();
  });
}

Promise.all([
  fetchData("https://api.example.com/products"),
  fetchData("https://api.example.com/users"),
  fetchData("https://api.example.com/orders"),
])
  .then(([products, users, orders]) => {
    console.log("ูุญุตููุงุช:", products);
    console.log("ฺฉุงุฑุจุฑุงู:", users);
    console.log("ุณูุงุฑุดโูุง:", orders);
  })
  .catch((err) => console.log("ุฎุทุง:", err.message));
```

---

### 2๏ธโฃ ูููู ุจุง Async/Await

```js
async function run() {
  try {
    let [products, users, orders] = await Promise.all([
      fetchData("https://api.example.com/products"),
      fetchData("https://api.example.com/users"),
      fetchData("https://api.example.com/orders"),
    ]);

    console.log("ูุญุตููุงุช:", products);
    console.log("ฺฉุงุฑุจุฑุงู:", users);
    console.log("ุณูุงุฑุดโูุง:", orders);
  } catch (err) {
    console.log("ุฎุทุง:", err.message);
  } finally {
    console.log("ูพุงุงู ุนููุงุช โ");
  }
}

run();
```

---

### ูฺฉุงุช ฺฉูุฏ ฺฉู ุงุฒ ฺฉู ุฌูุณู ูโฺฏุฑู:

1. **Callback** โ ุฑูุด ูุฏูุ ููุช ฺฉุงุฑ async ุฏุงุฑูุ ููฺฉูู ฺฉุฏ ุจู ูู ุจุฑุฒู (callback hell).
2. **Promise** โ ฺฉุฏ ุชูุฒุชุฑุ `.then` ู `.catch` ุจุฑุง ูุฏุฑุช ูุชุงุฌ ู ุฎุทุง.
3. **Async/Await** โ ุธุงูุฑ ุณุงุฏู ู ุฎูุงูุงุชุฑ ุจุฑุง Promise ูุงุ ุจุง `try/catch` ุจุฑุง ุฎุทุงูุง.
4. **ุงุฌุฑุง ูพุดุช ุณุฑ ูู** โ ุจุง ฺูุฏ `await` ุณุฑุงู.
5. **ุงุฌุฑุง ููุฒูุงู** โ ุจุง `Promise.all` ุง `Promise.allSettled`.
6. **ูุฏุฑุช ุฎุทุงูุง** โ `.catch` ุง `try/catch` ู `finally` ุจุฑุง ูพุงฺฉุณุงุฒ.

---

ุงฺฏุฑ ุจุฎูุงุ ูโุชููู ู **ฺุงุฑุช ุชุตูุฑ ฺฉูฺฺฉ** ูู ุจฺฉุดู ฺฉู ูุฑู Callback / Promise / Async-Await ู ุณุฑุงู/ููุฒูุงู ุฑู ูุดูู ุจุฏู ุชุง ููู ฺุฒ ุชู ุฐูู ุจฺุณุจู.

ูุฎูุง ุงู ฺฉุงุฑู ุจฺฉููุ

---

---
